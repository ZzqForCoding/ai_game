(function(){"use strict";var e={2113:function(e,t,s){var a=s(9242),o=s(3396),l=s(7139);const r=(0,o._)("div",{class:"aside-header"},[(0,o._)("img",{src:"https://img.zzqahm.top/aigame_platform/avatar/icon1.png",alt:"",style:{width:"30px",height:"30px"}}),(0,o._)("span",{style:{"margin-left":"5px"}},"AIGame Platform")],-1),n=(0,o._)("span",null,"网站介绍",-1),i=(0,o._)("span",{style:{"margin-left":"5px"}}," 网站说明 ",-1),c=(0,o._)("span",{style:{"margin-left":"5px"}}," 游戏介绍 ",-1),u=(0,o._)("span",{style:{"margin-left":"5px"}}," 代码编写指南 ",-1),d=(0,o.Uk)("首页"),p=(0,o.Uk)("动态"),m=(0,o.Uk)("排行榜"),h={class:"current-page"},g={key:0},w={key:1},_={class:"dialog-footer"},f=(0,o.Uk)("取消"),k=(0,o.Uk)("确认"),y=(0,o._)("div",{class:"flex-grow"},null,-1),v={class:"el-dropdown-link"},b={class:"username"},C=(0,o.Uk)("个人信息"),x=(0,o.Uk)("我的空间"),W=(0,o.Uk)("退出"),S=(0,o._)("span",null," 登录 ",-1),z=(0,o._)("span",null," 注册 ",-1),I=(0,o._)("div",{class:"footer"},null,-1),U=(0,o._)("div",{class:"footer-icon"},[(0,o._)("svg",{t:"1660657940962",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3310",width:"25",height:"25"},[(0,o._)("path",{d:"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z m0 896c-212.032 0-384-171.968-384-384S299.968 128 512 128s384 171.968 384 384-171.968 384-384 384z m94.08-513.408L512 192.064l-94.016 190.528-210.304 30.592 152.192 148.288-35.968 209.344L512 672l188.032 98.88-35.904-209.344 152.128-148.288-210.176-30.656z",fill:"#ffffff","p-id":"3311"})])],-1);function V(e,t,s,a,V,q){const j=(0,o.up)("QuestionFilled"),M=(0,o.up)("el-icon"),D=(0,o.up)("el-menu-item"),P=(0,o.up)("router-link"),B=(0,o.up)("el-menu-item-group"),O=(0,o.up)("el-sub-menu"),$=(0,o.up)("HomeFilled"),L=(0,o.up)("Promotion"),R=(0,o.up)("DataLine"),T=(0,o.up)("Expand"),N=(0,o.up)("Fold"),H=(0,o.up)("el-button"),F=(0,o.up)("el-scrollbar"),E=(0,o.up)("el-menu"),A=(0,o.up)("el-aside"),G=(0,o.up)("Back"),Z=(0,o.up)("el-dialog"),J=(0,o.up)("el-avatar"),Y=(0,o.up)("arrow-down"),K=(0,o.up)("el-dropdown-item"),Q=(0,o.up)("el-dropdown-menu"),X=(0,o.up)("el-dropdown"),ee=(0,o.up)("el-header"),te=(0,o.up)("router-view"),se=(0,o.up)("el-main"),ae=(0,o.up)("el-footer"),oe=(0,o.up)("el-container");return(0,o.wg)(),(0,o.j4)(oe,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A,{width:"200px",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[r,(0,o.Wm)(E,{class:"el-aside-menu","background-color":"rgb(13,66,118)","text-color":"#CCCCCC","active-text-color":"#fff",collapse:a.isCollapse},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"aside-scrollbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{index:"1"},{title:(0,o.w5)((()=>[(0,o.Wm)(M,{size:28},{default:(0,o.w5)((()=>[(0,o.Wm)(j)])),_:1}),n])),default:(0,o.w5)((()=>[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"link-text",to:{name:"intro_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"1-1"},{default:(0,o.w5)((()=>[i])),_:1})])),_:1}),(0,o.Wm)(P,{class:"link-text",to:{name:"game_intro_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"1-2"},{default:(0,o.w5)((()=>[c])),_:1})])),_:1}),(0,o.Wm)(P,{class:"link-text",to:{name:"code_helper_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"1-3"},{default:(0,o.w5)((()=>[u])),_:1})])),_:1})])),_:1})])),_:1}),e.$store.state.user.is_login?((0,o.wg)(),(0,o.j4)(P,{key:0,class:"link-text",to:{name:"record_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"2"},{title:(0,o.w5)((()=>[d])),default:(0,o.w5)((()=>[(0,o.Wm)(M,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)($)])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),e.$store.state.user.is_login?((0,o.wg)(),(0,o.j4)(P,{key:1,class:"link-text",to:{name:"fresh_news_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"3"},{title:(0,o.w5)((()=>[p])),default:(0,o.w5)((()=>[(0,o.Wm)(M,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(L)])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),e.$store.state.user.is_login?((0,o.wg)(),(0,o.j4)(P,{key:2,class:"link-text",to:{name:"ranklist_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"4"},{title:(0,o.w5)((()=>[m])),default:(0,o.w5)((()=>[(0,o.Wm)(M,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(R)])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(H,{onClick:a.collapse,circle:"",class:"collapse-btn",color:"#626aef"},{default:(0,o.w5)((()=>[a.isCollapse?((0,o.wg)(),(0,o.j4)(M,{key:0,size:17},{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1})):((0,o.wg)(),(0,o.j4)(M,{key:1,size:17},{default:(0,o.w5)((()=>[(0,o.Wm)(N)])),_:1}))])),_:1},8,["onClick"])])),_:1})])),_:1},8,["collapse"])])),_:1}),(0,o.Wm)(oe,{class:"right-container"},{default:(0,o.w5)((()=>[(0,o.Wm)(ee,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{"default-active":e.activeIndex,mode:"horizontal",ellipsis:!1,onSelect:e.handleSelect},{default:(0,o.w5)((()=>[(0,o._)("div",h,[""!==e.$store.state.backPage?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"back-menu",onClick:t[0]||(t[0]=(...e)=>a.showConfirmBack&&a.showConfirmBack(...e))},[(0,o.Wm)(M,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(G)])),_:1})])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,l.zw)(a.page),1)]),(0,o.Wm)(Z,{modelValue:a.showBackDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.showBackDialog=e),title:"Warning",width:"30%","align-center":"",draggable:""},{footer:(0,o.w5)((()=>[(0,o._)("span",_,[(0,o.Wm)(H,{onClick:t[1]||(t[1]=e=>a.showBackDialog=!1)},{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(H,{type:"danger",onClick:a.clickBack},{default:(0,o.w5)((()=>[k])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>["playing"===e.$store.state.pk.status?((0,o.wg)(),(0,o.iD)("span",g," 你确认退出游戏吗？ ")):"matching"===e.$store.state.pk.status?((0,o.wg)(),(0,o.iD)("span",w," 你确认退出匹配吗？ ")):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),y,e.$store.state.user.is_login?((0,o.wg)(),(0,o.j4)(D,{key:0,index:"1",style:{"margin-right":"20px",height:"60px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(X,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(Q,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"link-text",to:{name:"personal_info"}},{default:(0,o.w5)((()=>[(0,o.Wm)(K,null,{default:(0,o.w5)((()=>[C])),_:1})])),_:1}),(0,o.Wm)(P,{class:"link-text",to:{name:"myspace_index",params:{userId:e.$store.state.user.id}}},{default:(0,o.w5)((()=>[(0,o.Wm)(K,null,{default:(0,o.w5)((()=>[x])),_:1})])),_:1},8,["to"]),(0,o.Wm)(K,{divided:"",onClick:a.logout},{default:(0,o.w5)((()=>[W])),_:1},8,["onClick"])])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",v,[(0,o.Wm)(J,{shape:"square",size:50,src:e.$store.state.user.photo,style:{"margin-right":"15px"}},null,8,["src"]),(0,o._)("span",b,(0,l.zw)(e.$store.state.user.username),1),(0,o.Wm)(M,{class:"el-icon--right"},{default:(0,o.w5)((()=>[(0,o.Wm)(Y)])),_:1})])])),_:1})])),_:1})):(0,o.kq)("",!0),e.$store.state.user.is_login?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(P,{key:1,class:"link-text",to:{name:"user_account_login"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"1"},{default:(0,o.w5)((()=>[S])),_:1})])),_:1})),e.$store.state.user.is_login?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(P,{key:2,class:"link-text",to:{name:"user_account_register"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"2"},{default:(0,o.w5)((()=>[z])),_:1})])),_:1}))])),_:1},8,["default-active","onSelect"])])),_:1}),(0,o.Wm)(se,{class:"main",style:{padding:"0",height:"calc(100vh - 60px - 50px)"}},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"main-scrollbar"},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(te,{key:e.$route.fullPath}))])),_:1})])),_:1}),(0,o.Wm)(ae,null,{default:(0,o.w5)((()=>[I,U])),_:1})])),_:1})])),_:1})}var q=s(65),j=s(2483);const M=e=>((0,o.dD)("data-v-71a76377"),e=e(),(0,o.Cn)(),e),D=M((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"公共聊天区")],-1))),P={class:"username"},B={class:"main"},O=(0,o.Uk)("发送");function $(e,t,s,r,n,i){const c=(0,o.up)("PlayGround"),u=(0,o.up)("MatchGround"),d=(0,o.up)("el-col"),p=(0,o.up)("el-avatar"),m=(0,o.up)("el-button"),h=(0,o.up)("el-scrollbar"),g=(0,o.up)("el-card"),w=(0,o.up)("el-input"),_=(0,o.up)("el-form"),f=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{span:14,offset:2},{default:(0,o.w5)((()=>["playing"===e.$store.state.pk.status?((0,o.wg)(),(0,o.j4)(c,{key:0,game:r.game,flag:"pk"},null,8,["game"])):(0,o.kq)("",!0),"matching"===e.$store.state.pk.status?((0,o.wg)(),(0,o.j4)(u,{key:1,operate:r.operate,botId:r.botId},null,8,["operate","botId"])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(d,{span:5,offset:1,style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"message-card",style:{"user-select":"none"}},{header:(0,o.w5)((()=>[D])),default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"message-body",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{"max-height":"250px"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.pk.msgs,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"message-content",key:t.id},[(0,o._)("div",P,(0,l.zw)(t.username),1),(0,o._)("div",B,[(0,o.Wm)(p,{class:"photo",size:"small",src:t.photo},null,8,["src"]),(0,o.Wm)(m,{round:"",type:e.$store.state.user.username===t.username?"primary":""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t.text),1)])),_:2},1032,["type"])])])))),128))])),_:1})])),_:1}),(0,o.Wm)(g,{class:"message-send",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{onSubmit:t[1]||(t[1]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"message-input",type:"textarea",placeholder:"Please input message...",modelValue:r.message,"onUpdate:modelValue":t[0]||(t[0]=e=>r.message=e),resize:"none",onKeydown:(0,a.D2)(r.enterSendMsg,["enter"])},null,8,["modelValue","onKeydown"]),(0,o.Wm)(m,{class:"sendBtn",type:"primary",onClick:r.sendMsg,size:"small"},{default:(0,o.w5)((()=>[O])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}const L=e=>((0,o.dD)("data-v-32285b84"),e=e(),(0,o.Cn)(),e),R={class:"playground"},T={key:0,class:"userinfo"},N={class:"userinfo-container"},H={class:"user-profile"},F=["src"],E={class:"username"},A=L((()=>(0,o._)("div",{class:"eye"},null,-1))),G=L((()=>(0,o._)("div",{class:"eye"},null,-1))),Z=[A,G],J={key:3,style:{color:"white","font-size":"18px","font-weight":"600"}},Y={key:4,style:{color:"black","font-size":"18px","font-weight":"600"}},K={key:5},Q={key:6},X={key:0,class:"round-msg"},ee=L((()=>(0,o._)("span",null,"round",-1))),te={key:0,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/none.png",alt:""},se={key:1,class:"direction-msg"},ae=L((()=>(0,o._)("span",null,"direction",-1))),oe={key:0,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/none.png",alt:""},le={key:1,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/up.png",alt:""},re={key:2,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/right.png",alt:""},ne={key:3,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/down.png",alt:""},ie={key:4,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/left.png",alt:""},ce={key:2,class:"round-msg"},ue=L((()=>(0,o._)("span",null,"round",-1))),de={key:0,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/none.png",alt:""},pe={class:"userinfo-container"},me={key:0},he={key:1},ge=L((()=>(0,o._)("div",{class:"eye"},null,-1))),we=L((()=>(0,o._)("div",{class:"eye"},null,-1))),_e=[ge,we],fe={key:5,style:{color:"white","font-size":"18px","font-weight":"600"}},ke={key:6,style:{color:"black","font-size":"18px","font-weight":"600"}},ye={class:"user-profile"},ve=["src"],be={class:"username"},Ce={key:1,class:"userinfo"},xe={class:"userinfo-container"},We={class:"user-profile"},Se=["src"],ze={class:"username"},Ie={key:0,class:"chess",style:{"background-color":"white"}},Ue={key:1,class:"body",style:{"background-color":"#F94848"}},Ve=L((()=>(0,o._)("div",{class:"eye"},null,-1))),qe=L((()=>(0,o._)("div",{class:"eye"},null,-1))),je=[Ve,qe],Me={key:2,class:"chess",style:{"background-color":"white"}},De={key:3,style:{color:"white","font-size":"18px","font-weight":"600"}},Pe={key:4},Be={class:"userinfo-container"},Oe={key:0},$e={key:1,class:"chess",style:{"background-color":"black"}},Le={key:2,class:"body",style:{"background-color":"#4876EC"}},Re=L((()=>(0,o._)("div",{class:"eye"},null,-1))),Te=L((()=>(0,o._)("div",{class:"eye"},null,-1))),Ne=[Re,Te],He={key:3,class:"chess",style:{"background-color":"black"}},Fe={key:4,style:{color:"black","font-size":"18px","font-weight":"600"}},Ee={class:"user-profile"},Ae=["src"],Ge={class:"username"};function Ze(e,t,s,a,r,n){const i=(0,o.up)("GameMap"),c=(0,o.up)("el-tag");return(0,o.wg)(),(0,o.iD)("div",R,[(0,o.Wm)(i,{game:s.game},null,8,["game"]),"pk"===s.flag?((0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("div",N,[(0,o._)("div",H,[(0,o._)("img",{src:e.$store.state.user.photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,F),(0,o._)("span",E,(0,l.zw)(e.$store.state.user.username),1)]),1===s.game?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: white;":"background-color: black;")},null,4)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"body",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: #4876EC;":"background-color: #F94848;")},Z,4)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: white;":"background-color: black;")},null,4)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.a_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",J,"白子："+(0,l.zw)(e.$store.state.pk.aCnt),1)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.b_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",Y,"黑子："+(0,l.zw)(e.$store.state.pk.bCnt),1)):(0,o.kq)("",!0),e.$store.state.pk.a_id===e.$store.state.user.id&&e.$store.state.pk.a_is_robot?((0,o.wg)(),(0,o.iD)("div",K,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.a_language),1)])),_:1})])):e.$store.state.pk.b_id===e.$store.state.user.id&&e.$store.state.pk.b_is_robot?((0,o.wg)(),(0,o.iD)("div",Q,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.b_language),1)])),_:1})])):(0,o.kq)("",!0)]),1===s.game?((0,o.wg)(),(0,o.iD)("div",X,[ee,null===e.$store.state.pk.firstMove?((0,o.wg)(),(0,o.iD)("img",te)):((0,o.wg)(),(0,o.iD)("div",{key:1,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.pk.firstMove?"background-color: white;":"background-color: black;")},null,4))])):2===s.game?((0,o.wg)(),(0,o.iD)("div",se,[ae,-1===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",oe)):0===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",le)):1===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",re)):2===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",ne)):((0,o.wg)(),(0,o.iD)("img",ie))])):3===s.game?((0,o.wg)(),(0,o.iD)("div",ce,[ue,null===e.$store.state.pk.firstMove?((0,o.wg)(),(0,o.iD)("img",de)):((0,o.wg)(),(0,o.iD)("div",{key:1,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.pk.firstMove?"background-color: white;":"background-color: black;")},null,4))])):(0,o.kq)("",!0),(0,o._)("div",pe,[e.$store.state.pk.a_id===e.$store.state.user.id&&e.$store.state.pk.b_is_robot?((0,o.wg)(),(0,o.iD)("div",me,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.b_language),1)])),_:1})])):e.$store.state.pk.b_id==e.$store.state.user.id&&e.$store.state.pk.a_is_robot?((0,o.wg)(),(0,o.iD)("div",he,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.a_language),1)])),_:1})])):(0,o.kq)("",!0),1===s.game?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: black;":"background-color: white;")},null,4)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",{key:3,class:"body",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: #F94848;":"background-color: #4876EC;")},_e,4)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",{key:4,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: black;":"background-color: white;")},null,4)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.a_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",fe,"黑子："+(0,l.zw)(e.$store.state.pk.bCnt),1)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.b_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",ke,"白子："+(0,l.zw)(e.$store.state.pk.aCnt),1)):(0,o.kq)("",!0),(0,o._)("div",ye,[(0,o._)("img",{src:e.$store.state.pk.opponent_photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,ve),(0,o._)("span",be,(0,l.zw)(e.$store.state.pk.opponent_username),1)])])])):((0,o.wg)(),(0,o.iD)("div",Ce,[(0,o._)("div",xe,[(0,o._)("div",We,[(0,o._)("img",{src:e.$store.state.record.a_photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,Se),(0,o._)("span",ze,(0,l.zw)(e.$store.state.record.a_username),1)]),1===s.game?((0,o.wg)(),(0,o.iD)("div",Ie)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",Ue,je)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",Me)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",De,"白子："+(0,l.zw)(e.$store.state.pk.aCnt),1)):(0,o.kq)("",!0),e.$store.state.record.a_is_robot?((0,o.wg)(),(0,o.iD)("div",Pe,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.record.a_language),1)])),_:1})])):(0,o.kq)("",!0)]),(0,o._)("div",Be,[e.$store.state.record.b_is_robot?((0,o.wg)(),(0,o.iD)("div",Oe,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.record.b_language),1)])),_:1})])):(0,o.kq)("",!0),1===s.game?((0,o.wg)(),(0,o.iD)("div",$e)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",Le,Ne)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",He)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",Fe,"黑子："+(0,l.zw)(e.$store.state.pk.bCnt),1)):(0,o.kq)("",!0),(0,o._)("div",Ee,[(0,o._)("img",{src:e.$store.state.record.b_photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,Ae),(0,o._)("span",Ge,(0,l.zw)(e.$store.state.record.b_username),1)])])]))])}const Je={class:"gamemap",ref:"parent"};function Ye(e,t,s,l,r,n){const i=(0,o.up)("ResultBoard");return(0,o.wg)(),(0,o.iD)("div",Je,[(0,o._)("canvas",{ref:"canvas",tabindex:"0",onContextmenu:t[0]||(t[0]=(0,a.iM)((()=>{}),["prevent"])),style:{height:"100%"}},null,544),"none"!=e.$store.state.pk.loser?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0)],512)}var Ke=s(4870);const Qe=e=>((0,o.dD)("data-v-492be264"),e=e(),(0,o.Cn)(),e),Xe={class:"result-board",style:{"user-select":"none"}},et={key:0,class:"all"},tt={class:"user-profile"},st=["src"],at={class:"username"},ot=Qe((()=>(0,o._)("span",{class:"user-state"}," 平 ",-1))),lt={class:"user-profile"},rt=["src"],nt={class:"username"},it={key:1,class:"lose"},ct={class:"user-profile"},ut=["src"],dt={class:"username"},pt=Qe((()=>(0,o._)("span",{class:"user-state"}," 输 ",-1))),mt={key:2,class:"win"},ht={class:"user-profile"},gt=["src"],wt={class:"username"},_t=Qe((()=>(0,o._)("span",{class:"user-state"}," 赢 ",-1))),ft={style:{"text-align":"center"}},kt=(0,o.Uk)("再来一局"),yt=(0,o.Uk)("回到主页");function vt(e,t,s,a,r,n){const i=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",Xe,["all"===e.$store.state.pk.loser?((0,o.wg)(),(0,o.iD)("div",et,[(0,o._)("div",tt,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,st),(0,o._)("span",at,(0,l.zw)(e.$store.state.user.username),1)]),ot,(0,o._)("div",lt,[(0,o._)("img",{src:e.$store.state.pk.opponent_photo,alt:""},null,8,rt),(0,o._)("span",nt,(0,l.zw)(e.$store.state.pk.opponent_username),1)])])):"A"===e.$store.state.pk.loser&&e.$store.state.pk.a_id===parseInt(e.$store.state.user.id)||"B"===e.$store.state.pk.loser&&e.$store.state.pk.b_id===parseInt(e.$store.state.user.id)?((0,o.wg)(),(0,o.iD)("div",it,[(0,o._)("div",ct,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,ut),(0,o._)("span",dt,(0,l.zw)(e.$store.state.user.username),1)]),pt])):((0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("div",ht,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,gt),(0,o._)("span",wt,(0,l.zw)(e.$store.state.user.username),1)]),_t])),(0,o._)("div",ft,[(0,o.Wm)(i,{color:"rgb(255, 193, 7)",round:"",onClick:a.restart,class:"btn"},{default:(0,o.w5)((()=>[kt])),_:1},8,["onClick"]),(0,o.Wm)(i,{round:"",onClick:a.back,class:"btn"},{default:(0,o.w5)((()=>[yt])),_:1},8,["onClick"])])])}var bt={name:"ResultBoard",setup(){const e=(0,q.oR)(),t=()=>{e.commit("updateStatus","matching"),e.commit("updateGameResult",{loser:"none",status:"none"}),e.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),e.commit("clearMsg"),e.commit("updateCanSendMsg",!1),e.commit("clearCodeOutMsg")},s=()=>{tc.push({name:"record_index"}),e.commit("updateStatus","matching"),e.commit("updateGameResult",{loser:"none",status:"none"}),e.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),e.commit("clearMsg"),e.commit("updateCanSendMsg",!1),e.commit("clearCodeOutMsg")};return{restart:t,back:s}}},Ct=s(89);const xt=(0,Ct.Z)(bt,[["render",vt],["__scopeId","data-v-492be264"]]);var Wt=xt;const St=[];class zt{constructor(){St.push(this),this.has_called_start=!1,this.timedelta=0,this.uuid=this.create_uuid()}create_uuid(){let e="";for(let t=0;t<8;t++){let t=parseInt(Math.floor(10*Math.random()));e+=t}return e}start(){}update(){}on_destroy(){}destroy(){this.on_destroy();for(let e in St){const t=St[e];if(t.uuid===this.uuid){St.splice(e,1);break}}}}let It;const Ut=e=>{for(let t of St)t.has_called_start?(t.timedelta=e-It,t.update()):(t.has_called_start=!0,t.start());It=e,requestAnimationFrame(Ut)};requestAnimationFrame(Ut);class Vt extends zt{constructor(e,t,s){super(),this.r=e,this.c=t,this.gamemap=s,this.color="#B37226"}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.fillRect(this.c*e,this.r*e,e,e)}}class qt{constructor(e,t){this.r=e,this.c=t,this.x=t+.5,this.y=e+.5}}class jt extends zt{constructor(e,t){super(),this.id=e.id,this.color=e.color,this.gamemap=t,this.cells=[new qt(e.r,e.c)],this.next_cell=null,this.speed=5,this.direction=-1,this.status="idle",this.dr=[-1,0,1,0],this.dc=[0,1,0,-1],this.step=0,this.eps=.01,this.eye_direction=0,this.id===this.gamemap.store.state.pk.b_id&&(this.eye_direction=2),this.eye_dx=[[-1,1],[1,1],[1,-1],[-1,-1]],this.eye_dy=[[-1,-1],[-1,1],[1,1],[-1,1]]}start(){}set_direction(e){this.direction=e}check_tail_increasing(){return this.step<=10||this.step%3===1}next_step(){const e=this.direction;this.next_cell=new qt(this.cells[0].r+this.dr[e],this.cells[0].c+this.dc[e]),this.eye_direction=e,this.direction=-1,this.status="move",this.step++;const t=this.cells.length;for(let s=t;s>0;s--)this.cells[s]=JSON.parse(JSON.stringify(this.cells[s-1]))}update_move(){const e=this.next_cell.x-this.cells[0].x,t=this.next_cell.y-this.cells[0].y,s=Math.sqrt(e*e+t*t);if(s<this.eps)this.cells[0]=this.next_cell,this.next_cell=null,this.status="idle",this.check_tail_increasing()||this.cells.pop();else{const a=this.speed*this.timedelta/1e3;if(this.cells[0].x+=a*e/s,this.cells[0].y+=a*t/s,!this.check_tail_increasing()){const e=this.cells.length,t=this.cells[e-1],o=this.cells[e-2],l=o.x-t.x,r=o.y-t.y;t.x+=a*l/s,t.y+=a*r/s}}}update(){"move"===this.status&&this.update_move(),this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,"die"===this.status&&(t.fillStyle="white");for(const s of this.cells)t.beginPath(),t.arc(s.x*e,s.y*e,e/2*.8,0,2*Math.PI),t.fill();for(let s=1;s<this.cells.length;s++){const a=this.cells[s-1],o=this.cells[s];Math.abs(a.x-o.x)<this.eps&&Math.abs(a.y-o.y)<this.eps||(Math.abs(a.x-o.x)<this.eps?t.fillRect((a.x-.5+.1)*e,Math.min(a.y,o.y)*e,.8*e,Math.abs(a.y-o.y)*e):t.fillRect(Math.min(a.x,o.x)*e,(a.y-.5+.1)*e,Math.abs(a.x-o.x)*e,.8*e))}t.fillStyle="black";for(let s=0;s<2;s++){const a=(this.cells[0].x+.15*this.eye_dx[this.eye_direction][s])*e,o=(this.cells[0].y+.15*this.eye_dy[this.eye_direction][s])*e;t.beginPath(),t.arc(a,o,.05*e,0,2*Math.PI),t.fill()}}}class Mt extends zt{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.L=0,this.rows=13,this.cols=14,this.inner_walls_count=20,this.walls=[]}create_walls(){const e=this.store.state.pk.gamemap;for(let t=0;t<this.rows;t++)for(let s=0;s<this.cols;s++)e[t][s]&&this.walls.push(new Vt(t,s,this))}start(){this.create_walls();let e="",t="";this.store.state.record.is_record?(e="#F94848",t="#4876EC"):this.store.state.pk.a_id===this.store.state.user.id?(e="#4876EC",t="#F94848"):(e="#F94848",t="#4876EC"),this.snakes=[new jt({id:this.store.state.pk.a_id,color:e,r:this.rows-2,c:1},this),new jt({id:this.store.state.pk.b_id,color:t,r:1,c:this.cols-2},this)],this.add_listening_events()}transDir(e){return e<=1?e+=2:e-=2,e}add_listening_events(){if(this.store.state.record.is_record){let e=0;const t=this.store.state.record.a_steps,s=this.store.state.record.b_steps,a=this.store.state.record.record_loser,[o,l]=this.snakes,r=setInterval((()=>{e>=t.length?("all"!==a&&"A"!==a||(o.status="die"),"all"!==a&&"B"!==a||(l.status="die"),clearInterval(r)):(e<t.length&&o.set_direction(parseInt(t[e])),e<s.length&&l.set_direction(parseInt(s[e]))),e++}),300)}else this.ctx.canvas.focus(),this.ctx.canvas.addEventListener("keydown",(e=>{let t=-1,s=-1;"w"===e.key?t=0:"d"===e.key?t=1:"s"===e.key?t=2:"a"===e.key&&(t=3),s=this.store.state.user.id!==this.store.state.pk.a_id?this.transDir(t):t,s>=0&&(this.store.commit("updateDir",t),this.store.state.pk.socket.send(JSON.stringify({event:"move",direction:s})))}))}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}check_ready(){for(const e of this.snakes){if("idle"!==e.status)return!1;if(-1===e.direction)return!1}return!0}next_step(){for(const e of this.snakes)e.next_step()}update(){this.update_size(),this.check_ready()&&this.next_step(),this.render()}render(){const e="#AAD751",t="#A2D149";for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)this.ctx.fillStyle=(s+a)%2===0?e:t,this.ctx.fillRect(a*this.L,s*this.L,this.L,this.L)}}class Dt extends zt{constructor(e,t){super(),this.gamemap=e,this.color=t.color,this.r=t.r,this.c=t.c}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.beginPath(),t.arc(this.r*e,this.c*e,.36*e,0,2*Math.PI),t.fill()}}class Pt extends zt{constructor(e,t,s){super(),this.gamemap=e,this.id=t,this.color=s,this.floatR=-1,this.floatC=-1,this.isClick=!1}start(){this.add_listening_events()}update(){this.render()}add_listening_events(){this.gamemap.store.state.record.is_record||(this.gamemap.ctx.canvas.addEventListener("click",(e=>{if(this.gamemap.store.state.pk.firstMove!==this.id)return;const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L,o=Math.round(s),l=Math.round(a);this.gamemap.pre_judge(o,l)&&!this.gamemap.map[10*o+l]&&this.gamemap.store.state.pk.socket.send(JSON.stringify({event:"next_round",x:o,y:l}))})),this.gamemap.ctx.canvas.addEventListener("mousemove",(e=>{const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L;this.floatR=Math.round(s),this.floatC=Math.round(a)})),this.gamemap.ctx.canvas.addEventListener("mousedown",(()=>{this.isClick=!0})),this.gamemap.ctx.canvas.addEventListener("mouseup",(()=>{this.isClick=!1})),this.gamemap.ctx.canvas.addEventListener("mouseout",(()=>{this.floatR=-1,this.floatC=-1})))}set_chess(e,t){let s=new Dt(this.gamemap,{color:this.color,r:e,c:t});this.gamemap.currentChess=s,this.gamemap.pushChess(s)}render(){if(this.gamemap.store.state.pk.firstMove===this.id&&this.id===this.gamemap.store.state.user.id&&"none"===this.gamemap.store.state.pk.loser&&this.floatR>=1&&this.floatR<this.gamemap.rows&&this.floatC>=1&&this.floatC<this.gamemap.cols&&!this.gamemap.map[10*this.floatR+this.floatC]&&!this.gamemap.judgeRobot()){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.beginPath();let s=.39*e;this.isClick&&(s=.34*e),t.arc(this.floatR*e,this.floatC*e,s,0,2*Math.PI),t.fill(),this.gamemap.canvasUtils.drawAim(t,this.floatR*e,this.floatC*e,.2*e,"red")}}}class Bt{drawRoundedRectangle(e,t,s,a,o,l,r,n){e.beginPath(),e.moveTo(t+l,s),e.lineTo(t+a-l,s),e.arc(t+a-l,s+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+a,s+o-l),e.arc(t+a-l,s+o-l,l,0,.5*Math.PI),e.lineTo(t+l,s+o),e.arc(t+l,s+o-l,l,.5*Math.PI,Math.PI),e.lineTo(t,s+l),e.arc(t+l,s+l,l,Math.PI,1.5*Math.PI),e.fillStyle=r,e.strokeStyle=n,e.fill(),e.stroke(),e.closePath()}drawAngle(e,t,s,a,o,l,r,n){e.beginPath(),e.moveTo(t+a-l,s),e.arc(t+a-l,s+l,l,1.5*Math.PI,2*Math.PI),e.moveTo(t+a,s+o-l),e.arc(t+a-l,s+o-l,l,0,.5*Math.PI),e.moveTo(t+l,s+o),e.arc(t+l,s+o-l,l,.5*Math.PI,Math.PI),e.moveTo(t,s+l),e.arc(t+l,s+l,l,Math.PI,1.5*Math.PI),e.fillStyle=r,e.strokeStyle=n,e.fill(),e.stroke(),e.closePath()}drawAim(e,t,s,a,o){e.beginPath(),e.moveTo(t-a-.4*a,s),e.lineTo(t-.4*a,s),e.moveTo(t,s-a-.4*a),e.lineTo(t,s-.4*a),e.moveTo(t+.4*a,s),e.lineTo(t+a+.4*a,s),e.moveTo(t,s+.4*a),e.lineTo(t,s+a+.4*a),e.strokeStyle=o,e.fill(),e.stroke(),e.closePath()}drawDottedCircle(e,t,s,a,o,l,r){let n=a/o,i=2*Math.PI/n,c=[],u=-1;while(u<n){let e=i*u,o=i*(u+1);c.push({x:Math.cos(e)*a+t,y:Math.sin(e)*a+s,ex:Math.cos(o)*a+t,ey:Math.sin(o)*a+s}),u+=2}e.lineWidth=r,e.strokeStyle=l,e.beginPath();for(let d=0;d<c.length;d++)e.moveTo(c[d].x,c[d].y),e.lineTo(c[d].ex,c[d].ey),e.stroke();e.closePath()}drawRoundedRectangleWithText(e,t,s,a,o,l,r,n,i,c){e.beginPath(),e.moveTo(t+l,s),e.lineTo(t+a-l,s),e.arc(t+a-l,s+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+a,s+o-l),e.arc(t+a-l,s+o-l,l,0,.5*Math.PI),e.lineTo(t+l,s+o),e.arc(t+l,s+o-l,l,.5*Math.PI,Math.PI),e.lineTo(t,s+l),e.arc(t+l,s+l,l,Math.PI,1.5*Math.PI),e.fillStyle=r,e.strokeStyle=n,e.fill(),e.stroke(),e.closePath(),e.font="bold 17px Arial,sans-serif",e.fillStyle=i,e.textAlign="center",e.textBaseline="middle",e.fillText(c,t+a/2,s+o/2)}}class Ot extends zt{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.rows=17,this.cols=17,this.points=[{x:4,y:4},{x:this.rows-4,y:4},{x:4,y:this.cols-4},{x:this.rows-4,y:this.cols-4}],this.chesses=[],this.map={},this.currentChess=null,this.canvasUtils=new Bt}start(){if(this.players=[new Pt(this,this.store.state.pk.a_id,"white"),new Pt(this,this.store.state.pk.b_id,"black")],this.store.state.record.is_record){let e=0,t=0,s=0;const a=JSON.parse(this.store.state.record.a_steps),o=JSON.parse(this.store.state.record.b_steps),[l,r]=this.players,n=setInterval((()=>{e>=a.length&&t>=o.length?clearInterval(n):(e<a.length&&s%2===0?(l.set_chess(a[e].x,a[e].y),e++):t<o.length&&s%2===1&&(r.set_chess(o[t].x,o[t].y),t++),s++)}),500)}}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}update(){this.update_size(),this.render()}pre_judge(e,t){return!(e<1||e>this.rows-1||t<1||t>this.cols-1)}pushChess(e){this.chesses.push(e),this.map[10*e.r+e.c]=e.color}judgeRobot(){return this.store.state.user.id==this.store.state.pk.a_id?!!this.store.state.pk.a_is_robot:!!this.store.state.pk.b_is_robot}render(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)this.ctx.fillStyle="rgb(249,215,87)",this.ctx.fillRect(t*this.L,e*this.L,this.L,this.L),e>=1&&t>=1&&e<this.rows-1&&t<this.cols-1&&(this.ctx.strokeStyle="black",this.ctx.strokeRect(t*this.L,e*this.L,this.L,this.L));for(let e=0;e<this.points.length;e++)this.ctx.fillStyle="black",this.ctx.beginPath(),this.ctx.arc(this.points[e].x*this.L,this.points[e].y*this.L,.1*this.L,0,2*Math.PI),this.ctx.fill();null!==this.currentChess&&this.canvasUtils.drawAngle(this.ctx,this.currentChess.r*this.L-this.L/2,this.currentChess.c*this.L-this.L/2,this.L,this.L,.2*this.L,"rgba(255, 255, 255, 0)","red")}}class $t extends zt{constructor(e,t){super(),this.gamemap=e,this.color=t.color,this.r=t.r,this.c=t.c}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.beginPath(),t.arc(this.r*e+e/2,this.c*e+e/2,.3*e,0,2*Math.PI),t.fill()}}class Lt extends zt{constructor(e,t,s){super(),this.gamemap=e,this.id=t,this.color=s,this.floatR=-1,this.floatC=-1,this.isClick=!1}start(){this.add_listening_events()}update(){this.render()}add_listening_events(){this.gamemap.ctx.canvas.addEventListener("click",(e=>{if(this.gamemap.store.state.pk.firstMove!==this.id)return;const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L,o=Math.floor(s),l=Math.floor(a);if(this.gamemap.map[10*o+l])return;let r=this.gamemap.adviseChesses.some((e=>e.r===o&&e.c===l));r&&this.gamemap.store.state.pk.socket.send(JSON.stringify({event:"next_round",x:o,y:l}))})),this.gamemap.ctx.canvas.addEventListener("mousemove",(e=>{const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L;this.floatR=Math.floor(s),this.floatC=Math.floor(a)})),this.gamemap.ctx.canvas.addEventListener("mousedown",(()=>{this.isClick=!0})),this.gamemap.ctx.canvas.addEventListener("mouseup",(()=>{this.isClick=!1})),this.gamemap.ctx.canvas.addEventListener("mouseout",(()=>{this.floatR=-1,this.floatC=-1}))}set_chess(e,t){let s=new $t(this.gamemap,{color:this.color,r:e,c:t});this.gamemap.pushChess(s),this.gamemap.process(s),this.gamemap.calcChessCnt()}render(){if(this.gamemap.store.state.pk.firstMove===this.id&&this.id===this.gamemap.store.state.user.id&&"none"===this.gamemap.store.state.pk.loser&&this.floatR>=0&&this.floatR<this.gamemap.rows&&this.floatC>=0&&this.floatC<this.gamemap.cols&&!this.gamemap.map[10*this.floatR+this.floatC]&&this.gamemap.adviseChesses.some((e=>e.r===this.floatR&&e.c===this.floatC))&&!this.gamemap.judgeRobot()){const e=this.gamemap.L,t=this.gamemap.ctx;this.gamemap.canvasUtils.drawRoundedRectangle(t,this.floatR*e,this.floatC*e,e,e,.2*e,"#1F1F1F","gray"),t.fillStyle=this.color,t.beginPath();let s=.31*e;this.isClick&&(s=.28*e),t.arc(this.floatR*e+e/2,this.floatC*e+e/2,s,0,2*Math.PI),t.fill()}}}class Rt extends zt{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.rows=8,this.cols=8,this.canvasUtils=new Bt,this.chesses=[],this.map={},this.adviseChesses=[],this.currentChess=null,this.isShowTips=!1,this.tipString="",this.aCnt=2,this.bCnt=2}start(){if(this.players=[new Lt(this,this.store.state.pk.a_id,"white"),new Lt(this,this.store.state.pk.b_id,"black")],this.pushChess(new $t(this,{color:"white",r:3,c:3})),this.pushChess(new $t(this,{color:"white",r:4,c:4})),this.pushChess(new $t(this,{color:"black",r:3,c:4})),this.pushChess(new $t(this,{color:"black",r:4,c:3})),this.dx=[-1,-1,-1,0,1,1,1,0],this.dy=[-1,0,1,1,1,0,-1,-1],this.store.state.record.is_record){let e=2,t=2,s=4;const a=JSON.parse(this.store.state.record.a_steps),o=JSON.parse(this.store.state.record.b_steps),[l,r]=this.players,n=setInterval((()=>{e>=a.length&&t>=o.length?clearInterval(n):(e<a.length&&s%2===0?(l.set_chess(a[e].x,a[e].y),e++):t<o.length&&s%2===1&&(r.set_chess(o[t].x,o[t].y),t++),s++)}),500)}else this.adviseChess("white")}calcChessCnt(){let e=0,t=0;for(let s of this.chesses)"white"===s.color?e++:t++;this.store.commit("updateChessCnt",{aCnt:e,bCnt:t}),this.aCnt=e,this.bCnt=t}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}pushChess(e){this.chesses.push(e),this.map[10*e.r+e.c]=e.color}updateChess(e){this.map[10*e.r+e.c]=e.color;let t=this.chesses.find((t=>t.r===e.r&&t.c===e.c));t.color=e.color}adviseChess(e){this.adviseChesses=[];for(let t of this.chesses)if(t.color===e){let s;s="white"===e?"black":"white";for(let e=0;e<8;e++){let a=this.dx[e]+t.r,o=this.dy[e]+t.c,l=!1;while(a>=0&&a<this.rows&&o>=0&&o<this.cols&&this.map[10*a+o]===s)a=this.dx[e]+a,o=this.dy[e]+o,l=!0;if(l&&a>=0&&a<this.rows&&o>=0&&o<this.cols&&!this.map[10*a+o]){let e={r:a,c:o};if(this.adviseChesses[e])continue;this.adviseChesses.push(e)}}}0===this.adviseChesses.length&&(this.isShowTips=!0,this.store.state.pk.firstMove===this.store.state.pk.a_id&&0===this.aCnt||this.store.state.pk.firstMove===this.store.state.pk.b_id&&0===this.bCnt?this.tipString="无棋可下，游戏结束":(this.tipString="无棋可下，跳过回合",this.store.state.pk.socket.send(JSON.stringify({event:"toggle_round"}))),setTimeout((()=>{this.isShowTips=!1,this.tipString=""}),3e3))}process(e){let t;t="white"===e.color?"black":"white";for(let s=0;s<8;s++){let a=e.r+this.dx[s],o=e.c+this.dy[s],l=!1;while(a>=0&&a<this.rows&&o>=0&&o<this.cols&&this.map[10*a+o]===t)l=!0,a=this.dx[s]+a,o=this.dy[s]+o;if(l&&a>=0&&a<this.rows&&o>=0&&o<this.cols&&this.map[10*a+o]===e.color){let t=e.r+this.dx[s],l=e.c+this.dy[s];while(t!==a||l!==o)this.updateChess({r:t,c:l,color:e.color}),t=this.dx[s]+t,l=this.dy[s]+l}}}judgeRobot(){return this.store.state.user.id==this.store.state.pk.a_id?!!this.store.state.pk.a_is_robot:!!this.store.state.pk.b_is_robot}update(){this.update_size(),this.render()}render(){const e=this.L,t=this.ctx,s="#404040",a="#575757";for(let o=0;o<this.rows;o++)for(let l=0;l<this.cols;l++)this.canvasUtils.drawRoundedRectangle(t,l*e,o*e,e,e,.2*e,(o+l)%2==0?a:s,"gray");if(this.store.state.pk.firstMove===this.store.state.user.id&&"none"===this.store.state.pk.loser&&!this.judgeRobot())for(let o of this.adviseChesses)t.fillStyle=this.store.state.pk.firstMove===this.store.state.pk.a_id?"white":"black",this.canvasUtils.drawDottedCircle(t,o.r*e+e/2,o.c*e+e/2,.31*e,.01*e,"red",.03*e),t.beginPath(),t.arc(o.r*e+e/2,o.c*e+e/2,.3*e,0,2*Math.PI),t.fill();this.isShowTips&&this.canvasUtils.drawRoundedRectangle(t,50,this.ctx.canvas.width/2,200,40,5,"rgba(50, 50, 50, 0.5)","#666666","#333333",this.tipString)}}var Tt={name:"GameMap",components:{ResultBoard:Wt},props:{game:{type:Number,required:!0}},setup(e){const t=(0,q.oR)();let s=(0,Ke.iH)(null),a=(0,Ke.iH)(null);return(0,o.bv)((()=>{t.commit("updateGameResult",{loser:"none",status:"none"}),2===e.game?t.commit("updateGameObject",new Mt(a.value.getContext("2d"),s.value,t)):1===e.game?t.commit("updateGameObject",new Ot(a.value.getContext("2d"),s.value,t)):3===e.game&&t.commit("updateGameObject",new Rt(a.value.getContext("2d"),s.value,t))})),{parent:s,canvas:a}}};const Nt=(0,Ct.Z)(Tt,[["render",Ye],["__scopeId","data-v-41e665e8"]]);var Ht=Nt,Ft={name:"PlayGround",components:{GameMap:Ht},props:{game:{type:String,required:!0},flag:{type:String,required:!0}},setup(){const e=(0,q.oR)();(0,o.Ah)((()=>{e.commit("updateCanSendMsg",!1),e.commit("clearCodeOutMsg"),e.commit("updateDir",-1),e.commit("updateFirstMove",null),e.commit("updateChessCnt",{aCnt:2,bCnt:2})}))}};const Et=(0,Ct.Z)(Ft,[["render",Ze],["__scopeId","data-v-32285b84"]]);var At=Et;const Gt={class:"match-time-text"},Zt=(0,o.Uk)(" 匹配时间： "),Jt={class:"match-time"},Yt={class:"user-photo"},Kt=["src"],Qt={class:"user-username"},Xt={class:"user-photo"},es=["src"],ts={class:"user-username"};function ss(e,t,s,a,r,n){const i=(0,o.up)("el-col"),c=(0,o.up)("el-button"),u=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(u,{style:{"margin-top":"20px","user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:6,offset:9},{default:(0,o.w5)((()=>[(0,o._)("div",Gt,[Zt,(0,o._)("span",Jt,(0,l.zw)(e.$store.state.utils.matchTime)+"s",1)])])),_:1}),(0,o.Wm)(i,{span:9,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",Yt,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,Kt)]),(0,o._)("div",Qt,(0,l.zw)(e.$store.state.user.username),1)])),_:1}),(0,o.Wm)(i,{span:9,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",Xt,[(0,o._)("img",{src:e.$store.state.pk.opponent_photo,alt:""},null,8,es)]),(0,o._)("div",ts,(0,l.zw)(e.$store.state.pk.opponent_username),1)])),_:1}),(0,o.Wm)(i,{span:2,offset:11,style:{"margin-top":"30px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{round:"",class:"match_btn",onClick:a.click_match},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(a.match_btn_info),1)])),_:1},8,["onClick"])])),_:1})])),_:1})}var as={name:"MatchGround",props:{operate:{type:Number,required:!0},botId:{type:Number,required:!0}},setup(e){const t=(0,q.oR)();let s=(0,Ke.iH)("开始匹配");const a=()=>{"开始匹配"===s.value?(s.value="取消匹配",t.state.pk.socket.send(JSON.stringify({event:"start_match",username:t.state.user.username,photo:t.state.user.photo,operate:e.operate,botId:e.botId})),t.commit("updateIsMatch",!0),t.commit("clearMatchTime",0)):(s.value="开始匹配",t.state.pk.socket.send(JSON.stringify({event:"stop_match",username:t.state.user.username,photo:t.state.user.photo,operate:e.operate,botId:e.botId})),t.commit("updateIsMatch",!1),t.commit("clearMatchTime",0))};return{match_btn_info:s,click_match:a}}};const os=(0,Ct.Z)(as,[["render",ss],["__scopeId","data-v-24a8e127"]]);var ls=os,rs=s(7178);class ns extends zt{constructor(e){super(),this.store=e,this.matchTime=0,this.verifyCodeTime=300}initMatchTime(){this.matchTime=0}initVerifyCodeTime(){this.verifyCodeTime=3e5}update(){this.store.state.utils.isMatch&&(this.matchTime+=this.timedelta,parseInt(this.matchTime/1e3)!==this.store.state.utils.matchTime&&this.store.commit("updateMatchTime",parseInt(this.matchTime/1e3))),this.store.state.utils.showVerifyCode&&(this.verifyCodeTime-=this.timedelta,parseInt(this.verifyCodeTime/1e3)!==this.store.state.utils.verifyCodeTime&&(this.store.commit("updateVerifyCodeTime",parseInt(this.verifyCodeTime/1e3)),this.verifyCodeTime/1e3<=0&&this.store.commit("updateShowVerifyCode",!1)))}}var is={name:"PkIndexView",components:{PlayGround:At,MatchGround:ls},setup(){const e=(0,j.yj)(),t=(0,q.oR)(),s=parseInt(e.params.game),a=parseInt(e.query.operate),l=e.query.bot_id;let r="",n=(0,Ke.iH)("");t.commit("updateGameResult",{loser:"none",status:"none"}),t.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),t.commit("updateIsRecord",!1);let i=null;1===s?((0,o.bv)((()=>{r="wss://aigame.zzqahm.top/wss/multiplayer/gobang/?token="+t.state.user.access,t.commit("updateMatchTime",0),t.commit("clearMsg"),i=new WebSocket(r),null===t.state.utils.gameUtils&&t.commit("updateGameUtils",new ns(t)),i.onopen=()=>{console.log("connected!"),t.commit("updateSocket",i)},i.onmessage=e=>{const s=JSON.parse(e.data);if(s.username!==t.state.user.username)if("pk_message"===s.event)t.commit("pushMsg",s.msg);else if("start_game"===s.event)t.commit("updateOpponent",{username:s.username,photo:s.photo}),t.commit("updateChessGame",s.game),t.commit("updateCanSendMsg",!0),t.commit("updateIsMatch",!1),setTimeout((()=>{t.commit("updateStatus","playing"),t.commit("clearMatchTime",0)}),2e3);else if("result"===s.event){t.commit("updateGameResult",{loser:s.loser,status:s.status});let e=parseInt(s["round"]);e===t.state.pk.a_id?(t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.b_id)):e===t.state.pk.b_id&&(t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.a_id)),t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt,recordCnt:t.state.user.recordCnt+1,freshNewsCnt:t.state.user.freshNewsCnt,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone})}else if("nextRound"===s.event){let e=parseInt(s["round"]);e===t.state.pk.a_id?(t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.b_id)):e===t.state.pk.b_id&&(t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.a_id))}else"prompt"===s.event&&(0,rs.z8)(s.prompt)},i.onclose=()=>{console.log("disconnected!")}})),(0,o.Ah)((()=>{i.close(),t.commit("updateStatus","matching"),t.commit("updateCanSendMsg",!1)}))):2===s?((0,o.bv)((()=>{r="wss://aigame.zzqahm.top/wss/multiplayer/snake/?token="+t.state.user.access,t.commit("updateMatchTime",0),t.commit("clearMsg"),i=new WebSocket(r),null===t.state.utils.gameUtils&&t.commit("updateGameUtils",new ns(t)),i.onopen=()=>{console.log("connected!"),t.commit("updateSocket",i)};const e=e=>(e<=1?e+=2:e-=2,e);i.onmessage=s=>{const a=JSON.parse(s.data);if(a.username!==t.state.user.username)if("start_game"===a.event)t.commit("updateOpponent",{username:a.username,photo:a.photo}),t.commit("updateSnakeGame",a.game),t.commit("updateCanSendMsg",!0),t.commit("updateIsMatch",!1),setTimeout((()=>{t.commit("updateStatus","playing"),t.commit("clearMatchTime",0)}),2e3);else if("move"===a.event){const s=t.state.pk.gameObject,[o,l]=s.snakes;t.state.user.id===t.state.pk.a_id?(t.commit("updateDir",a.a_direction),o.set_direction(a.a_direction),l.set_direction(a.b_direction)):(t.commit("updateDir",e(a.b_direction)),o.set_direction(e(a.b_direction)),l.set_direction(e(a.a_direction)))}else if("result"===a.event){const e=t.state.pk.gameObject,[s,o]=e.snakes;"all"===a.loser?(s.status="die",o.status="die"):"A"===a.loser&&t.state.user.id===t.state.pk.a_id||"B"===a.loser&&t.state.user.id===t.state.pk.b_id?s.status="die":("A"===a.loser&&t.state.user.id===t.state.pk.b_id||"B"===a.loser&&t.state.user.id===t.state.pk.a_id)&&(o.status="die"),t.commit("updateGameResult",{loser:a.loser,status:a.status}),t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt,recordCnt:t.state.user.recordCnt+1,freshNewsCnt:t.state.user.freshNewsCnt,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone})}else"pk_message"===a.event?t.commit("pushMsg",a.msg):"prompt"===a.event&&(0,rs.z8)(a.prompt)},i.onclose=()=>{console.log("disconnected!")}})),(0,o.Ah)((()=>{i.close(),t.commit("updateStatus","matching"),t.commit("updateCanSendMsg",!1)}))):3===s&&((0,o.bv)((()=>{r="wss://aigame.zzqahm.top/wss/multiplayer/reversi/?token="+t.state.user.access,t.commit("updateMatchTime",0),t.commit("clearMsg"),i=new WebSocket(r),null===t.state.utils.gameUtils&&t.commit("updateGameUtils",new ns(t)),i.onopen=()=>{console.log("connected!"),t.commit("updateSocket",i)},i.onmessage=e=>{const s=JSON.parse(e.data);if(s.username!==t.state.user.username)if("pk_message"===s.event)t.commit("pushMsg",s.msg);else if("start_game"===s.event)t.commit("updateOpponent",{username:s.username,photo:s.photo}),t.commit("updateChessGame",s.game),t.commit("updateCanSendMsg",!0),t.commit("updateIsMatch",!1),setTimeout((()=>{t.commit("updateStatus","playing"),t.commit("clearMatchTime",0)}),2e3);else if("result"===s.event){t.commit("updateGameResult",{loser:s.loser,status:s.status});let e=parseInt(s["round"]);e===t.state.pk.a_id?t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])):e===t.state.pk.b_id&&t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt,recordCnt:t.state.user.recordCnt+1,freshNewsCnt:t.state.user.freshNewsCnt,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone})}else if("nextRound"===s.event){let e=parseInt(s["round"]);e===t.state.pk.a_id?(t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.state.pk.gameObject.adviseChess("black"),t.commit("updateFirstMove",t.state.pk.b_id)):e===t.state.pk.b_id&&(t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.state.pk.gameObject.adviseChess("white"),t.commit("updateFirstMove",t.state.pk.a_id))}else"toggleRound"===s.event?setTimeout((()=>{t.commit("updateFirstMove",t.state.pk.firstMove===t.state.pk.a_id?t.state.pk.b_id:t.state.pk.a_id)}),600):"prompt"===s.event&&(0,rs.z8)(s.prompt)},i.onclose=()=>{console.log("disconnected!")}})),(0,o.Ah)((()=>{i.close(),t.commit("updateStatus","matching"),t.commit("updateCanSendMsg",!1)})));const c=()=>{t.state.pk.canSendMsg&&""!==n.value&&""!==n.value.trim()&&(t.commit("updateCanSendMsg",!1),setTimeout((()=>{t.commit("updateCanSendMsg",!0)}),1500),t.state.pk.socket.send(JSON.stringify({event:"pk_message",username:t.state.user.username,photo:t.state.user.photo,text:n.value})),n.value="")},u=e=>{e.preventDefault(),c()};return{game:s,operate:a,botId:l,message:n,sendMsg:c,enterSendMsg:u}}};const cs=(0,Ct.Z)(is,[["render",$],["__scopeId","data-v-71a76377"]]);var us=cs;const ds=e=>((0,o.dD)("data-v-04399fca"),e=e(),(0,o.Cn)(),e),ps={class:"card-header"},ms=ds((()=>(0,o._)("span",{class:"ranklist-title"},"天梯分排行榜",-1))),hs=(0,o.Uk)("我"),gs={class:"player-container"},ws=["onClick"],_s={class:"player-card-username"},fs={class:"ranklist-username"},ks={key:0,style:{height:"15px","margin-left":"5px"}};function ys(e,t,s,a,r,n){const i=(0,o.up)("el-button"),c=(0,o.up)("el-table-column"),u=(0,o.up)("el-avatar"),d=(0,o.up)("Back"),p=(0,o.up)("el-icon"),m=(0,o.up)("el-table"),h=(0,o.up)("el-card"),g=(0,o.up)("el-pagination"),w=(0,o.up)("el-col"),_=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(_,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{span:14,offset:5},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{"margin-top":"25px","user-select":"none"}},{header:(0,o.w5)((()=>[(0,o._)("div",ps,[ms,(0,o.Wm)(i,{style:{float:"right"},type:"primary",onClick:a.findme},{default:(0,o.w5)((()=>[hs])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(m,{data:a.players,style:{width:"100%"},"highlight-current-row":"","max-height":"720","table-layout":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{label:"rank",align:"center",prop:"rank",width:"140"}),(0,o.Wm)(c,{label:"玩家",align:"center"},{default:(0,o.w5)((t=>[(0,o._)("div",gs,[(0,o._)("div",{class:"player-card",onClick:e=>a.enterPlayerSpace(t.row.id)},[(0,o.Wm)(u,{shape:"square",size:"small",src:t.row.photo,style:{"margin-left":"10px"}},null,8,["src"]),(0,o._)("span",_s,[(0,o._)("span",fs,(0,l.zw)(t.row.username),1)])],8,ws),a.is_find&&e.$store.state.user.username===t.row.username?((0,o.wg)(),(0,o.iD)("span",ks,[(0,o.Wm)(p,{size:15},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})])):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(c,{prop:"rating",label:"游戏",align:"center"})])),_:1},8,["data"])])),_:1}),(0,o.Wm)(g,{class:"player-pagination",background:"",layout:"total, prev, pager, next, jumper",total:a.total_players,"page-size":10,"current-page":a.current_page,"onUpdate:current-page":t[0]||(t[0]=e=>a.current_page=e),"pager-count":"5",onCurrentChange:a.pull_players},null,8,["total","current-page","onCurrentChange"]),(0,o.Uk)(" "+(0,l.zw)(a.current_page),1)])),_:1})])),_:1})}var vs=s(7387),bs=s.n(vs),Cs={name:"RankListIndexView",setup(){const e=(0,q.oR)();let t=(0,Ke.iH)([]),s=(0,Ke.iH)(0),a=(0,Ke.iH)(!1),l=(0,Ke.iH)(1);const r=a=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/getranklist/",type:"get",data:{page:a},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(t.value=JSON.parse(e.players),s.value=e.players_count)},error(){e.dispatch("logout")}})};(0,o.bv)((()=>{r(1)}));const n=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/getplayerpage/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(l.value=e.page,r(l.value),a.value=!0)},error(){e.dispatch("logout")}})},i=e=>{tc.push({name:"myspace_index",params:{userId:e}})};return{players:t,total_players:s,pull_players:r,findme:n,is_find:a,current_page:l,enterPlayerSpace:i}}};const xs=(0,Ct.Z)(Cs,[["render",ys],["__scopeId","data-v-04399fca"]]);var Ws=xs;const Ss=e=>((0,o.dD)("data-v-e7a46d4c"),e=e(),(0,o.Cn)(),e),zs=["src"],Is={class:"card-header",style:{height:"32px"}},Us=Ss((()=>(0,o._)("span",{style:{"line-height":"32px"}},"最新对局",-1))),Vs=(0,o.Uk)(" 创建游戏 "),qs=(0,o.Uk)("代码"),js=(0,o.Uk)("亲自出马"),Ms=Ss((()=>(0,o._)("div",{class:"popover-code-title",style:{"user-select":"none"}},"查看代码",-1))),Ds={class:"popover-content",style:{width:"250px"}},Ps={class:"dialog-footer"},Bs=(0,o.Uk)("进入游戏 "),Os=(0,o.Uk)("取消"),$s=Ss((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"公共聊天区")],-1))),Ls={class:"username"},Rs={class:"main"},Ts=(0,o.Uk)("发送"),Ns={class:"card-header"},Hs={class:"el-dropdown-link"},Fs=(0,o.Uk)("网站注册及访问量图"),Es=(0,o.Uk)("语言熟练度图"),As=Ss((()=>(0,o._)("div",{id:"myEcharts",style:{height:"360px"}},null,-1)));function Gs(e,t,s,r,n,i){const c=(0,o.up)("el-carousel-item"),u=(0,o.up)("el-carousel"),d=(0,o.up)("el-col"),p=(0,o.up)("el-button"),m=(0,o.up)("el-radio-button"),h=(0,o.up)("el-radio-group"),g=(0,o.up)("el-form-item"),w=(0,o.up)("el-option"),_=(0,o.up)("el-select"),f=(0,o.up)("ZoomIn"),k=(0,o.up)("el-icon"),y=(0,o.up)("el-scrollbar"),v=(0,o.up)("el-popover"),b=(0,o.up)("el-form"),C=(0,o.up)("el-dialog"),x=(0,o.up)("el-card"),W=(0,o.up)("RecordList"),S=(0,o.up)("el-avatar"),z=(0,o.up)("el-input"),I=(0,o.up)("ArrowDownBold"),U=(0,o.up)("el-dropdown-item"),V=(0,o.up)("el-dropdown-menu"),q=(0,o.up)("el-dropdown"),j=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(j,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{span:20,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"indicator-position":"outside",height:"200px",type:"card"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.images,(e=>((0,o.wg)(),(0,o.j4)(c,{key:e.id},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.url,class:"carousel-image-type"},null,8,zs)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,o.Wm)(d,{span:14,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"box-card",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o._)("div",Is,[Us,(0,o.Wm)(p,{class:"button",type:"primary",style:{float:"right"},onClick:t[0]||(t[0]=e=>r.showCreateGameDialog=!0)},{default:(0,o.w5)((()=>[Vs])),_:1}),(0,o.Wm)(C,{modelValue:r.showCreateGameDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>r.showCreateGameDialog=e),title:"新建游戏"},{footer:(0,o.w5)((()=>[(0,o._)("span",Ps,[(0,o.Wm)(p,{type:"primary",onClick:t[4]||(t[4]=e=>r.confirmGameDialog(r.createGameInfo.gameSelect))},{default:(0,o.w5)((()=>[Bs])),_:1}),(0,o.Wm)(p,{onClick:t[5]||(t[5]=e=>r.showCreateGameDialog=!1)},{default:(0,o.w5)((()=>[Os])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(b,{"label-position":"top","label-width":"100px",model:r.createGameInfo,rules:r.rules,style:{"max-width":"100%"},ref:"createGameForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"操作方式"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:r.createGameInfo.operateSelect,"onUpdate:modelValue":t[1]||(t[1]=e=>r.createGameInfo.operateSelect=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{label:"0"},{default:(0,o.w5)((()=>[qs])),_:1}),(0,o.Wm)(m,{label:"1"},{default:(0,o.w5)((()=>[js])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(g,{label:"游戏"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:r.createGameInfo.gameSelect,"onUpdate:modelValue":t[2]||(t[2]=e=>r.createGameInfo.gameSelect=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.games,(e=>((0,o.wg)(),(0,o.j4)(m,{key:e.id,label:e.id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),0===parseInt(r.createGameInfo.operateSelect)?((0,o.wg)(),(0,o.j4)(g,{key:0,label:"选择Bot",prop:"botSelect"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{modelValue:r.createGameInfo.botSelect,"onUpdate:modelValue":t[3]||(t[3]=e=>r.createGameInfo.botSelect=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.bots,(e=>((0,o.wg)(),(0,o.j4)(w,{key:e.id,label:e.title,value:e.id,onClick:t=>r.selectBotCode(e)},null,8,["label","value","onClick"])))),128))])),_:1},8,["modelValue"]),r.createGameInfo.botSelect?((0,o.wg)(),(0,o.j4)(v,{key:0,placement:"right",width:270,trigger:"click"},{reference:(0,o.w5)((()=>[(0,o.Wm)(k,{size:15,class:"zoom"},{default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})])),default:(0,o.w5)((()=>[Ms,(0,o.Wm)(y,{height:"300px"},{default:(0,o.w5)((()=>[(0,o._)("pre",Ds,(0,l.zw)(r.botContent),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(W,{recordListUrl:"https://aigame.zzqahm.top/backend/record/getlist/"})])),_:1}),(0,o.Wm)(d,{span:5,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"message-card",style:{"user-select":"none"}},{header:(0,o.w5)((()=>[$s])),default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"message-body",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{"max-height":"250px"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.record.hall_msgs,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"message-content",key:t.id},[(0,o._)("div",Ls,(0,l.zw)(t.username),1),(0,o._)("div",Rs,[(0,o.Wm)(S,{class:"photo info-scale",size:"small",src:t.photo,onClick:e=>r.enterPlayerSpace(t.userId)},null,8,["src","onClick"]),(0,o.Wm)(p,{round:"",type:e.$store.state.user.username===t.username?"primary":""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t.text),1)])),_:2},1032,["type"])])])))),128))])),_:1})])),_:1}),(0,o.Wm)(x,{class:"message-send",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{onSubmit:t[8]||(t[8]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"message-input",type:"textarea",placeholder:"Please input message...",modelValue:r.message,"onUpdate:modelValue":t[7]||(t[7]=e=>r.message=e),resize:"none",onKeydown:(0,a.D2)(r.enterSendMsg,["enter"])},null,8,["modelValue","onKeydown"]),(0,o.Wm)(p,{class:"sendBtn",type:"primary",onClick:r.sendMsg,size:"small"},{default:(0,o.w5)((()=>[Ts])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(x,{class:"box-card",style:{"margin-top":"40px"}},{header:(0,o.w5)((()=>[(0,o._)("div",Ns,[(0,o._)("span",null,(0,l.zw)(r.chartTitle),1),(0,o.Wm)(q,{style:{float:"right"}},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(U,{onClick:t[9]||(t[9]=e=>r.selectChart(0))},{default:(0,o.w5)((()=>[Fs])),_:1}),(0,o.Wm)(U,{onClick:t[10]||(t[10]=e=>r.selectChart(1))},{default:(0,o.w5)((()=>[Es])),_:1})])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",Hs,[(0,o.Wm)(p,{text:"",style:{float:"right"}},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{style:{"vertical-align":"middle"}},{default:(0,o.w5)((()=>[(0,o.Wm)(I)])),_:1})])),_:1})])])),_:1})])])),default:(0,o.w5)((()=>[As])),_:1})])),_:1})])),_:1})}const Zs=e=>((0,o.dD)("data-v-120959cb"),e=e(),(0,o.Cn)(),e),Js={class:"player-container"},Ys=["onClick"],Ks={class:"player-card-username"},Qs={class:"records-username"},Xs={key:0,class:"player-result",style:{color:"#0099CC"}},ea={key:1,class:"player-result",style:{color:"#FF0000"}},ta={key:2,class:"player-result",style:{color:"#0099CC"}},sa=Zs((()=>(0,o._)("span",{class:"player-desb"}," VS ",-1))),aa=["onClick"],oa={class:"player-card-username"},la={class:"records-username"},ra={key:0,class:"player-result",style:{color:"#ff0000"}},na={key:1,class:"player-result",style:{color:"#0099CC"}},ia={key:2,class:"player-result",style:{color:"#0099CC"}},ca=(0,o.Uk)("查看录像"),ua={key:1},da=Zs((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"赶快开始一场游戏叭，我在游戏场等你哦!~")],-1)));function pa(e,t,s,a,r,n){const i=(0,o.up)("el-table-column"),c=(0,o.up)("el-avatar"),u=(0,o.up)("el-button"),d=(0,o.up)("el-table"),p=(0,o.up)("el-card"),m=(0,o.up)("el-pagination");return(0,o.wg)(),(0,o.iD)(o.HY,null,[a.records.length>0?((0,o.wg)(),(0,o.j4)(p,{key:0,style:{"margin-top":"25px","user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{data:a.records,style:{width:"100%"},"highlight-current-row":"","max-height":"720","table-layout":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{prop:"createtime",align:"center",label:"对局时间"}),(0,o.Wm)(i,{prop:"game",label:"游戏",align:"center",width:"190"}),(0,o.Wm)(i,{label:"玩家",align:"center",width:"250"},{default:(0,o.w5)((e=>[(0,o._)("div",Js,[(0,o._)("div",{class:"player-card",onClick:t=>a.enterPlayerSpace(e.row.a_id)},[(0,o.Wm)(c,{shape:"square",size:"small",src:e.row.a_photo},null,8,["src"]),(0,o._)("span",Ks,[(0,o._)("span",Qs,(0,l.zw)(e.row.a_username),1)]),"B"===e.row.result?((0,o.wg)(),(0,o.iD)("span",Xs," +5 ")):"A"===e.row.result?((0,o.wg)(),(0,o.iD)("span",ea," -2 ")):"all"===e.row.result?((0,o.wg)(),(0,o.iD)("span",ta," +0 ")):(0,o.kq)("",!0)],8,Ys),sa,(0,o._)("div",{class:"player-card",onClick:t=>a.enterPlayerSpace(e.row.b_id)},[(0,o.Wm)(c,{shape:"square",size:"small",src:e.row.b_photo},null,8,["src"]),(0,o._)("span",oa,[(0,o._)("span",la,(0,l.zw)(e.row.b_username),1)]),"B"===e.row.result?((0,o.wg)(),(0,o.iD)("span",ra," -2 ")):"A"===e.row.result?((0,o.wg)(),(0,o.iD)("span",na," +5 ")):"all"===e.row.result?((0,o.wg)(),(0,o.iD)("span",ia," +0 ")):(0,o.kq)("",!0)],8,aa)])])),_:1}),(0,o.Wm)(i,{fixed:"right",label:"Operations",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(u,{onClick:t=>a.see_record(e.row.id),color:"#6666CC"},{default:(0,o.w5)((()=>[ca])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})):0==a.records.length?((0,o.wg)(),(0,o.iD)("div",ua,[(0,o.Wm)(p,{class:"box-card",style:{"margin-top":"20px"}},{default:(0,o.w5)((()=>[da])),_:1})])):(0,o.kq)("",!0),(0,o.Wm)(m,{class:"record-pagination",background:"",layout:"total, prev, pager, next, jumper",total:a.total_records,"page-size":10,"pager-count":"5",onCurrentChange:a.pull_records},null,8,["total","onCurrentChange"])],64)}var ma={name:"RecordList",props:{recordListUrl:{type:String,required:!0}},setup(e){const t=(0,q.oR)();let s=(0,Ke.iH)([]),a=(0,Ke.iH)(0);const l=o=>{bs().ajax({url:e.recordListUrl,type:"get",data:{page:o},headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result&&(s.value=JSON.parse(e.records),a.value=e.records_count)},error(){t.dispatch("logout")}})};(0,o.bv)((()=>{l(1)}));const r=e=>{let t=[];for(let s=0,a=0;s<13;s++){let s=[];for(let t=0;t<14;t++,a++)"0"===e[a]?s.push(0):s.push(1);t.push(s)}return t},n=e=>{for(const a of s.value)if(a.id===e){t.commit("updateIsRecord",!0),2===a.game_id?t.commit("updateSnakeGame",{map:r(a.map),a_id:a.a_id,b_id:a.b_id}):1!==a.game_id&&3!==a.game_id||t.commit("updateChessGame",{a_id:a.a_id,b_id:a.b_id}),t.commit("updateSteps",{a_steps:a.a_steps,b_steps:a.b_steps}),t.commit("updateRecordLoser",a.result),t.commit("updatePlayerInfo",{a_username:a.a_username,a_photo:a.a_photo,a_language:a.a_language,b_username:a.b_username,b_photo:a.b_photo,b_language:a.b_language}),t.commit("updateIsRobot",{a_is_robot:a.a_is_robot,b_is_robot:a.b_is_robot}),t.commit("updateBackPage","record_index"),tc.push({name:"record_content",params:{recordId:e},query:{game:a.game_id}});break}},i=e=>{tc.push({name:"myspace_index",params:{userId:e}})};return{records:s,see_record:n,total_records:a,pull_records:l,enterPlayerSpace:i}}};const ha=(0,Ct.Z)(ma,[["render",pa],["__scopeId","data-v-120959cb"]]);var ga=ha,wa=s(8194),_a={name:"RecordIndexView",components:{RecordList:ga},setup(){const e=(0,q.oR)();let t=(0,Ke.iH)([]),s=(0,Ke.iH)([]),a=(0,Ke.iH)(null),l=(0,Ke.iH)(!1),r=(0,Ke.qj)({operateSelect:0,gameSelect:1,botSelect:null}),n=(0,Ke.iH)(""),i=(0,Ke.iH)(""),c=null,u=(0,Ke.iH)(""),d=[{tooltip:{trigger:"axis"},legend:{data:["访问量","注册量"]},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"访问量",type:"bar",data:[]},{name:"注册量",type:"bar",data:[]}]},{legend:{data:["熟练度"]},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},radar:{shape:"circle",indicator:[{name:"C++",max:1},{name:"Java",max:1},{name:"Python",max:1}]},series:[{type:"radar",tooltip:{trigger:"item"},data:[{value:[],name:"熟练度"}]}]}];const p=(0,Ke.iH)([{id:1,url:"https://img.zzqahm.top/aigame_platform/avatar/background4.png"},{id:2,url:"https://img.zzqahm.top/aigame_platform/avatar/background3.png"},{id:3,url:"https://img.zzqahm.top/aigame_platform/avatar/background8.jpeg"}]),m=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/game/getlist/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(t.value=e.games)},error(){e.dispatch("logout")}})},h=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/getlist_game/"+r.gameSelect+"/",type:"get",data:{userId:e.state.user.id},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(s.value=e.bots)},error(){e.dispatch("logout")}})};h(),(0,o.YP)((()=>r.gameSelect),(()=>{h(),r.botSelect=null,n.value=""}));const g=e=>{n.value=e.content};(0,o.bv)((()=>{m(),(0,o.Y3)((()=>{c=wa.S1(document.getElementById("myEcharts")),v()}))})),window.onresize=function(){c.resize()},(0,o.Ah)((()=>{c.dispose()}));const w=async t=>{const s=(0,Ke.SU)(a);await s.validate((s=>{s&&(l.value=!1,1==r.operateSelect&&(r.botSelect=-1),e.commit("updateBackPage","record_index"),tc.push({name:"pk_index",params:{game:t},query:{operate:r.operateSelect,bot_id:r.botSelect}}))}))},_=()=>{e.state.record.hall_can_send_msg&&""!==i.value&&""!==i.value.trim()?(e.commit("updateHallCanSendMsg",!1),setTimeout((()=>{e.commit("updateHallCanSendMsg",!0)}),1500),e.state.record.hall_socket.send(JSON.stringify({event:"hall_message",userId:e.state.user.id,username:e.state.user.username,photo:e.state.user.photo,text:i.value})),i.value=""):e.state.record.hall_socket||(e.dispatch("connectHallSocket"),(0,rs.z8)({message:"websocket正在重新连接，请稍后在尝试！",type:"warning"}))},f=e=>{e.preventDefault(),_()},k=e=>{tc.push({name:"myspace_index",params:{userId:e}})},y=e=>{c.clear(),setTimeout((()=>{c.setOption(d[e],!0)}),100),0===e?u.value="网站注册及访问量图":1===e&&(u.value="语言熟练度图")},v=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/getchartdata/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(d[0].xAxis[0].data=e["dates"],d[0].series[0].data=e["login_cnts"],d[0].series[1].data=e["register_cnts"],d[1].series[0].data[0].value=e["lang_skilled"],y(0))},error(){e.dispatch("logout")}})};return{games:t,showCreateGameDialog:l,confirmGameDialog:w,createGameInfo:r,bots:s,selectBotCode:g,botContent:n,createGameForm:a,enterPlayerSpace:k,images:p,selectChart:y,chartTitle:u,rules:{botSelect:[{required:!0,message:"请选择Bot！",trigger:"blur"}]},message:i,sendMsg:_,enterSendMsg:f}}};const fa=(0,Ct.Z)(_a,[["render",Gs],["__scopeId","data-v-e7a46d4c"]]);var ka=fa;function ya(e,t,s,a,l,r){const n=(0,o.up)("PlayGround"),i=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:14,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{game:a.game,flag:"record"},null,8,["game"])])),_:1}),(0,o.Wm)(i,{span:5,offset:1,style:{"margin-top":"40px"}})])),_:1})}var va={components:{PlayGround:At},setup(){const e=(0,j.yj)(),t=parseInt(e.query.game);return{game:t}}};const ba=(0,Ct.Z)(va,[["render",ya]]);var Ca=ba;function xa(e,t,s,a,l,r){const n=(0,o.up)("ProfileCard"),i=(0,o.up)("el-col"),c=(0,o.up)("FreshNewsList"),u=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(u,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:5,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{info:a.playerInfo},null,8,["info"])])),_:1}),(0,o.Wm)(i,{span:14,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{freshNewsUrl:"https://aigame.zzqahm.top/backend/playervoice/freshnews/getlist/",showPostComment:"true"})])),_:1})])),_:1})}var Wa=s.p+"img/loading.a7e1073b.svg";const Sa=e=>((0,o.dD)("data-v-80968040"),e=e(),(0,o.Cn)(),e),za=Sa((()=>(0,o._)("div",{class:"background"},null,-1))),Ia={class:"content"},Ua={class:"photo"},Va=["src"],qa={key:1,src:Wa,alt:"",style:{"user-select":"none","background-color":"white"}},ja={class:"username"},Ma={class:"profession"},Da=Sa((()=>(0,o._)("span",null,"job：",-1))),Pa={key:0},Ba={class:"description"},Oa=Sa((()=>(0,o._)("span",null,"mood：",-1))),$a={key:0},La={class:"friend-num-container"},Ra={class:"num"},Ta=Sa((()=>(0,o._)("small",{class:"text"},"Bots",-1))),Na=Sa((()=>(0,o._)("div",{class:"vertical-divider"},null,-1))),Ha={class:"num"},Fa=Sa((()=>(0,o._)("small",{class:"text"},"Records",-1))),Ea=Sa((()=>(0,o._)("div",{class:"vertical-divider"},null,-1))),Aa={class:"num"},Ga=Sa((()=>(0,o._)("small",{class:"text"},"Post",-1))),Za=Sa((()=>(0,o._)("div",{class:"horizontal-divider"},null,-1)));function Ja(e,t,s,a,r,n){const i=(0,o.up)("el-col"),c=(0,o.up)("el-row"),u=(0,o.up)("el-card");return(0,o.wg)(),(0,o.j4)(u,{class:"profile-card",shadow:"always"},{default:(0,o.w5)((()=>[za,(0,o._)("div",Ia,[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:6,offset:9},{default:(0,o.w5)((()=>[(0,o._)("div",Ua,[""!==s.info.photo?((0,o.wg)(),(0,o.iD)("img",{key:0,src:s.info.photo,alt:"",class:"",style:{"user-select":"none"}},null,8,Va)):((0,o.wg)(),(0,o.iD)("img",qa))])])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:20,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",ja,(0,l.zw)(s.info.username),1),(0,o._)("div",Ma,[Da,(0,o.Uk)(" "+(0,l.zw)(s.info.job)+" ",1),s.info.job&&""!==s.info.job.trim()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",Pa,"-"))]),(0,o._)("div",Ba,[Oa,(0,o.Uk)(" "+(0,l.zw)(s.info.desp)+" ",1),s.info.desp&&""!==s.info.desp.trim()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",$a,"-"))]),(0,o._)("div",La,[(0,o._)("div",{class:"infoSelect",onClick:t[0]||(t[0]=e=>a.switchPannel("bots"))},[(0,o._)("h6",Ra,(0,l.zw)(s.info.botCnt),1),Ta]),Na,(0,o._)("div",{class:"infoSelect",onClick:t[1]||(t[1]=e=>a.switchPannel("records"))},[(0,o._)("h6",Ha,(0,l.zw)(s.info.recordCnt),1),Fa]),Ea,(0,o._)("div",{class:"infoSelect",onClick:t[2]||(t[2]=e=>a.switchPannel("freshnews"))},[(0,o._)("h6",Aa,(0,l.zw)(s.info.freshNewsCnt),1),Ga])]),Za])),_:1})])),_:1})])])),_:1})}var Ya={name:"ProfileCard",props:{info:{type:Object,required:!0}},setup(e,t){const s=(0,q.oR)(),a=(0,j.yj)(),o=o=>{e.info.id===s.state.user.id||"bots"!==o?("myspace_index"!==a.name&&tc.push({name:"myspace_index",params:{userId:e.info.id}}),t.emit("switchPannel",o)):rs.z8.error("别人的代码不能查看哦!~")};return{switchPannel:o}}};const Ka=(0,Ct.Z)(Ya,[["render",Ja],["__scopeId","data-v-80968040"]]);var Qa=Ka;const Xa=e=>((0,o.dD)("data-v-7607b73c"),e=e(),(0,o.Cn)(),e),eo={class:"post-a-fresh-news"},to={class:"avatar-container"},so={class:"post-container"},ao={class:"post-container-right"},oo=(0,o.Uk)("发送"),lo=["infinite-scroll-disabled"],ro={key:0,class:"forward-desp"},no=(0,o.Uk)(" 转发于 "),io=["onClick"],co=(0,o.Uk)(" 的动态 "),uo=(0,o.Uk)(" 删除 "),po={class:"post-message-container"},mo={class:"post-message"},ho=["onClick"],go={class:"post-content"},wo={class:"post-tools"},_o=["onClick"],fo=Xa((()=>(0,o._)("svg",{t:"1664632066049",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6641",width:"25",height:"25"},[(0,o._)("path",{d:"M513.5 921.6c-38.3 0-87.4-26.1-121.9-48-48.2-30.6-99.4-73.2-144.3-120-67.2-70-179.9-212.1-179.9-376.3 0-66 26.3-134.2 72.2-187.2 23.3-26.9 50.1-48.2 79.7-63.3 32.1-16.4 66-24.8 100.6-24.8 73.4 0 143.3 31.8 191.6 87.1 0.2 0.2 0.6 0.7 1.5 0.7s1.3-0.5 1.5-0.7c48.4-55.4 118.2-87.1 191.6-87.1 34.7 0 68.5 8.4 100.5 24.9 29.6 15.3 56.4 36.8 79.6 64 45.6 53.5 71.7 123.1 71.7 191 0 161.7-112.2 302.7-179.1 372.3-44.7 46.6-95.8 89-143.7 119.5-34.4 21.8-83.4 47.9-121.6 47.9zM319.9 158c-50.6 0-99.6 24.4-138 68.8-18 20.8-32.9 45.4-43 71.2-10.2 26-15.6 53.5-15.6 79.3 0 56.9 16.3 117.1 48.3 178.9 27.8 53.7 67.9 108.6 116 158.6 41.8 43.6 89.4 83.2 133.9 111.5 45.6 29 77.4 39.3 91.9 39.3s46.2-10.3 91.6-39.2c44.3-28.1 91.6-67.6 133.4-111 47.8-49.8 87.7-104.2 115.4-157.3 31.9-61.1 48-120.4 48-176.2 0-54.8-21.3-111.2-58.3-154.7-38-44.6-86.8-69.2-137.5-69.2-57.3 0-111.7 24.8-149.5 68-11 12.6-26.9 19.8-43.6 19.8s-32.6-7.2-43.6-19.8c-37.6-43.2-92.1-68-149.4-68z",fill:"","p-id":"6642"})],-1))),ko={key:0},yo={key:1},vo={key:2},bo=["onClick"],Co=Xa((()=>(0,o._)("svg",{t:"1664631879270",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2557",width:"25",height:"25"},[(0,o._)("path",{d:"M622.56056 464.834794c0 27.928073 22.73684 50.64854 50.664913 50.64854 27.956725 0 50.693566-22.720468 50.693566-50.64854 0-27.928073-22.73684-50.66389-50.693566-50.66389C645.2974 414.171927 622.56056 436.907745 622.56056 464.834794","p-id":"2558"}),(0,o._)("path",{d:"M931.254178 211.459063c0-40.637536-33.05893-73.698512-73.728188-73.698512L166.471964 137.76055c-40.637536 0-73.727165 33.059953-73.727165 73.698512l0 506.796488c0 40.637536 33.088606 73.696466 73.727165 73.696466l251.16846 0 94.343715 94.28641 94.315062-94.28641 251.226788 0c40.669258 0 73.728188-33.05893 73.728188-73.696466l0-82.560344-0.089028-1.282203L931.254178 211.459063zM875.96699 695.220928c0 22.88522-18.558681 41.444924-41.443901 41.444924L579.446623 736.665853l-67.462484 67.490114-67.430762-67.490114L189.506587 736.665853c-22.88522 0-41.4746-18.559705-41.4746-41.444924L148.031986 234.493685c0-22.88522 18.58938-41.488927 41.4746-41.488927l645.01548 0c22.88522 0 41.443901 18.603707 41.443901 41.488927l0 396.579247 0 36.161594L875.965967 695.220928z","p-id":"2559"}),(0,o._)("path",{d:"M461.321272 464.834794c0 27.928073 22.735817 50.64854 50.662867 50.64854 27.929096 0 50.66389-22.720468 50.66389-50.64854 0-27.928073-22.734794-50.66389-50.66389-50.66389C484.057089 414.171927 461.321272 436.907745 461.321272 464.834794","p-id":"2560"}),(0,o._)("path",{d:"M300.083008 464.834794c0 27.928073 22.735817 50.64854 50.66389 50.64854 27.927049 0 50.662867-22.720468 50.662867-50.64854 0-27.928073-22.735817-50.66389-50.662867-50.66389C322.817802 414.171927 300.083008 436.907745 300.083008 464.834794","p-id":"2561"})],-1))),xo=Xa((()=>(0,o._)("span",null,"评论",-1))),Wo=[Co,xo],So=["onClick"],zo=Xa((()=>(0,o._)("svg",{t:"1664632040191",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4832",width:"25",height:"25"},[(0,o._)("path",{d:"M71.9 909.8c-2.2 8.4-12.5 5.9-11.9-2.9 13.1-187 71.1-284.1 128.1-352.8C274.7 449.9 469.8 352.7 604 341.3c10.6-0.9 18.9-11.7 18.9-24.8V157.9c0-21.7 21.1-32.9 34.1-18.2l299.5 339.5c9 10.2 8.6 27.6-0.8 37.2L662 817.6c-13.2 13.5-33.3 2-33.3-19V604.3c0-12.9-8.1-23.7-18.6-24.7-85.7-8.5-287.5 10.3-369.1 70.2-34.8 25.4-129.8 112.4-169.1 260z","p-id":"4833"})],-1))),Io=(0,o.Uk)(" 转发 "),Uo={key:0},Vo={key:2,class:"post-comment"},qo=(0,o.Uk)(" 提交评论 "),jo={class:"avatar"},Mo={class:"right"},Do={class:"info"},Po=["onClick"],Bo={class:"time"},Oo={key:0,class:"reply"},$o=(0,o.Uk)("回复 "),Lo=["onClick"],Ro=(0,o.Uk)(" 的评论"),To=["onClick"],No=["onClick"],Ho={class:"content"},Fo={key:0,class:"post-reply-comment"},Eo=(0,o.Uk)(" 提交评论 "),Ao={key:2},Go=Xa((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"快发布发布你的动态叭!")],-1))),Zo={key:0},Jo=(0,o.Uk)(" 确认删除内容为 "),Yo={class:"content-ellipsis"},Ko=(0,o.Uk)(" 的动态吗? "),Qo={class:"dialog-footer"},Xo=(0,o.Uk)("确认删除 "),el=(0,o.Uk)("取消"),tl={key:0},sl=(0,o.Uk)(" 确认转发内容为 "),al={class:"content-ellipsis"},ol=(0,o.Uk)(" 的动态吗? "),ll={class:"dialog-footer"},rl=(0,o.Uk)("确认转发"),nl=(0,o.Uk)("取消"),il={key:3,class:"desp"},cl={key:4,class:"desp"};function ul(e,t,s,r,n,i){const c=(0,o.up)("el-avatar"),u=(0,o.up)("el-input"),d=(0,o.up)("el-divider"),p=(0,o.up)("el-button"),m=(0,o.up)("el-card"),h=(0,o.up)("el-dialog"),g=(0,o.Q2)("infinite-scroll");return(0,o.wg)(),(0,o.iD)(o.HY,null,[s.showPostComment?((0,o.wg)(),(0,o.j4)(m,{key:0,class:"post-card"},{default:(0,o.w5)((()=>[(0,o._)("div",eo,[(0,o._)("div",to,[(0,o.Wm)(c,{src:e.$store.state.user.photo},null,8,["src"])]),(0,o.Wm)(u,{modelValue:r.input_fresh_news,"onUpdate:modelValue":t[0]||(t[0]=e=>r.input_fresh_news=e),rows:4,class:"input-fresh-news",resize:"none",type:"textarea",placeholder:"Share your thoughts..."},null,8,["modelValue"])]),(0,o.Wm)(d,{style:{"margin-top":"5px","margin-bottom":"0px"}}),(0,o._)("div",so,[(0,o._)("div",ao,[(0,o.Wm)(p,{type:"primary",size:"small",onClick:t[1]||(t[1]=e=>r.postFreshNews(r.input_fresh_news))},{default:(0,o.w5)((()=>[oo])),_:1})])])])),_:1})):(0,o.kq)("",!0),r.freshNews.length>0?(0,o.wy)(((0,o.wg)(),(0,o.iD)("ul",{key:1,"infinite-scroll-disabled":r.isOver,style:{margin:"0",padding:"0","list-style":"none"}},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.freshNews,(s=>((0,o.wg)(),(0,o.iD)("li",{style:{"margin-top":"20px"},key:s.id},[(0,o.Wm)(m,{class:"box-card",style:{position:"relative"}},{default:(0,o.w5)((()=>[-1!==s.forwarded_id?((0,o.wg)(),(0,o.iD)("span",ro,[no,(0,o._)("span",{onClick:e=>r.enterPlayerSpace(s.forwarded_userId)},(0,l.zw)(s.forwarded_username),9,io),co])):(0,o.kq)("",!0),s.userId===e.$store.state.user.id?((0,o.wg)(),(0,o.j4)(p,{key:1,type:"danger",text:"",style:{float:"right",margin:"30px 20px 0 0"},onClick:e=>r.openDeleteDialog(s)},{default:(0,o.w5)((()=>[uo])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o._)("div",po,[(0,o.Wm)(c,{class:"info-scale",src:s.photo,onClick:e=>r.enterPlayerSpace(s.userId)},null,8,["src","onClick"]),(0,o._)("div",mo,[(0,o._)("h6",{class:"info-scale",onClick:e=>r.enterPlayerSpace(s.userId)},(0,l.zw)(s.username),9,ho),(0,o._)("span",null,(0,l.zw)(s.since),1)])]),(0,o._)("pre",go,(0,l.zw)(s.content),1),(0,o.Wm)(d,{style:{"margin-top":"5px","margin-bottom":"0px"}}),(0,o._)("div",wo,[(0,o._)("div",{onClick:e=>r.clickLikeFreshNews(s)},[fo,s.is_like?((0,o.wg)(),(0,o.iD)("span",yo,"取消点赞")):((0,o.wg)(),(0,o.iD)("span",ko,"点赞")),0!==s.likes?((0,o.wg)(),(0,o.iD)("span",vo,"("+(0,l.zw)(s.likes)+")",1)):(0,o.kq)("",!0)],8,_o),(0,o._)("div",{onClick:e=>r.openComment(s.id)},Wo,8,bo),(0,o._)("div",{onClick:e=>r.openForwardDialog(s)},[zo,(0,o._)("span",null,[Io,0!==s.forward_count?((0,o.wg)(),(0,o.iD)("span",Uo,"("+(0,l.zw)(s.forward_count)+")",1)):(0,o.kq)("",!0)])],8,So)]),(0,o.Wm)(d,{style:{"margin-top":"0px","margin-bottom":"5px"}}),r.openCommentId===s.id?((0,o.wg)(),(0,o.iD)("div",Vo,[(0,o.wy)((0,o._)("textarea",{class:(0,l.C_)("post-comment-input"+s.id),placeholder:"Please input","onUpdate:modelValue":t[2]||(t[2]=e=>r.input_comment=e),cols:"40",rows:"2",maxlength:"3000",required:"",title:"回复"},null,2),[[a.nr,r.input_comment]]),(0,o.Wm)(p,{class:"btn",text:"",onClick:e=>r.postFreshNews(r.input_comment,s.id),size:"small"},{default:(0,o.w5)((()=>[qo])),_:2},1032,["onClick"])])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.children,(n=>((0,o.wg)(),(0,o.iD)("div",{key:n.id,class:"post-comments"},[(0,o._)("div",jo,[(0,o.Wm)(c,{size:"small",src:n.photo,class:"info-scale",onClick:e=>r.enterPlayerSpace(n.userId)},null,8,["src","onClick"])]),(0,o._)("div",Mo,[(0,o._)("div",Do,[(0,o._)("h6",{class:"info-scale",onClick:e=>r.enterPlayerSpace(n.userId)},(0,l.zw)(n.username),9,Po),(0,o._)("span",Bo,(0,l.zw)(n.since),1),n.reply!==s.username?((0,o.wg)(),(0,o.iD)("span",Oo,[$o,(0,o._)("a",{class:"info-scale",onClick:e=>r.enterPlayerSpace(n.reply_id)},(0,l.zw)(n.reply),9,Lo),Ro])):(0,o.kq)("",!0),(0,o._)("a",{class:"post-comment-right-reply",onClick:e=>r.openComment(s.id+"-"+n.id)},"回复",8,To),n.userId===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("a",{key:1,class:"post-comment-right-del",onClick:e=>r.openDeleteDialog(n)},"删除",8,No)):(0,o.kq)("",!0)]),(0,o._)("div",Ho,(0,l.zw)(n.content),1),r.openCommentId===s.id+"-"+n.id?((0,o.wg)(),(0,o.iD)("div",Fo,[(0,o.wy)((0,o._)("textarea",{class:(0,l.C_)("post-comment-input"+s.id+"-"+n.id),placeholder:"Please input","onUpdate:modelValue":t[3]||(t[3]=e=>r.input_comment=e),cols:"90",rows:"2",maxlength:"3000",required:"",title:"回复"},null,2),[[a.nr,r.input_comment]]),(0,o.Wm)(p,{class:"btn",text:"",onClick:e=>r.postFreshNews(r.input_comment,n.id),size:"small"},{default:(0,o.w5)((()=>[Eo])),_:2},1032,["onClick"])])):(0,o.kq)("",!0)])])))),128))])),_:2},1024)])))),128))],8,lo)),[[g,r.load]]):0!=r.freshNews.length||r.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Ao,[(0,o.Wm)(m,{class:"box-card",style:{"margin-top":"20px"}},{header:(0,o.w5)((()=>[Go])),_:1})])),(0,o.Wm)(h,{modelValue:r.showDeleteDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>r.showDeleteDialog=e),title:"删除动态",width:"30%"},{footer:(0,o.w5)((()=>[(0,o._)("span",Qo,[(0,o.Wm)(p,{type:"primary",onClick:t[4]||(t[4]=e=>r.removeFreshNews(r.curOpeItem.id,r.curOpeItem.forwarded_id))},{default:(0,o.w5)((()=>[Xo])),_:1}),(0,o.Wm)(p,{onClick:r.cancelDeleteBot},{default:(0,o.w5)((()=>[el])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[r.curOpeItem?((0,o.wg)(),(0,o.iD)("span",Zo,[Jo,(0,o._)("span",Yo,(0,l.zw)(r.curOpeItem.content),1),Ko])):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),(0,o.Wm)(h,{modelValue:r.showForwardDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>r.showForwardDialog=e),title:"转发动态",width:"30%"},{footer:(0,o.w5)((()=>[(0,o._)("span",ll,[(0,o.Wm)(p,{type:"primary",onClick:t[6]||(t[6]=e=>r.forwardFreshNews(r.curOpeItem))},{default:(0,o.w5)((()=>[rl])),_:1}),(0,o.Wm)(p,{onClick:r.cancelForwardBot},{default:(0,o.w5)((()=>[nl])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[r.curOpeItem?((0,o.wg)(),(0,o.iD)("span",tl,[sl,(0,o._)("span",al,(0,l.zw)(r.curOpeItem.content),1),ol])):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),r.loading?((0,o.wg)(),(0,o.iD)("p",il,"加载中...")):(0,o.kq)("",!0),r.isOver?((0,o.wg)(),(0,o.iD)("p",cl,"到底啦!")):(0,o.kq)("",!0)],64)}var dl={name:"FreshNewsList",props:{freshNewsUrl:{type:String,required:!0},showPostComment:{type:Boolean,required:!0}},setup(e){const t=(0,q.oR)();let s=(0,Ke.iH)(""),a=(0,Ke.iH)(""),l=(0,Ke.iH)([]),r=(0,Ke.iH)(-1),n=(0,Ke.iH)(0),i=(0,Ke.iH)(!1),c=(0,Ke.iH)(!1),u=(0,Ke.iH)(!1),d=(0,Ke.iH)(null),p=(0,Ke.iH)(!1);(0,o.bv)((()=>{_()}));const m=s=>{bs().ajax({url:e.freshNewsUrl,type:"get",headers:{Authorization:"Bearer "+t.state.user.access},data:{page:s},success(e){l.value=1==s?e.freshNews:l.value.concat(e.freshNews),s>=e.count/4&&(c.value=!0),i.value=!1,n.value=s},error(){t.dispatch("logout")}})},h=(e,o)=>{""!==e.trim()?e.length>5e3?rs.z8.error("动态不能超过5000个字符！"):bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/post/",headers:{Authorization:"Bearer "+t.state.user.access},type:"post",data:{content:e,parent_id:o},success(e){if("success"===e.result){(0,rs.z8)({showClose:!0,message:"动态发布成功",type:"success"}),_(1),o?a.value="":s.value="",o||t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt,recordCnt:t.state.user.recordCnt,freshNewsCnt:t.state.user.freshNewsCnt+1,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone});let e=document.getElementsByClassName("post-comment-input"+r.value)[0];e.classList.remove("post-comment-input-animation"),r.value=-1}else rs.z8.error(e.result)},error(){t.dispatch("logout")}}):rs.z8.error("不能发布空动态！")},g=e=>{if(a.value="",-1!==r.value){let e=document.getElementsByClassName("post-comment-input"+r.value)[0];e.classList.remove("post-comment-input-animation")}r.value===e?r.value=-1:(r.value=e,setTimeout((()=>{let t=document.getElementsByClassName("post-comment-input"+e)[0];t.classList.add("post-comment-input-animation")}),1))},w=e=>{e.is_like?bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/dellike/",headers:{Authorization:"Bearer "+t.state.user.access},type:"post",data:{freshNewsId:e.id},success(){e.is_like=!1,e.likes-=1},error(){t.dispatch("logout")}}):bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/addlike/",headers:{Authorization:"Bearer "+t.state.user.access},type:"post",data:{freshNewsId:e.id},success(){e.is_like=!0,e.likes+=1},error(){t.dispatch("logout")}})},_=e=>{(!i.value&&!c.value||e)&&(i.value=!0,e?(m(e),c.value=!1):m(n.value+1))},f=e=>{tc.push({name:"myspace_index",params:{userId:e}})},k=(e,s)=>{u.value=!1,d.value=null,bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/remove/",headers:{Authorization:"Bearer "+t.state.user.access},type:"post",data:{freshNewsId:e},success(a){if("success"===a.result){for(let s=0;s<l.value.length;s++){if(l.value[s].id===e){l.value.splice(s,1),t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt,recordCnt:t.state.user.recordCnt,freshNewsCnt:t.state.user.freshNewsCnt-1,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone});break}if(l.value[s].children&&l.value[s].children.length>0)for(let t=0;t<l.value[s].children.length;t++)if(l.value[s].children[t].id===e){l.value[s].children.splice(t,1);break}}if(-1!=s)for(let e=0;e<l.value.length;e++)if(l.value[e].id===s){l.value[e].forward_count-=1;break}(0,rs.z8)({message:"删除成功",type:"success"})}else rs.z8.error(a.result)},error(){t.dispatch("logout")}})},y=e=>{d.value=e,u.value=!0},v=()=>{u.value=!1,d.value=null},b=e=>{let s=-1!==e.forwarded_id?e.forwarded_id:e.id;bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/forward/",headers:{Authorization:"Bearer "+t.state.user.access},type:"post",data:{forwarded_id:s},success(e){"success"===e.result?((0,rs.z8)({message:"转发成功",type:"success"}),_(1),p.value=!1,d.value=null,t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt,recordCnt:t.state.user.recordCnt,freshNewsCnt:t.state.user.freshNewsCnt+1,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone})):rs.z8.error(e.result)},error(){t.dispatch("logout")}})},C=e=>{d.value=e,p.value=!0},x=()=>{p.value=!1,d.value=null};return{input_fresh_news:s,input_comment:a,freshNews:l,postFreshNews:h,openCommentId:r,openComment:g,clickLikeFreshNews:w,load:_,loading:i,isOver:c,enterPlayerSpace:f,removeFreshNews:k,curOpeItem:d,showDeleteDialog:u,openDeleteDialog:y,cancelDeleteBot:v,forwardFreshNews:b,showForwardDialog:p,openForwardDialog:C,cancelForwardBot:x}}};const pl=(0,Ct.Z)(dl,[["render",ul],["__scopeId","data-v-7607b73c"]]);var ml=pl,hl={name:"FreshNewsView",components:{ProfileCard:Qa,FreshNewsList:ml},setup(){const e=(0,q.oR)(),t=(0,Ke.qj)({id:e.state.user.id,username:e.state.user.username,photo:e.state.user.photo,job:e.state.user.job,desp:e.state.user.desp,recordCnt:e.state.user.recordCnt,botCnt:e.state.user.botCnt,freshNewsCnt:e.state.user.freshNewsCnt});return(0,o.m0)((()=>{t.freshNewsCnt=e.state.user.freshNewsCnt})),{playerInfo:t}}};const gl=(0,Ct.Z)(hl,[["render",xa]]);var wl=gl;const _l=(0,o.Uk)(" 留言板 ");function fl(e,t,s,a,l,r){const n=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(n,null,{default:(0,o.w5)((()=>[_l])),_:1})}const kl={class:"content-field"};function yl(e,t,s,a,l,r){const n=(0,o.up)("el-card"),i=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",kl,[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:18,offset:3},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{shadow:"always",class:"card"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3})])}var vl={name:"ContentField"};const bl=(0,Ct.Z)(vl,[["render",yl],["__scopeId","data-v-08e11878"]]);var Cl=bl,xl={name:"MessageBoardView",components:{ContentField:Cl}};const Wl=(0,Ct.Z)(xl,[["render",fl]]);var Sl=Wl;function zl(e,t,s,a,l,r){const n=(0,o.up)("ProfileCard"),i=(0,o.up)("el-col"),c=(0,o.up)("UserBotIndexView"),u=(0,o.up)("el-tab-pane"),d=(0,o.up)("RecordList"),p=(0,o.up)("FreshNewsList"),m=(0,o.up)("el-tabs"),h=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(h,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:5,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{info:a.spacePlayerInfo,onSwitchPannel:a.switchPannel},null,8,["info","onSwitchPannel"])])),_:1}),(0,o.Wm)(i,{span:14,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"tabs",type:"border-card",modelValue:a.pannelName,"onUpdate:modelValue":t[0]||(t[0]=e=>a.pannelName=e)},{default:(0,o.w5)((()=>[e.$store.state.user.id===a.userId?((0,o.wg)(),(0,o.j4)(u,{key:0,label:"Bots",name:"bots"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{userId:a.userId},null,8,["userId"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(u,{label:"录像",name:"records"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{recordListUrl:"https://aigame.zzqahm.top/backend/record/getlist/"+a.userId+"/"},null,8,["recordListUrl"])])),_:1}),(0,o.Wm)(u,{label:"动态",name:"freshnews"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{freshNewsUrl:"https://aigame.zzqahm.top/backend/playervoice/freshnews/getlist/"+a.userId+"/",showPostComment:!1},null,8,["freshNewsUrl"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}const Il=e=>((0,o.dD)("data-v-516c55cf"),e=e(),(0,o.Cn)(),e),Ul={class:"card-header"},Vl={style:{"font-weight":"700","font-size":"18px"}},ql=(0,o.Uk)(" 我的Bot "),jl={key:0},Ml=(0,o.Uk)(" 扩容 "),Dl=(0,o.Uk)("创造Bot"),Pl=(0,o.Uk)("cpp"),Bl=(0,o.Uk)("java"),Ol=(0,o.Uk)("python"),$l=Il((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),Ll={class:"gear"},Rl=(0,o.Uk)("chrome"),Tl=(0,o.Uk)("monokai"),Nl=(0,o.Uk)("Standard"),Hl=(0,o.Uk)("Vim"),Fl=(0,o.Uk)("Emacs"),El=(0,o.Uk)("2"),Al=(0,o.Uk)("4"),Gl=(0,o.Uk)("8"),Zl={class:"card-header"},Jl=Il((()=>(0,o._)("span",null," 代码运行状态： ",-1))),Yl={class:"card-body"},Kl={class:"pannel-body"},Ql=Il((()=>(0,o._)("label",{for:"run-code-stdin",style:{"font-weight":"normal","font-size":"15px"}},"输入",-1))),Xl=Il((()=>(0,o._)("br",null,null,-1))),er={style:{"margin-top":"5px"}},tr=Il((()=>(0,o._)("label",{style:{"font-weight":"normal","font-size":"15px"}},"输出",-1))),sr=Il((()=>(0,o._)("br",null,null,-1))),ar={key:0,style:{"margin-top":"5px"}},or=(0,o.Uk)(" 运行时间： "),lr={class:"dialog-footer"},rr=(0,o.Uk)("调试"),nr=(0,o.Uk)("创建"),ir=(0,o.Uk)("取消"),cr=(0,o.Uk)("修改"),ur=(0,o.Uk)("删除"),dr=(0,o.Uk)("cpp"),pr=(0,o.Uk)("java"),mr=(0,o.Uk)("python"),hr=Il((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),gr={class:"gear"},wr=(0,o.Uk)("chrome"),_r=(0,o.Uk)("monokai"),fr=(0,o.Uk)("Standard"),kr=(0,o.Uk)("Vim"),yr=(0,o.Uk)("Emacs"),vr=(0,o.Uk)("2"),br=(0,o.Uk)("4"),Cr=(0,o.Uk)("8"),xr={class:"card-header"},Wr=Il((()=>(0,o._)("span",null," 代码运行状态： ",-1))),Sr={class:"card-body"},zr={class:"pannel-body"},Ir=Il((()=>(0,o._)("label",{for:"run-code-stdin",style:{"font-weight":"normal","font-size":"15px"}},"输入",-1))),Ur=Il((()=>(0,o._)("br",null,null,-1))),Vr={style:{"margin-top":"5px"}},qr=Il((()=>(0,o._)("label",{style:{"font-weight":"normal","font-size":"15px"}},"输出",-1))),jr=Il((()=>(0,o._)("br",null,null,-1))),Mr={key:0,style:{"margin-top":"5px"}},Dr=(0,o.Uk)(" 运行时间： "),Pr={class:"dialog-footer"},Br=(0,o.Uk)(" 调试 "),Or=(0,o.Uk)("保存修改"),$r=(0,o.Uk)("取消"),Lr=(0,o.Uk)(" 确认删除标题为 "),Rr={class:"content-ellipsis"},Tr=(0,o.Uk)(" 吗? "),Nr={class:"dialog-footer"},Hr=(0,o.Uk)("确认删除"),Fr=(0,o.Uk)("取消");function Er(e,t,s,a,r,n){const i=(0,o.up)("el-button"),c=(0,o.up)("el-input"),u=(0,o.up)("el-form-item"),d=(0,o.up)("el-radio-button"),p=(0,o.up)("el-radio-group"),m=(0,o.up)("Refresh"),h=(0,o.up)("el-icon"),g=(0,o.up)("Tools"),w=(0,o.up)("el-input-number"),_=(0,o.up)("el-dropdown-menu"),f=(0,o.up)("el-dropdown"),k=(0,o.up)("VAceEditor"),y=(0,o.up)("el-card"),v=(0,o.up)("el-form"),b=(0,o.up)("el-dialog"),C=(0,o.up)("el-table-column"),x=(0,o.up)("el-table"),W=(0,o.up)("el-col"),S=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{span:24},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{shadow:"always",class:"bot-card",style:{"user-select":"none"}},{header:(0,o.w5)((()=>[(0,o._)("div",Ul,[(0,o._)("span",Vl,[ql,0!==a.canCreateBotCnt?((0,o.wg)(),(0,o.iD)("span",jl,"("+(0,l.zw)(a.canCreateBotCnt)+")",1)):(0,o.kq)("",!0)]),a.isExpand?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(i,{key:0,type:"warning",class:"button",style:{float:"right","margin-left":"10px"},size:"small",plain:"",onClick:a.expandBot},{default:(0,o.w5)((()=>[Ml])),_:1},8,["onClick"])),(0,o.Wm)(i,{type:"primary",class:"button",style:{float:"right"},size:"small",plain:"",onClick:t[0]||(t[0]=e=>a.showCreateDialog=!0)},{default:(0,o.w5)((()=>[Dl])),_:1}),(0,o.Wm)(c,{style:{"margin-right":"10px",float:"right",width:"180px"},modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=e=>a.search=e),clearable:"",placeholder:"Please search...",size:"small"},null,8,["modelValue"]),(0,o.Wm)(b,{modelValue:a.showCreateDialog,"onUpdate:modelValue":t[16]||(t[16]=e=>a.showCreateDialog=e),title:"'创建Bot'",onOpened:t[17]||(t[17]=e=>a.openCodeDialog("-create"))},{footer:(0,o.w5)((()=>[(0,o._)("span",lr,[(0,o.Wm)(i,{type:"warning",onClick:t[15]||(t[15]=e=>a.debugCode(a.bot.language,a.bot.content)),loading:a.submitCoding},{default:(0,o.w5)((()=>[rr])),_:1},8,["loading"]),(0,o.Wm)(i,{type:"primary",onClick:a.confirmCreateBot},{default:(0,o.w5)((()=>[nr])),_:1},8,["onClick"]),(0,o.Wm)(i,{onClick:a.cancelCreateBot},{default:(0,o.w5)((()=>[ir])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(v,{"label-position":"top","label-width":"100px",model:a.bot,style:{"max-width":"100%"},rules:a.rules,ref:"createForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"名称",prop:"title"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:a.bot.title,"onUpdate:modelValue":t[2]||(t[2]=e=>a.bot.title=e),placeholder:"请输入Bot名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"游戏",prop:"game"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.bot.game,"onUpdate:modelValue":t[3]||(t[3]=e=>a.bot.game=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.games,(e=>((0,o.wg)(),(0,o.j4)(d,{key:e.id,label:e.id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"简介",prop:"description"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:a.bot.description,"onUpdate:modelValue":t[4]||(t[4]=e=>a.bot.description=e),autosize:{minRows:3},type:"textarea",placeholder:"请输入Bot简介"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"语言",prop:"language"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.bot.language,"onUpdate:modelValue":t[5]||(t[5]=e=>a.bot.language=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"cpp"},{default:(0,o.w5)((()=>[Pl])),_:1}),(0,o.Wm)(d,{label:"java"},{default:(0,o.w5)((()=>[Bl])),_:1}),(0,o.Wm)(d,{label:"python"},{default:(0,o.w5)((()=>[Ol])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"代码"},{default:(0,o.w5)((()=>[$l,(0,o._)("span",{class:"refresh",onClick:t[6]||(t[6]=(...e)=>a.refreshEditor&&a.refreshEditor(...e))},[(0,o.Wm)(h,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})]),(0,o.Wm)(f,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(_,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"界面风格",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.skin,"onUpdate:modelValue":t[7]||(t[7]=e=>a.skin=e),onChange:a.changeEditSkin},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"chrome"},{default:(0,o.w5)((()=>[Rl])),_:1}),(0,o.Wm)(d,{label:"monokai"},{default:(0,o.w5)((()=>[Tl])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(u,{label:"编辑类型",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.editor_mode,"onUpdate:modelValue":t[8]||(t[8]=e=>a.editor_mode=e),onChange:a.changeEditMode},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"vscode"},{default:(0,o.w5)((()=>[Nl])),_:1}),(0,o.Wm)(d,{label:"vim"},{default:(0,o.w5)((()=>[Hl])),_:1}),(0,o.Wm)(d,{label:"emacs"},{default:(0,o.w5)((()=>[Fl])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(u,{label:"缩进长度",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.editor_space,"onUpdate:modelValue":t[9]||(t[9]=e=>a.editor_space=e),onChange:a.changeEditorSpace},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"2"},{default:(0,o.w5)((()=>[El])),_:1}),(0,o.Wm)(d,{label:"4"},{default:(0,o.w5)((()=>[Al])),_:1}),(0,o.Wm)(d,{label:"8"},{default:(0,o.w5)((()=>[Gl])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(u,{label:"字号",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:a.fontsize,"onUpdate:modelValue":t[10]||(t[10]=e=>a.fontsize=e),min:5,max:60,size:"small","controls-position":"right",onChange:a.changeEditFont},null,8,["modelValue","onChange"])])),_:1})])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",Ll,[(0,o.Wm)(h,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1})])])),_:1}),(0,o.Wm)(k,{value:a.bot.content,"onUpdate:value":t[11]||(t[11]=e=>a.bot.content=e),id:"codeEditor-create",onInit:a.editorInit,class:"codeEditor",lang:"c_cpp",theme:"textmate",style:{height:"300px",width:"100%"}},null,8,["value","onInit"])])),_:1}),a.showDebugPannel?((0,o.wg)(),(0,o.j4)(y,{key:0,class:"debug-card"},{header:(0,o.w5)((()=>[(0,o._)("div",Zl,[(0,o._)("div",null,[Jl,(0,o._)("span",{style:(0,l.j5)("Finished"===a.codeStatus?"color: rgb(68, 157, 68); font-weight: 600;":"Running..."===a.codeStatus?"color: rgb(51, 122, 183); font-weight: 600;":"color: rgb(208, 84, 81); font-weight: 600;")},(0,l.zw)(a.codeStatus),5),(0,o._)("button",{class:"card-close-btn",onClick:t[12]||(t[12]=(...e)=>a.closeDebugPannel&&a.closeDebugPannel(...e))}," x ")])])])),default:(0,o.w5)((()=>[(0,o._)("div",Yl,[(0,o._)("div",Kl,[(0,o._)("div",null,[Ql,Xl,(0,o.Wm)(c,{id:"run-code-stdin",type:"textarea",class:"card-code-input",maxlength:"2000",rows:"1",resize:"none",modelValue:a.codeInput,"onUpdate:modelValue":t[13]||(t[13]=e=>a.codeInput=e),autosize:{minRows:1},style:{"margin-top":"5px"}},null,8,["modelValue"])]),(0,o._)("div",er,[tr,sr,(0,o.Wm)(c,{id:"run-code-stdout",type:"textarea",class:"card-code-output",disabled:"",maxlength:"2000",rows:"1",resize:"none",modelValue:a.codeOutput,"onUpdate:modelValue":t[14]||(t[14]=e=>a.codeOutput=e),autosize:{minRows:1},style:{"margin-top":"5px"}},null,8,["modelValue"])]),"Finished"===a.codeStatus?((0,o.wg)(),(0,o.iD)("div",ar,[or,(0,o._)("span",null,(0,l.zw)(a.codeTime)+"ms",1)])):(0,o.kq)("",!0)])])])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(x,{data:a.filterBots,stripe:"",style:{width:"100%"},"highlight-current-row":"",border:"","max-height":"67vh","table-layout":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{label:"序号",type:"index"}),(0,o.Wm)(C,{prop:"title",label:"名称"}),(0,o.Wm)(C,{prop:"game",label:"游戏"}),(0,o.Wm)(C,{prop:"language",label:"语言"}),(0,o.Wm)(C,{prop:"createtime",label:"创建时间",sortable:""}),(0,o.Wm)(C,{fixed:"right",label:"Operations"},{default:(0,o.w5)((e=>[(0,o.Wm)(i,{onClick:t=>a.openEditBot(e.row),color:"#626aef"},{default:(0,o.w5)((()=>[cr])),_:2},1032,["onClick"]),(0,o.Wm)(i,{type:"danger",onClick:t=>a.openDeleteBot(e.row)},{default:(0,o.w5)((()=>[ur])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(b,{modelValue:a.showEditDialog,"onUpdate:modelValue":t[31]||(t[31]=e=>a.showEditDialog=e),title:"修改Bot",onOpened:t[32]||(t[32]=e=>a.openCodeDialog("-edit"))},{footer:(0,o.w5)((()=>[(0,o._)("span",Pr,[(0,o.Wm)(i,{type:"warning",onClick:t[30]||(t[30]=e=>a.debugCode(a.currentOpBot.language,a.currentOpBot.content)),loading:a.submitCoding},{default:(0,o.w5)((()=>[Br])),_:1},8,["loading"]),(0,o.Wm)(i,{type:"primary",onClick:a.confirmEditBot},{default:(0,o.w5)((()=>[Or])),_:1},8,["onClick"]),(0,o.Wm)(i,{onClick:a.cancelEditBot},{default:(0,o.w5)((()=>[$r])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(v,{"label-position":"top","label-width":"100px",model:a.currentOpBot,style:{"max-width":"100%"},rules:a.rules,ref:"editForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"名称",prop:"title"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:a.currentOpBot.title,"onUpdate:modelValue":t[18]||(t[18]=e=>a.currentOpBot.title=e),placeholder:"请输入Bot名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"简介",prop:"description"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:a.currentOpBot.description,"onUpdate:modelValue":t[19]||(t[19]=e=>a.currentOpBot.description=e),autosize:{minRows:3},type:"textarea",placeholder:"请输入Bot简介"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"语言",prop:"language"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.currentOpBot.language,"onUpdate:modelValue":t[20]||(t[20]=e=>a.currentOpBot.language=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"cpp"},{default:(0,o.w5)((()=>[dr])),_:1}),(0,o.Wm)(d,{label:"java"},{default:(0,o.w5)((()=>[pr])),_:1}),(0,o.Wm)(d,{label:"python"},{default:(0,o.w5)((()=>[mr])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"代码"},{default:(0,o.w5)((()=>[hr,(0,o._)("span",{class:"refresh",onClick:t[21]||(t[21]=(...e)=>a.refreshEditor&&a.refreshEditor(...e))},[(0,o.Wm)(h,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})]),(0,o.Wm)(f,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(_,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"界面风格",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.skin,"onUpdate:modelValue":t[22]||(t[22]=e=>a.skin=e),onChange:a.changeEditSkin},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"chrome"},{default:(0,o.w5)((()=>[wr])),_:1}),(0,o.Wm)(d,{label:"monokai"},{default:(0,o.w5)((()=>[_r])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(u,{label:"编辑类型",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.editor_mode,"onUpdate:modelValue":t[23]||(t[23]=e=>a.editor_mode=e),onChange:a.changeEditMode},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"vscode"},{default:(0,o.w5)((()=>[fr])),_:1}),(0,o.Wm)(d,{label:"vim"},{default:(0,o.w5)((()=>[kr])),_:1}),(0,o.Wm)(d,{label:"emacs"},{default:(0,o.w5)((()=>[yr])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(u,{label:"缩进长度",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:a.editor_space,"onUpdate:modelValue":t[24]||(t[24]=e=>a.editor_space=e),onChange:a.changeEditorSpace},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"2"},{default:(0,o.w5)((()=>[vr])),_:1}),(0,o.Wm)(d,{label:"4"},{default:(0,o.w5)((()=>[br])),_:1}),(0,o.Wm)(d,{label:"8"},{default:(0,o.w5)((()=>[Cr])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(u,{label:"字号",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:a.fontsize,"onUpdate:modelValue":t[25]||(t[25]=e=>a.fontsize=e),min:5,max:60,size:"small","controls-position":"right",onChange:a.changeEditFont},null,8,["modelValue","onChange"])])),_:1})])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",gr,[(0,o.Wm)(h,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1})])])),_:1}),(0,o.Wm)(k,{value:a.currentOpBot.content,"onUpdate:value":t[26]||(t[26]=e=>a.currentOpBot.content=e),id:"codeEditor-edit",onInit:a.editorInit,class:"codeEditor",lang:"c_cpp",theme:"textmate",style:{height:"300px",width:"100%"}},null,8,["value","onInit"])])),_:1}),a.showDebugPannel?((0,o.wg)(),(0,o.j4)(y,{key:0,class:"debug-card"},{header:(0,o.w5)((()=>[(0,o._)("div",xr,[(0,o._)("div",null,[Wr,(0,o._)("span",{style:(0,l.j5)("Finished"===a.codeStatus?"color: rgb(68, 157, 68); font-weight: 600;":"Running..."===a.codeStatus?"color: rgb(51, 122, 183); font-weight: 600;":"color: rgb(208, 84, 81); font-weight: 600;")},(0,l.zw)(a.codeStatus),5),(0,o._)("button",{class:"card-close-btn",onClick:t[27]||(t[27]=(...e)=>a.closeDebugPannel&&a.closeDebugPannel(...e))}," x ")])])])),default:(0,o.w5)((()=>[(0,o._)("div",Sr,[(0,o._)("div",zr,[(0,o._)("div",null,[Ir,Ur,(0,o.Wm)(c,{id:"run-code-stdin",type:"textarea",class:"card-code-input",maxlength:"2000",rows:"1",resize:"none",modelValue:a.codeInput,"onUpdate:modelValue":t[28]||(t[28]=e=>a.codeInput=e),autosize:{minRows:1},style:{"margin-top":"5px"}},null,8,["modelValue"])]),(0,o._)("div",Vr,[qr,jr,(0,o.Wm)(c,{id:"run-code-stdout",type:"textarea",class:"card-code-output",disabled:"",maxlength:"2000",rows:"1",resize:"none",modelValue:a.codeOutput,"onUpdate:modelValue":t[29]||(t[29]=e=>a.codeOutput=e),autosize:{minRows:1},style:{"margin-top":"5px"}},null,8,["modelValue"])]),"Finished"===a.codeStatus?((0,o.wg)(),(0,o.iD)("div",Mr,[Dr,(0,o._)("span",null,(0,l.zw)(a.codeTime)+"ms",1)])):(0,o.kq)("",!0)])])])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{modelValue:a.showDeleteDialog,"onUpdate:modelValue":t[33]||(t[33]=e=>a.showDeleteDialog=e),title:"删除bot",width:"30%","before-close":e.handleClose},{footer:(0,o.w5)((()=>[(0,o._)("span",Nr,[(0,o.Wm)(i,{type:"primary",onClick:a.confirmDeleteBot},{default:(0,o.w5)((()=>[Hr])),_:1},8,["onClick"]),(0,o.Wm)(i,{onClick:a.cancelDeleteBot},{default:(0,o.w5)((()=>[Fr])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o._)("span",null,[Lr,(0,o._)("span",Rr,(0,l.zw)(a.currentOpBot.title),1),Tr])])),_:1},8,["modelValue","before-close"])])),_:1})])),_:1})])),_:1})}s(6699),s(1703);var Ar=s(6092),Gr=s(17),Zr={name:"UserBotIndexView",components:{VAceEditor:Ar.m},props:{userId:{type:Number,required:!0}},setup(e){Gr.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@"+s(17).version+"/src-noconflict/");const t=(0,q.oR)();let a=(0,Ke.iH)([]),l=(0,Ke.iH)([]),r=(0,Ke.iH)(""),n=(0,Ke.iH)(!1),i=(0,Ke.iH)(!1),c=(0,Ke.iH)(!1),u=(0,Ke.iH)(null),d=(0,Ke.iH)(null),p=(0,Ke.iH)(null),m=null,h=(0,Ke.iH)("chrome"),g=(0,Ke.iH)(11),w=(0,Ke.iH)("vscode"),_=(0,Ke.iH)(4),f=(0,Ke.iH)(!1),k=(0,Ke.iH)(""),y=(0,Ke.iH)(""),v=(0,Ke.iH)(!1),b=(0,Ke.iH)(""),C=(0,Ke.iH)(0),x=(0,Ke.iH)(0),W=(0,Ke.iH)(null);const S=e=>{e.renderer.setShowPrintMargin(!1)},z=()=>{null!==localStorage.getItem("editor_skin_for_"+t.state.user.username)&&(h.value=localStorage.getItem("editor_skin_for_"+t.state.user.username)),null!==localStorage.getItem("editor_fontsize_for_"+t.state.user.username)&&(g.value=parseInt(localStorage.getItem("editor_fontsize_for_"+t.state.user.username))),null!==localStorage.getItem("editor_mode_for_"+t.state.user.username)&&(w.value=localStorage.getItem("editor_mode_for_"+t.state.user.username)),null!==localStorage.getItem("editor_space_for_"+t.state.user.username)&&(_.value=localStorage.getItem("editor_space_for_"+t.state.user.username)),m.setOptions({fontSize:`${g.value}pt`,tabSize:parseInt(_.value)}),m.setKeyboardHandler("ace/keyboard/"+w.value),m.setTheme("ace/theme/"+h.value)},I=()=>{m.setTheme("ace/theme/"+h.value),localStorage.setItem("editor_skin_for_"+t.state.user.username,h.value)},U=e=>{m.setOptions({fontSize:`${e}pt`}),g.value=e,localStorage.setItem("editor_fontsize_for_"+t.state.user.username,e)},V=()=>{m.setKeyboardHandler("ace/keyboard/"+w.value),localStorage.setItem("editor_mode_for_"+t.state.user.username,w.value)},j=()=>{m.setOptions({tabSize:parseInt(_.value)}),localStorage.setItem("editor_space_for_"+t.state.user.username,_.value)},M=()=>{m.setValue("")},D=(0,Ke.qj)({title:"",game:0,description:"",language:"",content:""}),P=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/getlist/"+e.userId,type:"get",headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result&&(a.value=e.bots,W.value?x.value=15-a.value.length:x.value=10-a.value.length)},error(){t.dispatch("logout")}})},B=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/game/getlist/",type:"get",headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result&&(l.value=e.games)},error(){t.dispatch("logout")}})};(0,o.bv)((()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/isexpand/",type:"get",headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result&&(W.value=e.status)},error(){t.dispatch("logout")}}),e.userId===t.state.user.id&&(P(),B())}));const O=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/add/",type:"post",data:{title:D.title,game_id:D.game,description:D.description,language:D.language,content:D.content},headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result?(D.title="",D.game=0,D.description="",D.content="",P(),(0,rs.z8)({message:"创建成功",type:"success"}),t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt+1,recordCnt:t.state.user.recordCnt,freshNewsCnt:t.state.user.freshNewsCnt,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone})):rs.z8.error(e.result)},error(){t.dispatch("logout")}})},$=e=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/remove/",type:"post",data:{bot_id:e.id},headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result&&(P(),(0,rs.z8)({showClose:!0,message:"删除成功",type:"success"}),t.commit("updateUser",{id:t.state.user.id,username:t.state.user.username,photo:t.state.user.photo,is_login:t.state.user.is_login,job:t.state.user.job,desp:t.state.user.desp,botCnt:t.state.user.botCnt-1,recordCnt:t.state.user.recordCnt,freshNewsCnt:t.state.user.freshNewsCnt,isSuperUser:t.state.user.isSuperUser,phone:t.state.user.phone}))},error(){t.dispatch("logout")}})},L=e=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/update/",type:"post",data:{bot_id:e.id,title:e.title,description:e.description,language:e.language,content:e.content},headers:{Authorization:"Bearer "+t.state.user.access},success(e){"success"===e.result?(P(),(0,rs.z8)({showClose:!0,message:"更新成功",type:"success"})):rs.z8.error(e.result)},error(){t.dispatch("logout")}})},R=(0,o.Fl)((()=>a.value.filter((e=>!r.value||e.game.toLowerCase().includes(r.value.toLowerCase())||e.title.toLowerCase().includes(r.value.toLowerCase())||e.createtime.includes(r.value))))),T=e=>{m=Gr.edit("codeEditor"+e),z()},N=e=>{p.value=e,i.value=!0},H=e=>{c.value=!0,p.value=e},F=async()=>{const e=(0,Ke.SU)(u);await e.validate((e=>{""!==D.content?D.content.length>1e4?(0,rs.z8)({showClose:!0,message:"代码不能超过10000",type:"error"}):e&&(n.value=!1,O()):(0,rs.z8)({showClose:!0,message:"代码不能为空",type:"error"})}))},E=(e,t,s)=>{0===D.game?s(new Error("请选择游戏！")):s()},A=()=>{n.value=!1,(0,rs.z8)("取消创建");const e=(0,Ke.SU)(u);e.resetFields(),Q()},G=async()=>{const e=(0,Ke.SU)(d);await e.validate((e=>{""!==p.value.content?p.value.content.length>1e4?(0,rs.z8)({showClose:!0,message:"代码不能超过10000",type:"error"}):e&&(i.value=!1,L(p.value)):(0,rs.z8)({showClose:!0,message:"代码不能为空",type:"error"})}))},Z=()=>{i.value=!1,(0,rs.z8)("取消修改");const e=(0,Ke.SU)(d);e.resetFields(),Q()},J=()=>{c.value=!1,$(p.value)},Y=()=>{c.value=!1,(0,rs.z8)("取消删除")},K=(e,s)=>""===s?(rs.z8.error("代码为空，无法调试"),void(f.value=!1)):""===e?(rs.z8.error("请选择语言"),void(f.value=!1)):(v.value=!0,y.value="",f.value=!0,b.value="Running...",e=e.trim(),s=s.trim(),void bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/debug/",type:"post",data:{lang:e,code:s,data:k.value},headers:{Authorization:"Bearer "+t.state.user.access},success(e){b.value=e.status,y.value=e.output,f.value=!1,"Finished"===b.value&&(C.value=e.time)},error(){t.dispatch("logout")}})),Q=()=>{v.value=!1,y.value="",k.value="",C.value=0},X=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/alipay/",type:"post",headers:{Authorization:"Bearer "+t.state.user.access},success(e){window.location=e.pay_url},error(){t.dispatch("logout")}})};return{bots:a,games:l,bot:D,search:r,filterBots:R,showCreateDialog:n,showEditDialog:i,showDeleteDialog:c,openCodeDialog:T,openEditBot:N,openDeleteBot:H,confirmCreateBot:F,cancelCreateBot:A,confirmEditBot:G,cancelEditBot:Z,confirmDeleteBot:J,cancelDeleteBot:Y,createForm:u,editForm:d,currentOpBot:p,editorInit:S,initModal:z,changeEditSkin:I,changeEditFont:U,changeEditMode:V,changeEditorSpace:j,skin:h,fontsize:g,editor_mode:w,editor_space:_,refreshEditor:M,debugCode:K,submitCoding:f,codeInput:k,codeOutput:y,showDebugPannel:v,closeDebugPannel:Q,codeStatus:b,codeTime:C,expandBot:X,isExpand:W,canCreateBotCnt:x,rules:{title:[{required:!0,message:"名称不得为空！",trigger:"blur"},{max:100,message:"长度在 100 个字符之内",trigger:"blur"}],game:[{validator:E,required:!0,message:"请选择游戏！",trigger:"blur"}],description:[{max:300,message:"长度在 300 个字符之内",trigger:"blur"}],language:[{required:!0,message:"请选择语言！",trigger:"blur"}]}}}};const Jr=(0,Ct.Z)(Zr,[["render",Er],["__scopeId","data-v-516c55cf"]]);var Yr=Jr,Kr={name:"SpaceMainView",components:{UserBotIndexView:Yr,RecordList:ga,ProfileCard:Qa,FreshNewsList:ml},setup(){const e=(0,q.oR)(),t=(0,j.yj)(),s=parseInt(t.params.userId),a=(0,Ke.qj)({id:0,name:"",photo:"",job:"",desp:"",recordCnt:0,botCnt:0,freshNewsCnt:0,isSuperUser:!1}),l=(0,Ke.iH)(null);(0,o.m0)((()=>{a.botCnt=e.state.user.botCnt,a.recordCnt=e.state.user.recordCnt,a.freshNewsCnt=e.state.user.freshNewsCnt}));const r=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/getinfo/"+s+"/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(t){"success"===t.result&&(a.id=s,a.username=t.player_info.username,a.photo=t.player_info.photo,a.job=t.player_info.job,a.desp=t.player_info.desp,a.recordCnt=t.player_info.recordCnt,a.botCnt=t.player_info.botCnt,a.freshNewsCnt=t.player_info.freshNewsCnt,a.isSuperUser=t.player_info.isSuperUser,a.id!==e.state.user.id?l.value="records":l.value="bots")},error(){e.dispatch("logout")}})},n=e=>{l.value=e};return(0,o.bv)((()=>{r()})),{userId:s,spacePlayerInfo:a,pannelName:l,switchPannel:n}}};const Qr=(0,Ct.Z)(Kr,[["render",zl]]);var Xr=Qr;const en=e=>((0,o.dD)("data-v-2e1d7b36"),e=e(),(0,o.Cn)(),e),tn=en((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"个人信息")],-1))),sn=en((()=>(0,o._)("div",{class:"el-upload__tip"}," jpg/png files with a size less than 2MB ",-1))),an=["src"],on={key:0},ln={key:1},rn={key:0,class:"verify-code-prompt"},nn=(0,o.Uk)("更新");function cn(e,t,s,a,r,n){const i=(0,o.up)("ProfileCard"),c=(0,o.up)("el-col"),u=(0,o.up)("Plus"),d=(0,o.up)("el-icon"),p=(0,o.up)("el-upload"),m=(0,o.up)("el-dialog"),h=(0,o.up)("el-form-item"),g=(0,o.up)("el-input"),w=(0,o.up)("el-button"),_=(0,o.up)("el-form"),f=(0,o.up)("el-row"),k=(0,o.up)("el-card");return(0,o.wg)(),(0,o.j4)(f,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:5,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{info:a.playerInfo},null,8,["info"])])),_:1}),(0,o.Wm)(c,{span:14,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{style:{"margin-top":"25px","user-select":"none"}},{header:(0,o.w5)((()=>[tn])),default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:20,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{ref:"editForm","label-position":e.labelPosition,"label-width":"180px",model:a.personalEditInfo,rules:a.rules,style:{"max-width":"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"头像"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"avatar-uploader","file-list":a.avatarList,"onUpdate:file-list":t[0]||(t[0]=e=>a.avatarList=e),"list-type":"picture-card","before-upload":a.beforeAvatarUpload,"http-request":a.uploadAvatar,"on-change":a.handleChangePic,"on-preview":a.handlePreviewPic},{tip:(0,o.w5)((()=>[sn])),default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u)])),_:1})])),_:1},8,["file-list","before-upload","http-request","on-change","on-preview"]),(0,o.Wm)(m,{modelValue:a.showImgDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>a.showImgDialog=e)},{default:(0,o.w5)((()=>[(0,o._)("img",{"w-full":"",src:a.dialogimageUrl,alt:"Preview Image"},null,8,an)])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(h,{label:"用户名",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{placeholder:"Please input username",clearable:"",modelValue:a.personalEditInfo.username,"onUpdate:modelValue":t[2]||(t[2]=e=>a.personalEditInfo.username=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(h,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{placeholder:"Please input phone",clearable:"",modelValue:a.personalEditInfo.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>a.personalEditInfo.phone=e),disabled:null!==e.$store.state.user.phone&&""!==e.$store.state.user.phone},(0,o.Nv)({_:2},[null===e.$store.state.user.phone||""===e.$store.state.user.phone?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(w,{onClick:t[3]||(t[3]=e=>a.send_msg(a.personalEditInfo.phone))},{default:(0,o.w5)((()=>[e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.iD)("span",on,"已发送("+(0,l.zw)(e.$store.state.utils.verifyCodeTime)+")",1)):((0,o.wg)(),(0,o.iD)("span",ln,"发送验证码"))])),_:1})]))}:void 0]),1032,["modelValue","disabled"])])),_:1}),e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.iD)("div",rn,"验证码在5分钟内有效，请及时填写！")):(0,o.kq)("",!0),e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.j4)(h,{key:1,label:"验证码",prop:"verify_code"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{placeholder:"Please input verification code",clearable:"",modelValue:a.personalEditInfo.verify_code,"onUpdate:modelValue":t[5]||(t[5]=e=>a.personalEditInfo.verify_code=e)},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(h,{label:"职业",prop:"job"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{placeholder:"Please input your job",clearable:"",modelValue:a.personalEditInfo.job,"onUpdate:modelValue":t[6]||(t[6]=e=>a.personalEditInfo.job=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(h,{label:"个性签名",prop:"desp"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{type:"textarea",modelValue:a.personalEditInfo.desp,"onUpdate:modelValue":t[7]||(t[7]=e=>a.personalEditInfo.desp=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{type:"primary",style:{width:"100%"},onClick:a.updatePlayerInfo},{default:(0,o.w5)((()=>[nn])),_:1},8,["onClick"])])),_:1})])),_:1},8,["label-position","model","rules"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}s(8675),s(3462),s(7380),s(1118);var un=s(2748),dn={name:"PersonalInfoView",components:{ProfileCard:Qa,Plus:un.Plus},setup(){const e=(0,q.oR)(),t=(0,Ke.qj)({id:e.state.user.id,username:e.state.user.username,photo:e.state.user.photo,job:e.state.user.job,desp:e.state.user.desp,recordCnt:e.state.user.recordCnt,botCnt:e.state.user.botCnt,freshNewsCnt:e.state.user.freshNewsCnt});let s=(0,Ke.iH)(!1),a=(0,Ke.iH)(""),l=(0,Ke.iH)([{name:"1.jpg",url:e.state.user.photo}]),r=(0,Ke.qj)({photo:e.state.user.photo,username:e.state.user.username,job:e.state.user.job,desp:e.state.user.desp,phone:e.state.user.phone,verify_code:""}),n=(0,Ke.iH)(null);(0,o.m0)((()=>{t.username=e.state.user.username,t.photo=e.state.user.photo,t.job=e.state.user.job,t.desp=e.state.user.desp}));const i=e=>"image/jpeg"!==e.type&&"image/png"!==e.type?(rs.z8.error("Avatar picture must be JPG/PNG format!"),!1):!(e.size/1024/1024>2)||(rs.z8.error("Avatar picture size can not exceed 2MB!"),!1),c=(e,t)=>{t.length>1&&t.splice(0,1)},u=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/img/update_avatar/",type:"POST",headers:{Authorization:"Bearer "+e.state.user.access},data:{imgUrl:r.photo},success(){return l.value[0]={name:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))+".jpg",url:r.photo},!1},error(){return e.dispatch("logout"),!0}})},d=t=>{let s=t.file;e.dispatch("uploadImage",{file:s,userId:e.state.user.id,success(e){r.photo=e+"?x-oss-process=image/resize,h_500,m_lfit"}})},p=e=>{s.value=!0,a.value=e.url},m=async()=>{const t=(0,Ke.SU)(n);await t.validate((t=>{if(t){if(r.username===e.state.user.username&&r.photo===e.state.user.photo&&r.job===e.state.user.job&&r.desp===e.state.user.desp&&r.phone===e.state.user.phone)return void(0,rs.z8)({message:"没有修改任何信息",type:"warning"});bs().ajax({url:"https://aigame.zzqahm.top/backend/player/update_info/",type:"POST",headers:{Authorization:"Bearer "+e.state.user.access},data:{username:r.username,job:r.job,desp:r.desp},success(t){if("success"===t.result){if(r.phone!==e.state.user.phone){let e=h();if(e)return}if(r.photo!==e.state.user.photo){let e=u();if(e)return}e.commit("updateUser",{id:e.state.user.id,username:r.username,photo:r.photo,is_login:e.state.user.is_login,job:r.job,desp:r.desp,botCnt:e.state.user.botCnt,recordCnt:e.state.user.recordCnt,freshNewsCnt:e.state.user.freshNewsCnt,isSuperUser:e.state.user.isSuperUser,phone:r.phone}),(0,rs.z8)({showClose:!0,message:"更新成功",type:"success"})}else(0,rs.z8)({showClose:!0,message:t.result,type:"error"})},error(){e.dispatch("logout")}})}}))},h=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/binding_phone/",type:"POST",headers:{Authorization:"Bearer "+e.state.user.access},data:{phone:r.phone,code:r.verify_code.trim()},success(t){return"success"===t.result?(e.commit("updateShowVerifyCode",!1),!1):((0,rs.z8)({showClose:!0,message:t.result,type:"error"}),!0)},error(){return e.dispatch("logout"),!0}})},g=t=>{e.dispatch("send_msg",{phone:t,flag:"binding"})};return(0,o.bv)((()=>{null===e.state.utils.gameUtils&&e.commit("updateGameUtils",new ns(e))})),{playerInfo:t,beforeAvatarUpload:i,handleChangePic:c,uploadAvatar:d,showImgDialog:s,dialogimageUrl:a,handlePreviewPic:p,avatarList:l,personalEditInfo:r,updatePlayerInfo:m,editForm:n,send_msg:g,rules:{username:[{required:!0,message:"用户名不得为空！",trigger:"blur"},{max:15,message:"长度在 15 个字符之内",trigger:"blur"}],job:[{max:20,message:"长度在 20 个字符之内",trigger:"blur"}],desp:[{max:200,message:"长度在 200 个字符之内",trigger:"blur"}],verify_code:[{required:!0,message:"验证码不得为空！",trigger:"blur"}]}}}};const pn=(0,Ct.Z)(dn,[["render",cn],["__scopeId","data-v-2e1d7b36"]]);var mn=pn;const hn={style:{display:"flex","align-items":"center","margin-left":"10px"}},gn={style:{color:"white"}},wn=(0,o._)("span",null,"返回",-1),_n=(0,o.Uk)("预览"),fn=(0,o.Uk)("保存"),kn=(0,o._)("span",null,"Back",-1),yn=(0,o.Uk)("Edit"),vn=(0,o.Uk)("Create");function bn(e,t,s,a,r,n){const i=(0,o.up)("el-col"),c=(0,o.up)("Clock"),u=(0,o.up)("el-icon"),d=(0,o.up)("el-tooltip"),p=(0,o.up)("ArrowLeft"),m=(0,o.up)("el-button"),h=(0,o.up)("el-input"),g=(0,o.up)("v-md-editor"),w=(0,o.up)("el-row"),_=(0,o.up)("InfoFilled"),f=(0,o.up)("MDPreview");return(0,o.wg)(),(0,o.iD)(o.HY,null,["create"===a.show?((0,o.wg)(),(0,o.j4)(w,{key:0,style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:4,offset:4},{default:(0,o.w5)((()=>[(0,o._)("div",hn,[(0,o._)("h1",gn,"标题："+(0,l.zw)(a.title),1)])])),_:1}),(0,o.Wm)(i,{span:3,offset:9,style:{display:"flex","justify-content":"space-around","align-items":"center"}},{default:(0,o.w5)((()=>["create"===a.flag?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"box-item",effect:"dark",content:a.lastSaveTime,placement:"bottom-start"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{style:{color:"white"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})])),_:1},8,["content"])):(0,o.kq)("",!0),(0,o.Wm)(m,{onClick:a.backToPreview,style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{style:{"vertical-align":"middle"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1}),wn])),_:1},8,["onClick"]),(0,o.Wm)(m,{onClick:a.onPreview,type:"success"},{default:(0,o.w5)((()=>[_n])),_:1},8,["onClick"]),(0,o.Wm)(m,{onClick:a.onSubmit,type:"primary",style:{"margin-right":"40px"}},{default:(0,o.w5)((()=>[fn])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(i,{span:16,offset:4},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e),size:"large",placeholder:"Please input title",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,{span:16,offset:4,style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.mdValue,"onUpdate:modelValue":t[1]||(t[1]=e=>a.mdValue=e),"left-toolbar":"undo redo clear | h bold italic strikethrough quote todo-list | ul ol table hr | link image code emoji | save",height:"500px",onCopyCodeSuccess:a.handleCopyCodeSuccess,onUploadImage:a.handleUploadImage,onSave:a.save,onChange:a.change,"disabled-menus":[],"include-level":[1,2,3,4,5,6]},null,8,["modelValue","onCopyCodeSuccess","onUploadImage","onSave","onChange"])])),_:1})])),_:1})):(0,o.kq)("",!0),"preview"===a.show?((0,o.wg)(),(0,o.j4)(w,{key:1,style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[e.$store.state.user.isSuperUser?((0,o.wg)(),(0,o.j4)(i,{key:0,span:2,offset:4,style:{display:"flex","align-items":"center"}},{default:(0,o.w5)((()=>[a.startPreview?((0,o.wg)(),(0,o.j4)(m,{key:0,style:{"margin-left":"10px"},onClick:a.backToCreate},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{style:{"vertical-align":"middle"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1}),kn])),_:1},8,["onClick"])):a.createPreview?((0,o.wg)(),(0,o.j4)(d,{key:1,class:"box-item",effect:"dark",content:"提示：此说明是临时显示，网站固定显示id为1的说明！",placement:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{style:{color:"white"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),e.$store.state.user.isSuperUser&&!a.startPreview?((0,o.wg)(),(0,o.j4)(i,{key:1,span:3,offset:11,style:{display:"flex","justify-content":"space-around","align-items":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{style:{"margin-right":"10px"},onClick:a.onEdit},{default:(0,o.w5)((()=>[yn])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"primary",onClick:a.onCreate},{default:(0,o.w5)((()=>[vn])),_:1},8,["onClick"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(i,{span:16,offset:4,style:{"margin-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{previewValue:a.previewValue},null,8,["previewValue"])])),_:1})])),_:1})):(0,o.kq)("",!0)],64)}function Cn(e,t,s,a,l,r){const n=(0,o.up)("el-alert"),i=(0,o.up)("v-md-preview"),c=(0,o.up)("el-card");return(0,o.wg)(),(0,o.j4)(c,{shadow:"always",class:"preview-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{title:"欢迎来到 AIGame PlatForm ！你可以点击 首页 来选择你感兴趣游戏的进行游玩~",type:"success"}),(0,o.Wm)(c,{shadow:"always",class:"card",style:{"margin-top":"30px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{text:s.previewValue,"include-level":[1,2,3,4,5,6],height:"400px"},null,8,["text"])])),_:1})])),_:1})}var xn={name:"MDPreview",props:{previewValue:{type:String,required:!0}}};const Wn=(0,Ct.Z)(xn,[["render",Cn],["__scopeId","data-v-f3afadcc"]]);var Sn=Wn,zn={name:"IntroVie",components:{MDPreview:Sn},setup(){Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[s]:("00"+t[s]).substr((""+t[s]).length)));return e};const e=(0,q.oR)();let t=(0,Ke.iH)("preview"),s=(0,Ke.iH)(""),a=(0,Ke.iH)(""),l=(0,Ke.iH)(0),r=(0,Ke.iH)(""),n=(0,Ke.iH)(""),i=(0,Ke.iH)(null),c=(0,Ke.iH)(!1),u=(0,Ke.iH)((new Date).format("自动保存：yyyy-MM-dd hh:mm:ss")),d=(0,Ke.iH)(!1),p=(0,Ke.iH)(!1),m=(0,Ke.iH)("");const h=()=>{(0,rs.z8)({showClose:!0,message:"复制成功",type:"success"})},g=(t,s,a)=>{let o=a[0];e.dispatch("uploadImage",{file:o,userId:e.state.user.id,success(e,t){s({url:e,desc:t,width:"700",height:"auto"})}})},w=()=>{localStorage.setItem("intro-content-"+e.state.user.username,a.value),localStorage.setItem("intro-title-"+e.state.user.username,s.value),(0,rs.z8)({showClose:!0,message:"保存成功",type:"success"}),u.value=(new Date).format("自动保存：yyyy-MM-dd hh:mm:ss"),c.value=!1},_=()=>{c.value&&w()};(0,o.bv)((()=>{e.dispatch("getGameIntro",{id:1,success(e){l.value=e.data.id,r.value=e.data.title,n.value=e.data.content}})}));const f=()=>{c.value=!0},k=()=>{W(),n.value=a.value,t.value="preview",d.value=!0},y=()=>{m.value="",W(),s.value="",a.value="",e.dispatch("getGameIntro",{id:1,success(e){l.value=e.data.id,r.value=e.data.title,n.value=e.data.content}}),t.value="preview"},v=()=>{m.value="create",t.value="create",p.value=!1,null!==localStorage.getItem("intro-content-"+e.state.user.username)&&(a.value=localStorage.getItem("intro-content-"+e.state.user.username),s.value=localStorage.getItem("intro-title-"+e.state.user.username)),x()},b=()=>{"edit"!==m.value&&x(),t.value="create",d.value=!1},C=()=>{m.value="edit",s.value=r.value,a.value=n.value,t.value="create"},x=()=>{console.log("自动保存开始"),i.value=setInterval(_,6e4)},W=()=>{null!==i.value&&(localStorage.setItem("intro-content-"+e.state.user.username,a.value),localStorage.setItem("intro-title-"+e.state.user.username,s.value),clearInterval(i.value),i.value=null,console.log("自动保存结束"))},S=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/game_intro/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.access},data:{title:s.value,content:a.value,isPost:"True"},success(o){"success"===o.result&&(localStorage.removeItem("intro-title-"+e.state.user.username,a.value),localStorage.removeItem("intro-content-"+e.state.user.username,a.value),t.value="preview",l.value=o.id,r.value=s.value,n.value=a.value,s.value="",a.value="",W(),p.value=!0)},error(){e.dispatch("logout")}})},z=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/game_intro/edit/",type:"post",headers:{Authorization:"Bearer "+e.state.user.access},data:{id:l.value,title:s.value,content:a.value,isPost:"True"},success(e){"success"===e.result&&(t.value="preview",r.value=s.value,n.value=a.value,s.value="",a.value="",W(),1!==l.value&&(p.value=!0))},error(){e.dispatch("logout")}})},I=()=>{"create"===m.value?S():z()};return{show:t,title:s,mdValue:a,previewValue:n,handleCopyCodeSuccess:h,handleUploadImage:g,save:w,isModify:c,lastSaveTime:u,change:f,onPreview:k,backToPreview:y,onCreate:v,backToCreate:b,startPreview:d,onEdit:C,onSubmit:I,createPreview:p,flag:m}}};const In=(0,Ct.Z)(zn,[["render",bn]]);var Un=In;function Vn(e,t,s,a,l,r){const n=(0,o.up)("MDPreview"),i=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(c,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:16,offset:4,style:{"margin-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{previewValue:a.previewValue},null,8,["previewValue"])])),_:1})])),_:1})}var qn={name:"GameIntroView",components:{MDPreview:Sn},setup(){const e=(0,q.oR)();let t=(0,Ke.iH)("");return(0,o.bv)((()=>{e.dispatch("getGameIntro",{id:10,success(e){t.value=e.data.content}})})),{previewValue:t}}};const jn=(0,Ct.Z)(qn,[["render",Vn]]);var Mn=jn;function Dn(e,t,s,a,l,r){const n=(0,o.up)("MDPreview"),i=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(c,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:16,offset:4,style:{"margin-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{previewValue:a.previewValue},null,8,["previewValue"])])),_:1})])),_:1})}var Pn={name:"CodeHelperView",components:{MDPreview:Sn},setup(){const e=(0,q.oR)();let t=(0,Ke.iH)("");return(0,o.bv)((()=>{e.dispatch("getGameIntro",{id:8,success(e){t.value=e.data.content}})})),{previewValue:t}}};const Bn=(0,Ct.Z)(Pn,[["render",Dn]]);var On=Bn;function $n(e,t,s,a,l,r){const n=(0,o.up)("MDPreview"),i=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(c,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:16,offset:4,style:{"margin-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{previewValue:a.previewValue},null,8,["previewValue"])])),_:1})])),_:1})}var Ln={name:"FuncIntroView",components:{MDPreview:Sn},setup(){let e=(0,Ke.iH)("# 功能介绍");return{previewValue:e}}};const Rn=(0,Ct.Z)(Ln,[["render",$n]]);var Tn=Rn;const Nn=(0,o.Uk)(" 404 Not Found ");function Hn(e,t,s,a,l,r){const n=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(n,null,{default:(0,o.w5)((()=>[Nn])),_:1})}var Fn={name:"NotFound",components:{ContentField:Cl}};const En=(0,Ct.Z)(Fn,[["render",Hn]]);var An=En;const Gn=e=>((0,o.dD)("data-v-064b4fb0"),e=e(),(0,o.Cn)(),e),Zn={class:"third-login"},Jn=Gn((()=>(0,o._)("img",{style:{width:"25px"},src:"https://wiki.connect.qq.com/wp-content/uploads/2013/10/03_qq_symbol-1-250x300.png",alt:""},null,-1))),Yn=[Jn],Kn=Gn((()=>(0,o._)("svg",{t:"1669366661899",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2754",width:"32",height:"32"},[(0,o._)("path",{d:"M820.409449 797.228346q0 25.19685-10.07874 46.866142t-27.716535 38.299213-41.322835 26.204724-50.897638 9.574803l-357.795276 0q-27.212598 0-50.897638-9.574803t-41.322835-26.204724-27.716535-38.299213-10.07874-46.866142l0-675.275591q0-25.19685 10.07874-47.370079t27.716535-38.80315 41.322835-26.204724 50.897638-9.574803l357.795276 0q27.212598 0 50.897638 9.574803t41.322835 26.204724 27.716535 38.80315 10.07874 47.370079l0 675.275591zM738.771654 170.330709l-455.559055 0 0 577.511811 455.559055 0 0-577.511811zM510.992126 776.062992q-21.165354 0-36.787402 15.11811t-15.622047 37.291339q0 21.165354 15.622047 36.787402t36.787402 15.622047q22.173228 0 37.291339-15.622047t15.11811-36.787402q0-22.173228-15.11811-37.291339t-37.291339-15.11811zM591.622047 84.661417q0-8.062992-5.03937-12.598425t-11.086614-4.535433l-128 0q-5.03937 0-10.582677 4.535433t-5.543307 12.598425 5.03937 12.598425 11.086614 4.535433l128 0q6.047244 0 11.086614-4.535433t5.03937-12.598425z","p-id":"2755"})],-1))),Qn=[Kn],Xn=Gn((()=>(0,o._)("svg",{t:"1669386022314",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1964",width:"32",height:"32"},[(0,o._)("path",{d:"M269.04 694.68c-14.936 0-27.088-11.928-27.088-26.608V423.792h433.424v68.408c14.096 1.2 27.696 4.088 40.632 8.448V383.16H201.32v284.912c0 37.144 30.32 67.24 67.72 67.24h231.52a173.208 173.208 0 0 1-12.04-40.632H269.04zM661.832 383.16H621.2v-40.64c0-91.368-76.296-162.528-162.528-162.528-88.36 0-162.528 74.152-162.528 162.528v40.64h-40.632v-40.64c0-110.776 92.384-203.168 203.168-203.168 109.384 0 203.168 88.624 203.168 203.168v40.64z",fill:"","p-id":"1965"}),(0,o._)("path",{d:"M451.888 491.512h13.552a20.32 20.32 0 0 1 20.312 20.312V606.64a20.328 20.328 0 0 1-20.336 20.32h-13.544a20.32 20.32 0 0 1-20.32-20.32V511.832a20.352 20.352 0 0 1 20.336-20.32zM660.352 519.584c-80.744 0-146.176 65.448-146.176 146.168 0 80.736 65.44 146.176 146.176 146.176 80.728 0 146.176-65.448 146.176-146.176 0-80.72-65.448-146.168-146.176-146.168z m1.496 252.48c-61.2 0-110.808-49.592-110.808-110.808 0-61.192 49.6-110.8 110.808-110.8s110.808 49.6 110.808 110.8c0 61.216-49.6 110.808-110.808 110.808z",fill:"","p-id":"1966"}),(0,o._)("path",{d:"M657.168 710.952h13.104v11.848h-13.104z",fill:"","p-id":"1967"}),(0,o._)("path",{d:"M649.168 702.952h29.104v27.848h-29.104z",fill:"","p-id":"1968"}),(0,o._)("path",{d:"M667.768 590.592c-24.528-0.408-40.128 11.648-46.768 36.168h10.6c5.816-19.952 17.864-29.72 36.168-29.304 17.872 1.24 27.648 10.392 29.312 27.44 1.248 9.56-5.608 19.128-20.576 28.68-12.888 8.328-19.128 18.304-18.712 29.936v6.232h10.6v-5.608c-0.416-10.392 4.16-18.496 13.72-24.32 18.712-9.976 27.44-22.032 26.192-36.168-2.088-20.784-15.592-31.808-40.536-33.056z",fill:"","p-id":"1969"}),(0,o._)("path",{d:"M676.392 697.752h-26.6V683.52c-0.512-14.304 7.008-26.736 22.368-36.656 8.328-5.312 17.992-13.232 16.992-20.92-1.32-13.472-7.872-19.512-21.936-20.496h-0.552c-8.808 0-21.224 2.448-27.376 23.552l-1.68 5.768h-27.056l2.736-10.096c7.456-27.528 25.88-42.088 53.288-42.088l1.328 0.008c36.864 1.84 46.624 22.904 48.368 40.256 1.552 17.672-8.68 32.448-30.392 44.032-6.64 4.064-9.792 9.512-9.496 16.936l0.008 13.936z",fill:"","p-id":"1970"})],-1))),ei=[Xn],ti=(0,o.Uk)("登录");function si(e,t,s,a,l,r){const n=(0,o.up)("el-input"),i=(0,o.up)("el-form-item"),c=(0,o.up)("SliderVerify"),u=(0,o.up)("el-tooltip"),d=(0,o.up)("el-button"),p=(0,o.up)("el-form"),m=(0,o.up)("el-col"),h=(0,o.up)("el-row"),g=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{span:8,offset:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:a.log_info,rules:a.rules,ref:"ruleForm","label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{label:"帐号",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:a.log_info.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.log_info.username=e),placeholder:"请输入用户名或手机号码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,{label:"密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"password",modelValue:a.log_info.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.log_info.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{modelValue:a.log_info.isLock,"onUpdate:modelValue":t[2]||(t[2]=e=>a.log_info.isLock=e),onChange:a.handlerLock,class:"verify",onCheckVal:a.checkVal},null,8,["modelValue","onChange","onCheckVal"]),(0,o._)("div",Zn,[(0,o.Wm)(u,{class:"box-item",effect:"dark",content:"QQ一键登录",placement:"bottom"},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t[3]||(t[3]=(...e)=>a.qq_login&&a.qq_login(...e))},Yn)])),_:1}),(0,o.Wm)(u,{class:"box-item",effect:"dark",content:"手机验证码登录",placement:"bottom"},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t[4]||(t[4]=(...e)=>a.phone_login&&a.phone_login(...e))},Qn)])),_:1}),(0,o.Wm)(u,{class:"box-item",effect:"dark",content:"忘记密码",placement:"bottom"},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t[5]||(t[5]=(...e)=>a.forget_password&&a.forget_password(...e))},ei)])),_:1})]),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"primary",onClick:a.login,style:{width:"100%"}},{default:(0,o.w5)((()=>[ti])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}const ai=e=>((0,o.dD)("data-v-d5eab8c0"),e=e(),(0,o.Cn)(),e),oi=ai((()=>(0,o._)("div",{class:"background"},null,-1))),li=(0,o.Uk)(" >> ");function ri(e,t,s,a,r,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",{class:"drag",style:(0,l.j5)(n.style)},[oi,(0,o._)("div",{class:"text shadow",onselectstart:"return false",style:(0,l.j5)({color:s.textColor})},[(0,o.WI)(e.$slots,"content",{},(()=>[(0,o.Uk)((0,l.zw)(s.content),1)]),!0)],4),(0,o._)("div",{class:"slider",style:(0,l.j5)({height:s.height,width:s.sliderWidth})},[s.icon?(0,o.WI)(e.$slots,"icon",{key:0},(()=>[(0,o._)("i",{class:(0,l.C_)(s.icon)},null,2)]),!0):(0,o.WI)(e.$slots,"icon",{key:1},(()=>[li]),!0)],4)],4)])}const ni=function(){let e=0;return function(t,s){clearTimeout(e),e=setTimeout(t,s)}}();var ii={name:"SliderVerify",model:{event:"change",prop:"isLock"},props:{isLock:{type:[String,Boolean,Number,Object],required:!0,default:!1},icon:{type:[String],default:"el-icon-d-arrow-right"},activeValue:{type:[String,Boolean,Number,Object],default:!0},inactiveValue:{type:[String,Boolean,Number,Object],default:!1},content:{type:[String],default:"请向右拖动滑块"},height:{type:[String],default:"40px"},sliderWidth:{type:[String],default:"40px"},background:{type:[String],default:"#e8e8e8"},textColor:{type:[String],default:"#777"}},watch:{isLock(e){!e&&this.init()}},computed:{style(){const{height:e,background:t}=this;return{height:e,"line-height":e,background:t}},resize(){return document.body.clientWidth}},mounted(){this.init(),window.onresize=()=>{ni((()=>{this.init()}),120)}},methods:{selector(e){return document.querySelector(e)},init(){const e=this.selector(".drag");if(e){const t=this.selector(".background"),s=this.selector(".text"),a=this.selector(".slider"),o=e.offsetWidth-a.offsetWidth;let l=this.inactiveValue;a.style.transition=null,t.style.transition=null,a.style.left="0px",t.style.width="0px",s.innerHTML=this.content,a.innerHTML='<i class="el-icon-d-arrow-right"></i>',a.style.color="#3fcd26",a.onmousedown=e=>{this.$emit("checkVal",(r=>{if(!r)return;a.style.transition=null,t.style.transition=null;const n=e||window.event,i=n.clientX;document.onmousemove=e=>{const r=e||window.event,n=r.clientX;let c=n-i;c>o?c=o:c<0&&(c=0),a.style.left=c+"px",t.style.width=c+"px",c==o&&(s.innerHTML="验证成功",s.style.color="#53C300",a.innerHTML='<i class="el-icon-success"></i>',a.style.color="#53C300",l=this.activeValue,a.onmousedown=null,document.onmousemove=null,setTimeout((()=>{this.$emit("change",this.activeValue)}),100))}})),document.onmouseup=()=>{if(l==this.activeValue)return!0;a.style.left=0,t.style.width=0,a.style.transition="left 1s ease",t.style.transition="width 1s ease",document.onmousemove=null,document.onmouseup=null}}}}}};const ci=(0,Ct.Z)(ii,[["render",ri],["__scopeId","data-v-d5eab8c0"]]);var ui=ci,di={name:"UserAccountLoginView",components:{ContentField:Cl,SliderVerify:ui},setup(){const e=(0,q.oR)(),t=(0,Ke.iH)(null);let s=(0,Ke.qj)({username:"",password:"",isLock:!1});const a=async()=>{const a=(0,Ke.SU)(t);await a.validate((t=>{!1!==s.isLock?t&&e.dispatch("login",{...s,success(t){"success"===t.result?e.dispatch("login_success",t):(0,rs.z8)({showClose:!0,message:t.result,type:"error"})}}):(0,rs.z8)({showClose:!0,message:"请拖动滑块完成验证",type:"error"})}))},o=e=>{e&&(s.isLock=!0)},l=async e=>{const s=(0,Ke.SU)(t);await s.validate((t=>{e(!!t)}))},r=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/acwing/web/apply_code/",type:"GET",success(e){"success"===e.result&&window.location.replace(e.apply_code_url)},error(){}})},n=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/qq/apply_code/",success(e){"success"===e.result&&window.location.replace(e.apply_code_url)},error(){}})},i=()=>{e.commit("updateBackPage","user_account_login"),tc.push({name:"user_account_phone_login"})},c=()=>{e.commit("updateBackPage","user_account_login"),tc.push({name:"user_account_forget_password"})};return{ruleForm:t,log_info:s,login:a,handlerLock:o,checkVal:l,rules:{username:[{required:!0,message:"用户名不得为空！",trigger:"blur"}],password:[{required:!0,message:"密码不得为空！",trigger:"blur"}]},acwing_login:r,qq_login:n,phone_login:i,forget_password:c}}};const pi=(0,Ct.Z)(di,[["render",si],["__scopeId","data-v-064b4fb0"]]);var mi=pi;const hi=(0,o.Uk)("注册");function gi(e,t,s,a,l,r){const n=(0,o.up)("el-input"),i=(0,o.up)("el-form-item"),c=(0,o.up)("PasswordStrength"),u=(0,o.up)("SliderVerify"),d=(0,o.up)("el-button"),p=(0,o.up)("el-form"),m=(0,o.up)("el-col"),h=(0,o.up)("el-row"),g=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{span:8,offset:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:a.register_info,rules:a.rules,ref:"ruleForm","label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{label:"用户名",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:a.register_info.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.register_info.username=e),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,{label:"密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"password",modelValue:a.register_info.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.register_info.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,{label:"确认密码",prop:"password_confirm"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{type:"password",modelValue:a.register_info.password_confirm,"onUpdate:modelValue":t[2]||(t[2]=e=>a.register_info.password_confirm=e),placeholder:"请输入确认密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{passwordStr:a.register_info.password,"onUpdate:passwordStr":t[3]||(t[3]=e=>a.register_info.password=e),style:{"padding-top":"10px"}},null,8,["passwordStr"]),(0,o.Wm)(u,{prop:"isLock",modelValue:a.register_info.isLock,"onUpdate:modelValue":t[4]||(t[4]=e=>a.register_info.isLock=e),onChange:a.handlerLock,class:"verify",onCheckVal:a.checkVal},null,8,["modelValue","onChange","onCheckVal"]),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"primary",onClick:a.register,style:{width:"100%"}},{default:(0,o.w5)((()=>[hi])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}const wi={id:"container",style:{"margin-bottom":"16px"}};function _i(e,t,s,a,r,n){const i=(0,o.up)("el-progress"),c=(0,o.up)("el-col"),u=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",wi,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:6,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{percentage:r.onePercentage,color:r.oneCustomColors,format:n.oneFormat,"stroke-width":3},null,8,["percentage","color","format"])])),_:1}),(0,o.Wm)(c,{span:6,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{percentage:r.twoPercentage,color:r.twoCustomColors,format:n.twoFormat,"stroke-width":3},null,8,["percentage","color","format"])])),_:1}),(0,o.Wm)(c,{span:6,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{percentage:r.ThreePercentage,color:r.ThreeCustomColors,format:n.ThreeFormat,"stroke-width":3},null,8,["percentage","color","format"])])),_:1}),(0,o.Wm)(c,{span:2,offset:1,style:{"line-height":"15px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(r.content),1)])),_:1})])),_:1})])}var fi={name:"PasswordStrength",model:{event:"change",prop:"passwordStr"},props:{passwordStr:{type:[String,Boolean,Number,Object],required:!0,default:""}},watch:{passwordStr(e){const t=this.checkPasswordStrength(e);switch(t){case 0:this.content="",this.onePercentage=0,this.twoPercentage=0,this.ThreePercentage=0;break;case 1:this.content="弱",this.onePercentage=100,this.twoPercentage=0,this.ThreePercentage=0;break;case 2:this.content="中",this.onePercentage=100,this.twoPercentage=100,this.ThreePercentage=0;break;case 3:this.content="中",this.onePercentage=100,this.twoPercentage=100,this.ThreePercentage=0;break;default:this.content="高",this.onePercentage=100,this.twoPercentage=100,this.ThreePercentage=100;break}}},data(){return{content:"",onePercentage:0,twoPercentage:0,ThreePercentage:0,oneCustomColors:[{color:"#f56c6c",percentage:100}],twoCustomColors:[{color:"#e6a23c",percentage:100}],ThreeCustomColors:[{color:"#67c23a",percentage:100}]}},methods:{oneFormat(){return""},twoFormat(){return""},ThreeFormat(){return""},checkPasswordStrength(e){let t=0;return e.length<1||(/\d/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/\W/.test(e)&&t++),t}}};const ki=(0,Ct.Z)(fi,[["render",_i],["__scopeId","data-v-bb0d4b3c"]]);var yi=ki,vi={name:"UserAccountRegisterView",components:{ContentField:Cl,SliderVerify:ui,PasswordStrength:yi},setup(){const e=(0,q.oR)(),t=(0,Ke.iH)(null);let s=(0,Ke.qj)({username:"",password:"",password_confirm:"",isLock:!1});const a=async()=>{const a=(0,Ke.SU)(t);await a.validate((t=>{!1!==s.isLock?t&&bs().ajax({url:"https://aigame.zzqahm.top/backend/player/register/",type:"post",data:s,success(t){"success"===t.result?e.dispatch("login",{username:s.username,password:s.password,success(t){e.dispatch("login_success",t)}}):(0,rs.z8)({showClose:!0,message:t.result,type:"error"})},error(){}}):(0,rs.z8)({showClose:!0,message:"请拖动滑块完成验证",type:"error"})}))},o=e=>{e&&(s.isLock=!0)},l=(e,t,s)=>{if(!/[a-zA-Z0-9]{6,}/.test(t))return s(new Error("密码未达到强度"));s()},r=async e=>{const s=(0,Ke.SU)(t);await s.validate((t=>{e(!!t)}))};return{ruleForm:t,register_info:s,register:a,handlerLock:o,checkVal:r,rules:{username:[{required:!0,message:"用户名不得为空！",trigger:"blur"},{min:3,max:18,message:"长度在 3 到 18 个字符",trigger:"blur"}],password:[{required:!0,message:"密码不得为空！",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:l,trigger:"blur"}],password_confirm:[{required:!0,message:"确认密码不得为空！",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}}};const bi=(0,Ct.Z)(vi,[["render",gi],["__scopeId","data-v-7817b3a7"]]);var Ci=bi;function xi(e,t,s,a,l,r){return(0,o.wg)(),(0,o.iD)("div")}var Wi={name:"UserAccountAcWingWebReceiveCodeView",setup(){const e=(0,j.yj)(),t=(0,q.oR)();bs().ajax({url:"https://aigame.zzqahm.top/backend/player/acwing/web/receive_code/",type:"GET",data:{code:e.query.code,state:e.query.state},success(e){"success"===e.result?t.dispatch("login_success",e):tc.push({name:"user_account_login"})},error(){}})}};const Si=(0,Ct.Z)(Wi,[["render",xi]]);var zi=Si;function Ii(e,t,s,a,l,r){return(0,o.wg)(),(0,o.iD)("div")}var Ui={name:"UserAccountQQReceiveCodeView",setup(){const e=(0,j.yj)(),t=(0,q.oR)();bs().ajax({url:"https://aigame.zzqahm.top/backend/player/qq/receive_code/",type:"GET",data:{code:e.query.code,state:e.query.state},success(e){"success"===e.result?t.dispatch("login_success",e):tc.push({name:"user_account_login"})},error(){}})}};const Vi=(0,Ct.Z)(Ui,[["render",Ii]]);var qi=Vi;const ji={key:0},Mi={key:0,class:"verify-code-prompt"},Di=(0,o.Uk)("登录");function Pi(e,t,s,a,r,n){const i=(0,o.up)("el-button"),c=(0,o.up)("el-input"),u=(0,o.up)("el-form-item"),d=(0,o.up)("SliderVerify"),p=(0,o.up)("el-form"),m=(0,o.up)("el-col"),h=(0,o.up)("el-row"),g=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{span:8,offset:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{ref:"loginForm",model:a.log_info,rules:a.rules,"label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"手机号",prop:"phone"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{placeholder:"Please input phone",clearable:"",modelValue:a.log_info.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>a.log_info.phone=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.iD)("span",ji,"已发送("+(0,l.zw)(e.$store.state.utils.verifyCodeTime)+")",1)):((0,o.wg)(),(0,o.iD)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>a.send_msg&&a.send_msg(...e))},"发送验证码"))])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"验证码",prop:"code"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"Please input verification code",clearable:"",modelValue:a.log_info.code,"onUpdate:modelValue":t[2]||(t[2]=e=>a.log_info.code=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{prop:"isLock",modelValue:a.log_info.isLock,"onUpdate:modelValue":t[3]||(t[3]=e=>a.log_info.isLock=e),onChange:a.handlerLock,class:"verify",onCheckVal:a.checkVal},null,8,["modelValue","onChange","onCheckVal"]),e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.iD)("div",Mi,"验证码在5分钟内有效，请及时填写！")):(0,o.kq)("",!0),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"primary",style:{width:"100%"},onClick:a.phone_login},{default:(0,o.w5)((()=>[Di])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}var Bi={name:"UserAccountPhoneLoginView",components:{ContentField:Cl,SliderVerify:ui},setup(){const e=(0,q.oR)();let t=(0,Ke.iH)(null),s=(0,Ke.qj)({phone:"",code:"",isLock:!1});(0,o.bv)((()=>{null===e.state.utils.gameUtils&&e.commit("updateGameUtils",new ns(e))}));const a=()=>{e.dispatch("send_msg",{phone:s.phone,flag:"login"})},l=async()=>{const a=(0,Ke.SU)(t);await a.validate((t=>{!1!==s.isLock?t&&bs().ajax({url:"https://aigame.zzqahm.top/backend/player/phone_login/",type:"POST",data:{phone:s.phone,code:s.code},success(t){"success"===t.result?(e.dispatch("login_success",t),e.commit("updateShowVerifyCode",!1)):(0,rs.z8)({showClose:!0,message:t.result,type:"error"})}}):(0,rs.z8)({showClose:!0,message:"请拖动滑块完成验证",type:"error"})}))},r=e=>{e&&(s.isLock=!0)},n=async e=>{const s=(0,Ke.SU)(t);await s.validate((t=>{e(!!t)}))},i=(e,t,s)=>{if(!/^1[3-9]\d{9}$/.test(t))return s(new Error("不是合法的电话号码"));s()};return{log_info:s,loginForm:t,send_msg:a,phone_login:l,handlerLock:r,checkVal:n,rules:{phone:[{required:!0,message:"手机号不得为空！",trigger:"blur"},{validator:i,trigger:"blur"}],code:[{required:!0,message:"验证码不得为空！",trigger:"blur"},{min:4,max:4,message:"请输入4为数字",trigger:"blur"}]}}}};const Oi=(0,Ct.Z)(Bi,[["render",Pi],["__scopeId","data-v-05c00671"]]);var $i=Oi;const Li={key:0},Ri={key:0,class:"verify-code-prompt"},Ti=(0,o.Uk)("修改密码"),Ni=(0,o.Uk)("确认修改");function Hi(e,t,s,a,r,n){const i=(0,o.up)("el-button"),c=(0,o.up)("el-input"),u=(0,o.up)("el-form-item"),d=(0,o.up)("SliderVerify"),p=(0,o.up)("el-form"),m=(0,o.up)("PasswordStrength"),h=(0,o.up)("el-col"),g=(0,o.up)("el-row"),w=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{span:8,offset:8},{default:(0,o.w5)((()=>[a.isVerifySuccess?((0,o.wg)(),(0,o.j4)(p,{key:1,ref:"passwordForm",model:a.password_info,rules:a.password_rules,"label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{type:"password",placeholder:"Please input password",clearable:"",modelValue:a.password_info.password,"onUpdate:modelValue":t[4]||(t[4]=e=>a.password_info.password=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"确认密码",prop:"password_confirm"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{type:"password",placeholder:"Please input again",clearable:"",modelValue:a.password_info.password_confirm,"onUpdate:modelValue":t[5]||(t[5]=e=>a.password_info.password_confirm=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(m,{passwordStr:a.password_info.password,"onUpdate:passwordStr":t[6]||(t[6]=e=>a.password_info.password=e),style:{"padding-top":"10px"}},null,8,["passwordStr"]),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"primary",style:{width:"100%"},onClick:a.update_password},{default:(0,o.w5)((()=>[Ni])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])):((0,o.wg)(),(0,o.j4)(p,{key:0,ref:"phoneForm",model:a.phone_info,rules:a.phone_rules,"label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"手机号",prop:"phone"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{placeholder:"Please input phone",clearable:"",modelValue:a.phone_info.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>a.phone_info.phone=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.iD)("span",Li,"已发送("+(0,l.zw)(e.$store.state.utils.verifyCodeTime)+")",1)):((0,o.wg)(),(0,o.iD)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>a.send_msg&&a.send_msg(...e))},"发送验证码"))])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"验证码",prop:"code"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"Please input verification code",clearable:"",modelValue:a.phone_info.code,"onUpdate:modelValue":t[2]||(t[2]=e=>a.phone_info.code=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{prop:"isLock",modelValue:a.password_info.isLock,"onUpdate:modelValue":t[3]||(t[3]=e=>a.password_info.isLock=e),onChange:a.handlerLock,class:"verify",onCheckVal:a.checkVal},null,8,["modelValue","onChange","onCheckVal"]),e.$store.state.utils.showVerifyCode?((0,o.wg)(),(0,o.iD)("div",Ri,"验证码在5分钟内有效，请及时填写！")):(0,o.kq)("",!0),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"primary",style:{width:"100%"},onClick:a.enterUpdatePassword},{default:(0,o.w5)((()=>[Ti])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]))])),_:1})])),_:1})])),_:1})}var Fi={name:"UserAccountUpdatePasswordView",components:{ContentField:Cl,PasswordStrength:yi,SliderVerify:ui},setup(){const e=(0,q.oR)();let t=(0,Ke.iH)(null),s=(0,Ke.iH)(null),a=(0,Ke.qj)({phone:"",code:""}),l=(0,Ke.qj)({password:"",password_confirm:"",state:"",isLock:!1}),r=(0,Ke.iH)(!1);(0,o.bv)((()=>{null===e.state.utils.gameUtils&&e.commit("updateGameUtils",new ns(e))}));const n=()=>{e.dispatch("send_msg",{phone:a.phone,flag:"update_password"})},i=async()=>{const e=(0,Ke.SU)(t);await e.validate((e=>{!1!==l.isLock?e&&bs().ajax({url:"https://aigame.zzqahm.top/backend/player/verify_code/",type:"post",data:{phone:a.phone,code:a.code},success(e){"success"===e.result?(r.value=!0,l.state=e.state,(0,rs.z8)({showClose:!0,message:"验证成功，请在五分钟内修改好密码！",type:"success"})):(0,rs.z8)({showClose:!0,message:e.result,type:"error"})}}):(0,rs.z8)({showClose:!0,message:"请拖动滑块完成验证",type:"error"})}))},c=async()=>{const e=(0,Ke.SU)(s);await e.validate((e=>{e&&bs().ajax({url:"https://aigame.zzqahm.top/backend/player/update_password/",type:"post",data:{state:l.state,password:l.password,password_confirm:l.password_confirm},success(e){"success"===e.result?((0,rs.z8)({showClose:!0,message:"修改成功，快去登陆吧！",type:"success"}),tc.push({name:"user_account_login"})):(0,rs.z8)({showClose:!0,message:e.result,type:"error"})}})}))},u=(e,t,s)=>{if(!/[a-zA-Z0-9]{6,}/.test(t))return s(new Error("密码未达到强度"));s()},d=(e,t,s)=>{if(!/^1[3-9]\d{9}$/.test(t))return s(new Error("不是合法的电话号码"));s()},p=e=>{e&&(l.isLock=!0)},m=async e=>{const s=(0,Ke.SU)(t);await s.validate((t=>{e(!!t)}))};return{phone_info:a,password_info:l,phoneForm:t,passwordForm:s,send_msg:n,isVerifySuccess:r,enterUpdatePassword:i,handlerLock:p,checkVal:m,update_password:c,phone_rules:{phone:[{required:!0,message:"手机号不得为空！",trigger:"blur"},{validator:d,trigger:"blur"}],code:[{required:!0,message:"验证码不得为空！",trigger:"blur"},{min:4,max:4,message:"请输入4为数字",trigger:"blur"}]},password_rules:{password:[{required:!0,message:"密码不得为空！",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:u,trigger:"blur"}],password_confirm:[{required:!0,message:"确认密码不得为空！",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}}};const Ei=(0,Ct.Z)(Fi,[["render",Hi],["__scopeId","data-v-fac10cfc"]]);var Ai=Ei,Gi={state:{id:null===JSON.parse(localStorage.getItem("user"))?0:JSON.parse(localStorage.getItem("user")).id,username:null===JSON.parse(localStorage.getItem("user"))?"":JSON.parse(localStorage.getItem("user")).username,photo:null===JSON.parse(localStorage.getItem("user"))?"":JSON.parse(localStorage.getItem("user")).photo,job:null===JSON.parse(localStorage.getItem("user"))?"":JSON.parse(localStorage.getItem("user")).job,desp:null===JSON.parse(localStorage.getItem("user"))?"":JSON.parse(localStorage.getItem("user")).desp,recordCnt:null===JSON.parse(localStorage.getItem("user"))?0:JSON.parse(localStorage.getItem("user")).recordCnt,botCnt:null===JSON.parse(localStorage.getItem("user"))?0:JSON.parse(localStorage.getItem("user")).botCnt,freshNewsCnt:null===JSON.parse(localStorage.getItem("user"))?0:JSON.parse(localStorage.getItem("user")).freshNewsCnt,isSuperUser:null!==JSON.parse(localStorage.getItem("user"))&&JSON.parse(localStorage.getItem("user")).isSuperUser,phone:null===JSON.parse(localStorage.getItem("user"))?"":JSON.parse(localStorage.getItem("user")).phone,access:null===localStorage.getItem("aigame.access")?"":localStorage.getItem("aigame.access"),refresh:null===localStorage.getItem("aigame.refresh")?"":localStorage.getItem("aigame.refresh"),is_login:null!==JSON.parse(localStorage.getItem("user"))&&JSON.parse(localStorage.getItem("user")).is_login,interval_func:0},getters:{},mutations:{updateUser(e,t){e.id=t.id,e.username=t.username,e.photo=t.photo,e.is_login=t.is_login,e.job=t.job,e.desp=t.desp,e.botCnt=t.botCnt,e.recordCnt=t.recordCnt,e.freshNewsCnt=t.freshNewsCnt,e.isSuperUser=t.isSuperUser,e.phone=t.phone,localStorage.setItem("user",JSON.stringify(t))},updateToken(e,t){localStorage.setItem("aigame.access",t.access),localStorage.setItem("aigame.refresh",t.refresh),e.access=t.access,e.refresh=t.refresh},logout(e){e.id=0,e.username="",e.photo="",e.is_login=!1,Qi.job="",Qi.desp="",Qi.botCnt=0,Qi.recordCnt=0,Qi.freshNewsCnt=0,e.isSuperUser=!1,e.phone="",e.access="",e.refresh=""},setIntervalFunc(e,t){let s=localStorage.getItem("intervalFunc");null!==s&&clearInterval(s),e.interval_func=t,localStorage.setItem("intervalFunc",t)}},actions:{login(e,t){bs().ajax({url:"https://aigame.zzqahm.top/backend/player/token/",type:"post",data:{username:t.username,password:t.password},success(e){t.success(e)},error(){t.error()}})},getinfo(e,t){bs().ajax({url:"https://aigame.zzqahm.top/backend/player/getinfo/",type:"get",headers:{Authorization:"Bearer "+e.rootState.user.access},success(s){"success"===s.result?(e.commit("updateUser",{...s,is_login:!0}),t.success()):t.error()},error(){t.error()}})},logout(e){clearInterval(localStorage.getItem("intervalFunc")),localStorage.removeItem("aigame.access"),localStorage.removeItem("aigame.refresh"),localStorage.removeItem("intervalFunc"),localStorage.removeItem("user"),e.commit("logout"),e.commit("updateHallSocket",null),e.commit("updateHallSocketHeartbeat",null),tc.push({name:"user_account_login"})},refresh_access(e,t){const s=()=>{bs().ajax({url:"https://aigame.zzqahm.top/backend/player/token/refresh/",type:"post",data:{refresh:t},success(s){e.commit("updateToken",{access:s.access,refresh:t}),bs().ajax({url:"https://aigame.zzqahm.top/backend/player/token/update/",type:"post",headers:{Authorization:"Bearer "+s.access},data:{token:s.access},error(){e.dispatch("logout")}})},error(){e.dispatch("logout")}})},a=(e,t)=>(e(),setInterval(e,t));e.rootState.user.interval_func&&clearInterval(e.rootState.user.interval_func);let o=a(s,33e5);e.commit("setIntervalFunc",o)},login_success(e,t){e.commit("updateToken",t),e.dispatch("refresh_access",t.refresh),(0,rs.z8)({showClose:!0,message:"登录成功！",type:"success"}),e.dispatch("getinfo",{success(){tc.push({name:"home"}),e.dispatch("connectHallSocket")},error(){e.dispatch("logout")}})}},modules:{}},Zi={state:{status:"matching",socket:null,opponent_username:"",opponent_photo:"",gamemap:null,a_id:0,a_language:"",a_is_robot:!1,b_id:0,b_language:"",b_is_robot:!1,aCnt:2,bCnt:2,gameObject:null,loser:"none",type:"none",msgs:[],canSendMsg:!1,codeOutMsg:"",firstMove:null,dir:-1},getters:{},mutations:{updateSocket(e,t){e.socket=t},updateOpponent(e,t){e.opponent_username=t.username,e.opponent_photo=t.photo},updateStatus(e,t){e.status=t},updateSnakeGame(e,t){e.gamemap=t.map,e.a_id=parseInt(t.a_id),e.a_language=t.a_language,e.a_is_robot=Boolean(t.a_is_robot),e.b_id=parseInt(t.b_id),e.b_language=t.b_language,e.b_is_robot=Boolean(t.b_is_robot)},updateChessGame(e,t){e.a_id=parseInt(t.a_id),e.a_language=t.a_language,e.a_is_robot=Boolean(t.a_is_robot),e.b_id=parseInt(t.b_id),e.b_language=t.b_language,e.b_is_robot=Boolean(t.b_is_robot),e.firstMove=t.current_round},updateFirstMove(e,t){e.firstMove=t},updateGameObject(e,t){e.gameObject=t},updateGameResult(e,t){e.loser=t.loser,e.type=t.status},updateChessCnt(e,t){e.aCnt=t.aCnt,e.bCnt=t.bCnt},pushMsg(e,t){t.id=e.msgs.length+1,e.msgs.push(t)},clearMsg(e){e.msgs=[]},updateCanSendMsg(e,t){e.canSendMsg=t},addCodeOutMsg(e,t){e.codeOutMsg+=t},clearCodeOutMsg(e){e.codeOutMsg=""},updateDir(e,t){e.dir=t}},actions:{},modules:{}},Ji=s(6666),Yi={state:{hall_socket_url:"wss://aigame.zzqahm.top/wss/hall/?token=",hall_socket:null,hall_socket_heartbeat:null,hall_msgs:[],hall_can_send_msg:!1,is_record:!1,a_steps:"",b_steps:"",record_loser:"",a_username:"",a_photo:"",b_username:"",b_photo:"",a_is_robot:!1,b_is_robot:!1,a_language:"",b_language:""},getters:{},mutations:{updateHallSocket(e,t){t||null===e.hall_socket||(e.hall_can_send_msg=!1,e.hall_socket.close()),e.hall_socket=t},updateHallSocketHeartbeat(e,t){e.hall_socket_heartbeat&&clearInterval(e.hall_socket_heartbeat),e.hall_socket_heartbeat=t},updateHallCanSendMsg(e,t){e.hall_can_send_msg=t},pushHallMsg(e,t){t.id=e.hall_msgs.length+1,e.hall_msgs.push(t)},updateIsRecord(e,t){e.is_record=t},updateSteps(e,t){e.a_steps=t.a_steps,e.b_steps=t.b_steps},updateRecordLoser(e,t){e.record_loser=t},updatePlayerInfo(e,t){e.a_username=t.a_username,e.a_photo=t.a_photo,e.a_language=t.a_language,e.b_username=t.b_username,e.b_photo=t.b_photo,e.b_language=t.b_language},updateIsRobot(e,t){e.a_is_robot=Boolean(t.a_is_robot),e.b_is_robot=Boolean(t.b_is_robot)}},actions:{connectHallSocket(e){let t=e.rootState;if(!t.record.hall_socket&&t.user.is_login){e.commit("updateHallSocket",new WebSocket(t.record.hall_socket_url+t.user.access)),t.record.hall_socket.onopen=()=>{console.log("connected!"),(0,rs.z8)({message:"websocket连接成功",type:"success"})},t.record.hall_socket.onmessage=t=>{const s=JSON.parse(t.data);"hall_message"===s.event?e.commit("pushHallMsg",s.msg):"freshnews_notification"===s.event?(0,Ji.bM)({title:s.data.title,message:(0,o.h)("i",{style:"color: teal"},"您的动态【"+s.data.msg+"】被【"+s.data.username+"】回复!")}):"verifycode_error"===s.event?(0,rs.z8)({showClose:!0,message:s.data.msg,type:"error"}):"account_notification"===s.event&&((0,Ji.bM)({title:s.data.title,message:(0,o.h)("i",{style:"color: teal"},s.data.msg)}),e.dispatch("logout"))},t.record.hall_socket.onclose=()=>{console.log("disconnected!"),(0,rs.z8)({message:"websocket连接断开，请刷新页面或重新登录！",type:"warning"}),e.commit("updateHallSocket",null),e.commit("updateHallSocketHeartbeat",null)};let s=setInterval((()=>{t.record.hall_socket.send(JSON.stringify({event:"heartbeat",userId:t.user.id}))}),285e3);e.commit("updateHallSocketHeartbeat",s),e.commit("updateHallCanSendMsg",!0)}}},modules:{}},Ki={state:{gameUtils:null,matchTime:0,isMatch:!1,verifyCodeTime:300,showVerifyCode:!1},getters:{},mutations:{updateGameUtils(e,t){e.gameUtils=t},updateIsMatch(e,t){e.gameUtils.initMatchTime(),e.isMatch=t},clearMatchTime(e,t){e.matchTime=t},updateMatchTime(e,t){e.matchTime=t},updateShowVerifyCode(e,t){e.gameUtils.initVerifyCodeTime(),e.showVerifyCode=t},updateVerifyCodeTime(e,t){e.verifyCodeTime=t}},actions:{uploadImage(e,t){const s="https://aigame.zzqahm.top/backend/player/img/apply/";bs().ajax({url:s,type:"GET",data:{filename:t.file.name,userId:t.userId},success:s=>{s=bs().parseJSON(s);let a="https://player-avatar.oss-cn-shenzhen.aliyuncs.com",o=t.file.name.lastIndexOf("."),l=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))+t.file.name.substr(o),r=s.dir+"/"+l,n=new FormData;n.append("OSSAccessKeyId",s.accessid),n.append("policy",s.policy),n.append("signature",s.signature),n.append("keys",s.dir),n.append("callback",s.callback),n.append("key",r),n.append("success_action_status",200),n.append("type",t.file.type),n.append("file",t.file),bs().ajax({url:a,type:"POST",cache:!1,contentType:!1,processData:!1,data:n,success(e){t.success(e.imgUrl,l)},error(){e.dispatch("logout")}})},error(){e.dispatch("logout")}})},getGameIntro(e,t){bs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/game_intro/get/"+t.id,type:"get",success(e){t.success(e)},error(){e.dispatch("logout")}})},send_msg(e,t){e.rootState.utils.showVerifyCode||(null!==t.phone&&""!==t.phone?/^1[3-9]\d{9}$/.test(t.phone)?bs().ajax({url:"https://aigame.zzqahm.top/backend/player/send_msg/",type:"POST",headers:{Authorization:"login"===t.flag||"update_password"===t.flag?"":"Bearer "+e.rootState.user.access},data:{phone:t.phone,flag:t.flag},success(t){"success"===t.result?(e.commit("updateShowVerifyCode",!0),(0,rs.z8)({showClose:!0,message:"发送成功",type:"success"})):(0,rs.z8)({showClose:!0,message:t.result,type:"error"})},error(){e.dispatch("logout")}}):(0,rs.z8)({showClose:!0,message:"不是合法的电话号码",type:"error"}):(0,rs.z8)({showClose:!0,message:"请先输入电话号码",type:"error"}))}},modules:{}},Qi=(0,q.MT)({state:{backPage:""},getters:{},mutations:{updateBackPage(e,t){e.backPage=t}},actions:{},modules:{user:Gi,pk:Zi,record:Yi,utils:Ki}});const Xi=[{path:"/",name:"home",redirect:"/intro/",meta:{description:"首页",isRoot:!0}},{path:"/pk/:game/",name:"pk_index",component:us,meta:{description:"对战界面",isRoot:!1}},{path:"/record/",name:"record_index",component:ka,meta:{description:"对战列表",isRoot:!0}},{path:"/record/:recordId/",name:"record_content",component:Ca,meta:{description:"回放界面",isRoot:!1}},{path:"/ranklist/",name:"ranklist_index",component:Ws,meta:{description:"排行榜",isRoot:!0}},{path:"/fresh_news/",name:"fresh_news_index",component:wl,meta:{description:"新鲜事",isRoot:!0}},{path:"/message_board/",name:"message_board_index",component:Sl,meta:{description:"留言板",isRoot:!0}},{path:"/myspace/:userId/",name:"myspace_index",component:Xr,meta:{description:"我的空间",isRoot:!1}},{path:"/intro/",name:"intro_index",component:Un,meta:{description:"网站说明",isRoot:!0}},{path:"/game_intro/",name:"game_intro_index",component:Mn,meta:{description:"游戏介绍",isRoot:!1}},{path:"/codehelper/",name:"code_helper_index",component:On,meta:{description:"代码编写指南",isRoot:!1}},{path:"/func_intro/",name:"func_intro_index",component:Tn,meta:{description:"网站功能介绍",isRoot:!1}},{path:"/user/account/login/",name:"user_account_login",component:mi,meta:{description:"登录",isRoot:!0}},{path:"/user/account/forget_password/",name:"user_account_forget_password",component:Ai,meta:{description:"找回密码",isRoot:!1}},{path:"/user/account/phone_login/",name:"user_account_phone_login",component:$i,meta:{description:"手机验证码登录",isRoot:!1}},{path:"/user/account/register/",name:"user_account_register",component:Ci,meta:{description:"注册",isRoot:!0}},{path:"/player/acwing/web/receive_code/",name:"player_acwing_web_receive_code",component:zi,meta:{description:"",isRoot:!0}},{path:"/user/personal_info",name:"personal_info",component:mn,meta:{description:"个人信息",isRoot:!0}},{path:"/player/qq/receive_code/",name:"player_qq_receive_code",component:qi,meta:{description:"",isRoot:!0}},{path:"/404/",name:"404",component:An,meta:{description:"",isRoot:!0}},{path:"/:catchAll(.*)",redirect:"/404/"}],ec=(0,j.p7)({history:(0,j.PO)(),routes:Xi});ec.beforeEach((e=>{e.meta.isRoot&&Qi.commit("updateBackPage","")}));var tc=ec,sc={name:"App",components:{Expand:un.Expand,Fold:un.Fold},setup(){const e=(0,q.oR)(),t=(0,j.yj)(),s=(0,Ke.iH)("");let a=(0,Ke.iH)(!1),l=(0,Ke.iH)(!1);const r=()=>{e.dispatch("logout")};(0,o.YP)((()=>t.name),(()=>{s.value=t.meta.description}));const n=()=>{a.value=!a.value},i=()=>{"对战界面"===s.value?l.value=!0:"回放界面"===s.value?tc.push({name:"record_index"}):"手机验证码登录"!==s.value&&"找回密码"!==s.value||tc.push({name:"user_account_login"})},c=()=>{l.value=!1,"playing"===e.state.pk.status||e.state.pk.status,tc.push({name:"record_index"})};return(0,o.bv)((()=>{(0,Ji.bM)({title:"Welcome",message:(0,o.h)("i",{style:"color: teal"},"欢迎来到King Of Bots游戏对战平台！"),offset:70})})),{logout:r,page:s,collapse:n,isCollapse:a,showBackDialog:l,showConfirmBack:i,clickBack:c}},mounted(){const e=(0,q.oR)();let t=0,s=0;window.onunload=()=>{s=(new Date).getTime()-t,s<=5&&(localStorage.removeItem("aigame.access"),localStorage.removeItem("aigame.refresh"),localStorage.removeItem("intervalFunc"),localStorage.removeItem("user"))},window.onbeforeunload=()=>{t=(new Date).getTime()},window.onload=()=>{let t=localStorage.getItem("aigame.refresh");t&&e.dispatch("refresh_access",t),e.dispatch("connectHallSocket")}}};const ac=(0,Ct.Z)(sc,[["render",V]]);var oc=ac,lc=s(7239),rc=(s(4415),s(7709)),nc=s.n(rc),ic=s(9498),cc=s.n(ic),uc=s(2386),dc=s(3083),pc=s(4198),mc=s(1691),hc=s(9484),gc=s(5697),wc=s(164),_c=s.n(wc),fc=s(187),kc=s.n(fc);nc().use(_c(),{Prism:kc()}).use((0,uc.Z)()).use((0,dc.Z)()).use((0,pc.Z)()).use((0,mc.Z)()).use((0,hc.Z)()).use((0,gc.Z)()),cc().use(_c(),{Prism:kc()}).use((0,uc.Z)()).use((0,dc.Z)()).use((0,pc.Z)()).use((0,mc.Z)()).use((0,hc.Z)()).use((0,gc.Z)());const yc=(0,a.ri)(oc);yc.use(lc.Z),yc.use(nc()),yc.use(cc());for(const[vc,bc]of Object.entries(un))yc.component(vc,bc);yc.use(Qi).use(tc).mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){s.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];s.O=function(t,a,o,l){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],l=e[u][2];for(var n=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(n=!1,l<r&&(r=l));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,r=a[0],n=a[1],i=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(i)var u=i(s)}for(t&&t(a);c<r.length;c++)l=r[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(u)},a=self["webpackChunkaigame_web"]=self["webpackChunkaigame_web"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(2113)}));a=s.O(a)})();
//# sourceMappingURL=app.d096ce2b.js.map