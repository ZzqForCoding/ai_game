(function(){"use strict";var e={6839:function(e,t,s){var a=s(9242),o=s(3396),l=s(7139);const r=(0,o._)("div",{class:"aside-header"},[(0,o._)("svg",{t:"1660362934898",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1502",width:"25",height:"25"},[(0,o._)("path",{d:"M661.333333 490.666667c-36.266667 0-64 27.733333-64 64s27.733333 64 64 64 64-27.733333 64-64-27.733333-64-64-64M362.666667 490.666667c-36.266667 0-64 27.733333-64 64s27.733333 64 64 64 64-27.733333 64-64-27.733333-64-64-64",fill:"#2F3CF4","p-id":"1503"}),(0,o._)("path",{d:"M128 320c0-23.466667 19.2-42.666667 42.666667-42.666667h170.666666l-61.866666-155.733333c-8.533333-21.333333 2.133333-46.933333 23.466666-55.466667 21.333333-8.533333 46.933333 2.133333 55.466667 23.466667l74.666667 185.6h155.733333l74.666667-185.6c8.533333-21.333333 34.133333-32 55.466666-23.466667 21.333333 8.533333 32 34.133333 23.466667 55.466667L682.666667 277.333333h170.666666c23.466667 0 42.666667 19.2 42.666667 42.666667v597.333333c0 23.466667-19.2 42.666667-42.666667 42.666667H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667V320z m85.333333 42.666667v512h597.333334V362.666667H213.333333zM1024 725.333333V512c0-23.466667-19.2-42.666667-42.666667-42.666667s-42.666667 19.2-42.666666 42.666667v213.333333c0 23.466667 19.2 42.666667 42.666666 42.666667s42.666667-19.2 42.666667-42.666667M42.666667 768c23.466667 0 42.666667-19.2 42.666666-42.666667V512c0-23.466667-19.2-42.666667-42.666666-42.666667s-42.666667 19.2-42.666667 42.666667v213.333333c0 23.466667 19.2 42.666667 42.666667 42.666667",fill:"#2F3CF4","p-id":"1504"})]),(0,o._)("span",{style:{"margin-left":"5px"}},"AiGame Platform")],-1),i=(0,o._)("span",null,"Apps",-1),n=(0,o.Uk)("敬请期待..."),c=(0,o.Uk)("首页"),u=(0,o.Uk)("排行榜"),d=(0,o.Uk)("动态"),m=(0,o.Uk)("讨论区"),p=(0,o.Uk)("留言板"),h={class:"current-page"},g={key:0},_={key:1},w={class:"dialog-footer"},f=(0,o.Uk)("取消"),k=(0,o.Uk)("确认"),v=(0,o._)("div",{class:"flex-grow"},null,-1),y={class:"el-dropdown-link"},b={class:"username"},x=(0,o.Uk)("我的Bot"),C=(0,o.Uk)("退出"),W=(0,o._)("span",null," 登录 ",-1),z=(0,o._)("span",null," 注册 ",-1),S=(0,o._)("div",{class:"footer"},null,-1),M=(0,o._)("div",{class:"footer-icon"},[(0,o._)("svg",{t:"1660657940962",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3310",width:"25",height:"25"},[(0,o._)("path",{d:"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z m0 896c-212.032 0-384-171.968-384-384S299.968 128 512 128s384 171.968 384 384-171.968 384-384 384z m94.08-513.408L512 192.064l-94.016 190.528-210.304 30.592 152.192 148.288-35.968 209.344L512 672l188.032 98.88-35.904-209.344 152.128-148.288-210.176-30.656z",fill:"#ffffff","p-id":"3311"})])],-1);function I(e,t,s,a,I,V){const q=(0,o.up)("Grid"),U=(0,o.up)("el-icon"),D=(0,o.up)("el-menu-item"),$=(0,o.up)("el-menu-item-group"),P=(0,o.up)("el-sub-menu"),B=(0,o.up)("HomeFilled"),L=(0,o.up)("router-link"),j=(0,o.up)("DataLine"),T=(0,o.up)("Promotion"),R=(0,o.up)("Comment"),O=(0,o.up)("Edit"),F=(0,o.up)("Expand"),H=(0,o.up)("Fold"),E=(0,o.up)("el-button"),A=(0,o.up)("el-scrollbar"),G=(0,o.up)("el-menu"),N=(0,o.up)("el-aside"),Z=(0,o.up)("Back"),J=(0,o.up)("el-dialog"),K=(0,o.up)("el-avatar"),Y=(0,o.up)("arrow-down"),X=(0,o.up)("el-dropdown-item"),Q=(0,o.up)("el-dropdown-menu"),ee=(0,o.up)("el-dropdown"),te=(0,o.up)("el-header"),se=(0,o.up)("router-view"),ae=(0,o.up)("el-main"),oe=(0,o.up)("el-footer"),le=(0,o.up)("el-container");return(0,o.wg)(),(0,o.j4)(le,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N,{width:"200px",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[r,(0,o.Wm)(G,{class:"el-aside-menu","background-color":"rgb(13,66,118)","text-color":"#CCCCCC","active-text-color":"#fff",collapse:a.isCollapse},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"aside-scrollbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{index:"1"},{title:(0,o.w5)((()=>[(0,o.Wm)(U,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(q)])),_:1}),i])),default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"1-3",disabled:""},{default:(0,o.w5)((()=>[n])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{class:"link-text",to:{name:"record_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"2"},{title:(0,o.w5)((()=>[c])),default:(0,o.w5)((()=>[(0,o.Wm)(U,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(B)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{class:"link-text",to:{name:"ranklist_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"3"},{title:(0,o.w5)((()=>[u])),default:(0,o.w5)((()=>[(0,o.Wm)(U,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(j)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{class:"link-text",to:{name:"fresh_news_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"4"},{title:(0,o.w5)((()=>[d])),default:(0,o.w5)((()=>[(0,o.Wm)(U,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{class:"link-text",to:{name:"discussion_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"5"},{title:(0,o.w5)((()=>[m])),default:(0,o.w5)((()=>[(0,o.Wm)(U,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(R)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{class:"link-text",to:{name:"message_board_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"6"},{title:(0,o.w5)((()=>[p])),default:(0,o.w5)((()=>[(0,o.Wm)(U,{size:30},{default:(0,o.w5)((()=>[(0,o.Wm)(O)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(E,{onClick:a.collapse,circle:"",class:"collapse-btn",color:"#626aef"},{default:(0,o.w5)((()=>[a.isCollapse?((0,o.wg)(),(0,o.j4)(U,{key:0,size:17},{default:(0,o.w5)((()=>[(0,o.Wm)(F)])),_:1})):((0,o.wg)(),(0,o.j4)(U,{key:1,size:17},{default:(0,o.w5)((()=>[(0,o.Wm)(H)])),_:1}))])),_:1},8,["onClick"])])),_:1})])),_:1},8,["collapse"])])),_:1}),(0,o.Wm)(le,{class:"right-container"},{default:(0,o.w5)((()=>[(0,o.Wm)(te,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(G,{"default-active":e.activeIndex,mode:"horizontal",ellipsis:!1,onSelect:e.handleSelect},{default:(0,o.w5)((()=>[(0,o._)("div",h,[""!==e.$store.state.backPage?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"back-menu",onClick:t[0]||(t[0]=(...e)=>a.showConfirmBack&&a.showConfirmBack(...e))},[(0,o.Wm)(U,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(Z)])),_:1})])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,l.zw)(a.page),1)]),(0,o.Wm)(J,{modelValue:a.showBackDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.showBackDialog=e),title:"Warning",width:"30%","align-center":"",draggable:""},{footer:(0,o.w5)((()=>[(0,o._)("span",w,[(0,o.Wm)(E,{onClick:t[1]||(t[1]=e=>a.showBackDialog=!1)},{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(E,{type:"danger",onClick:a.clickBack},{default:(0,o.w5)((()=>[k])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>["playing"===e.$store.state.pk.status?((0,o.wg)(),(0,o.iD)("span",g," 你确认退出游戏吗？ ")):"matching"===e.$store.state.pk.status?((0,o.wg)(),(0,o.iD)("span",_," 你确认退出匹配吗？ ")):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),v,e.$store.state.user.is_login?((0,o.wg)(),(0,o.j4)(D,{key:0,index:"1",style:{"margin-right":"20px",height:"60px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(ee,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(Q,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{class:"link-text",to:{name:"user_bot_index"}},{default:(0,o.w5)((()=>[(0,o.Wm)(X,null,{default:(0,o.w5)((()=>[x])),_:1})])),_:1}),(0,o.Wm)(X,{divided:"",onClick:a.logout},{default:(0,o.w5)((()=>[C])),_:1},8,["onClick"])])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",y,[(0,o.Wm)(K,{shape:"square",size:50,src:e.$store.state.user.photo,style:{"margin-right":"15px"}},null,8,["src"]),(0,o._)("span",b,(0,l.zw)(e.$store.state.user.username),1),(0,o.Wm)(U,{class:"el-icon--right"},{default:(0,o.w5)((()=>[(0,o.Wm)(Y)])),_:1})])])),_:1})])),_:1})):(0,o.kq)("",!0),e.$store.state.user.is_login||e.$store.state.user.pulling_info?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(L,{key:1,class:"link-text",to:{name:"user_account_login"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"1"},{default:(0,o.w5)((()=>[W])),_:1})])),_:1})),e.$store.state.user.is_login||e.$store.state.user.pulling_info?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(L,{key:2,class:"link-text",to:{name:"user_account_register"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{index:"2"},{default:(0,o.w5)((()=>[z])),_:1})])),_:1}))])),_:1},8,["default-active","onSelect"])])),_:1}),(0,o.Wm)(ae,{class:"main",style:{padding:"0",height:"calc(100vh - 60px - 50px)"}},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"main-scrollbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(se)])),_:1})])),_:1}),(0,o.Wm)(oe,null,{default:(0,o.w5)((()=>[S,M])),_:1})])),_:1})])),_:1})}var V=s(65),q=s(2483);const U=e=>((0,o.dD)("data-v-141f38a6"),e=e(),(0,o.Cn)(),e),D=U((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"公共聊天区")],-1))),$={class:"username"},P={class:"main"},B=(0,o.Uk)("发送");function L(e,t,s,r,i,n){const c=(0,o.up)("PlayGround"),u=(0,o.up)("MatchGround"),d=(0,o.up)("el-col"),m=(0,o.up)("el-avatar"),p=(0,o.up)("el-button"),h=(0,o.up)("el-scrollbar"),g=(0,o.up)("el-card"),_=(0,o.up)("el-input"),w=(0,o.up)("el-form"),f=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{span:14,offset:2},{default:(0,o.w5)((()=>["playing"===e.$store.state.pk.status?((0,o.wg)(),(0,o.j4)(c,{key:0,game:r.game,flag:"pk"},null,8,["game"])):(0,o.kq)("",!0),"matching"===e.$store.state.pk.status?((0,o.wg)(),(0,o.j4)(u,{key:1,operate:r.operate,botId:r.botId},null,8,["operate","botId"])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(d,{span:5,offset:1,style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"message",style:{"user-select":"none"}},{header:(0,o.w5)((()=>[D])),default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"messages",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{"max-height":"150px",ref:"msgScroll"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.pk.msgs,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"message-content",key:t.id},[(0,o._)("div",$,(0,l.zw)(t.username),1),(0,o._)("div",P,[(0,o.Wm)(m,{class:"photo",size:"small",src:t.photo},null,8,["src"]),(0,o.Wm)(p,{round:"",type:e.$store.state.user.username===t.username?"primary":""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t.text),1)])),_:2},1032,["type"])])])))),128))])),_:1},512)])),_:1}),(0,o.Wm)(g,{class:"message-send",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{onSubmit:t[1]||(t[1]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"message-input",autosize:{minRows:6,maxRows:6},type:"textarea",placeholder:"Please input message...",modelValue:r.message,"onUpdate:modelValue":t[0]||(t[0]=e=>r.message=e),resize:"none",onKeydown:(0,a.D2)(r.enterSendMsg,["enter"])},null,8,["modelValue","onKeydown"]),(0,o.Wm)(p,{class:"sendBtn",type:"primary",onClick:r.sendMsg,size:"small"},{default:(0,o.w5)((()=>[B])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}const j=e=>((0,o.dD)("data-v-0b3a5357"),e=e(),(0,o.Cn)(),e),T={class:"playground"},R={key:0,class:"userinfo"},O={class:"userinfo-container"},F={class:"user-profile"},H=["src"],E={class:"username"},A=j((()=>(0,o._)("div",{class:"eye"},null,-1))),G=j((()=>(0,o._)("div",{class:"eye"},null,-1))),N=[A,G],Z={key:3,style:{color:"white","font-size":"18px","font-weight":"600"}},J={key:4,style:{color:"black","font-size":"18px","font-weight":"600"}},K={key:5},Y=j((()=>(0,o._)("svg",{t:"1662877386013",class:"icon",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2479",width:"30",height:"30"},[(0,o._)("path",{d:"M0 512v256c0 35.4 28.6 64 64 64h64V448H64c-35.4 0-64 28.6-64 64zM928 192H704V64c0-35.4-28.6-64-64-64s-64 28.6-64 64v128H352c-88.4 0-160 71.6-160 160v544c0 70.6 57.4 128 128 128h640c70.6 0 128-57.4 128-128V352c0-88.4-71.6-160-160-160zM512 832h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m256 240h-128v-64h128v64z m192 0h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m384-144h-64v384h64c35.4 0 64-28.6 64-64V512c0-35.4-28.6-64-64-64z",fill:"#1296db","p-id":"2480"})],-1))),X=[Y],Q={key:6},ee={key:7},te={key:0,class:"round-msg"},se=j((()=>(0,o._)("span",null,"round",-1))),ae={key:0,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/none.png",alt:""},oe={key:1,class:"direction-msg"},le=j((()=>(0,o._)("span",null,"direction",-1))),re={key:0,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/none.png",alt:""},ie={key:1,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/up.png",alt:""},ne={key:2,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/right.png",alt:""},ce={key:3,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/down.png",alt:""},ue={key:4,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/left.png",alt:""},de={key:2,class:"round-msg"},me=j((()=>(0,o._)("span",null,"round",-1))),pe={key:0,src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/501/none.png",alt:""},he={class:"userinfo-container"},ge={key:0},_e={key:1},we={key:2},fe=j((()=>(0,o._)("svg",{t:"1662877386013",class:"icon",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2479",width:"30",height:"30"},[(0,o._)("path",{d:"M0 512v256c0 35.4 28.6 64 64 64h64V448H64c-35.4 0-64 28.6-64 64zM928 192H704V64c0-35.4-28.6-64-64-64s-64 28.6-64 64v128H352c-88.4 0-160 71.6-160 160v544c0 70.6 57.4 128 128 128h640c70.6 0 128-57.4 128-128V352c0-88.4-71.6-160-160-160zM512 832h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m256 240h-128v-64h128v64z m192 0h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m384-144h-64v384h64c35.4 0 64-28.6 64-64V512c0-35.4-28.6-64-64-64z",fill:"#1296db","p-id":"2480"})],-1))),ke=[fe],ve=j((()=>(0,o._)("div",{class:"eye"},null,-1))),ye=j((()=>(0,o._)("div",{class:"eye"},null,-1))),be=[ve,ye],xe={key:6,style:{color:"white","font-size":"18px","font-weight":"600"}},Ce={key:7,style:{color:"black","font-size":"18px","font-weight":"600"}},We={class:"user-profile"},ze=["src"],Se={class:"username"},Me={key:1,class:"userinfo"},Ie={class:"userinfo-container"},Ve={class:"user-profile"},qe=["src"],Ue={class:"username"},De={key:0,class:"chess",style:{"background-color":"white"}},$e={key:1,class:"body",style:{"background-color":"#4876EC"}},Pe=j((()=>(0,o._)("div",{class:"eye"},null,-1))),Be=j((()=>(0,o._)("div",{class:"eye"},null,-1))),Le=[Pe,Be],je={key:2,class:"chess",style:{"background-color":"white"}},Te={key:3,style:{color:"white","font-size":"18px","font-weight":"600"}},Re={key:4},Oe=j((()=>(0,o._)("svg",{t:"1662877386013",class:"icon",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2479",width:"30",height:"30"},[(0,o._)("path",{d:"M0 512v256c0 35.4 28.6 64 64 64h64V448H64c-35.4 0-64 28.6-64 64zM928 192H704V64c0-35.4-28.6-64-64-64s-64 28.6-64 64v128H352c-88.4 0-160 71.6-160 160v544c0 70.6 57.4 128 128 128h640c70.6 0 128-57.4 128-128V352c0-88.4-71.6-160-160-160zM512 832h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m256 240h-128v-64h128v64z m192 0h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m384-144h-64v384h64c35.4 0 64-28.6 64-64V512c0-35.4-28.6-64-64-64z",fill:"#1296db","p-id":"2480"})],-1))),Fe=[Oe],He={key:5},Ee={class:"userinfo-container"},Ae={key:0},Ge={key:1},Ne=j((()=>(0,o._)("svg",{t:"1662877386013",class:"icon",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2479",width:"30",height:"30"},[(0,o._)("path",{d:"M0 512v256c0 35.4 28.6 64 64 64h64V448H64c-35.4 0-64 28.6-64 64zM928 192H704V64c0-35.4-28.6-64-64-64s-64 28.6-64 64v128H352c-88.4 0-160 71.6-160 160v544c0 70.6 57.4 128 128 128h640c70.6 0 128-57.4 128-128V352c0-88.4-71.6-160-160-160zM512 832h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m256 240h-128v-64h128v64z m192 0h-128v-64h128v64z m-64-240c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m384-144h-64v384h64c35.4 0 64-28.6 64-64V512c0-35.4-28.6-64-64-64z",fill:"#1296db","p-id":"2480"})],-1))),Ze=[Ne],Je={key:2,class:"chess",style:{"background-color":"black"}},Ke={key:3,class:"body",style:{"background-color":"#F94848"}},Ye=j((()=>(0,o._)("div",{class:"eye"},null,-1))),Xe=j((()=>(0,o._)("div",{class:"eye"},null,-1))),Qe=[Ye,Xe],et={key:4,class:"chess",style:{"background-color":"black"}},tt={key:5,style:{color:"black","font-size":"18px","font-weight":"600"}},st={class:"user-profile"},at=["src"],ot={class:"username"};function lt(e,t,s,a,r,i){const n=(0,o.up)("GameMap"),c=(0,o.up)("el-tag");return(0,o.wg)(),(0,o.iD)("div",T,[(0,o.Wm)(n,{game:s.game},null,8,["game"]),"pk"===s.flag?((0,o.wg)(),(0,o.iD)("div",R,[(0,o._)("div",O,[(0,o._)("div",F,[(0,o._)("img",{src:e.$store.state.user.photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,H),(0,o._)("span",E,(0,l.zw)(e.$store.state.user.username),1)]),1===s.game?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: white;":"background-color: black;")},null,4)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"body",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: #4876EC;":"background-color: #F94848;")},N,4)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: white;":"background-color: black;")},null,4)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.a_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",Z,"白子："+(0,l.zw)(e.$store.state.pk.aCnt),1)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.b_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",J,"黑子："+(0,l.zw)(e.$store.state.pk.bCnt),1)):(0,o.kq)("",!0),(e.$store.state.pk.a_id===e.$store.state.user.id?e.$store.state.pk.a_is_robot:e.$store.state.pk.b_is_robot)?((0,o.wg)(),(0,o.iD)("div",K,X)):(0,o.kq)("",!0),e.$store.state.pk.a_id===e.$store.state.user.id&&e.$store.state.pk.a_is_robot?((0,o.wg)(),(0,o.iD)("div",Q,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.a_language),1)])),_:1})])):e.$store.state.pk.b_id===e.$store.state.user.id&&e.$store.state.pk.b_is_robot?((0,o.wg)(),(0,o.iD)("div",ee,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.b_language),1)])),_:1})])):(0,o.kq)("",!0)]),1===s.game?((0,o.wg)(),(0,o.iD)("div",te,[se,null===e.$store.state.pk.firstMove?((0,o.wg)(),(0,o.iD)("img",ae)):((0,o.wg)(),(0,o.iD)("div",{key:1,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.pk.firstMove?"background-color: white;":"background-color: black;")},null,4))])):2===s.game?((0,o.wg)(),(0,o.iD)("div",oe,[le,-1===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",re)):0===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",ie)):1===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",ne)):2===e.$store.state.pk.dir?((0,o.wg)(),(0,o.iD)("img",ce)):((0,o.wg)(),(0,o.iD)("img",ue))])):3===s.game?((0,o.wg)(),(0,o.iD)("div",de,[me,null===e.$store.state.pk.firstMove?((0,o.wg)(),(0,o.iD)("img",pe)):((0,o.wg)(),(0,o.iD)("div",{key:1,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.pk.firstMove?"background-color: white;":"background-color: black;")},null,4))])):(0,o.kq)("",!0),(0,o._)("div",he,[e.$store.state.pk.a_id===e.$store.state.user.id&&e.$store.state.pk.b_is_robot?((0,o.wg)(),(0,o.iD)("div",ge,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.b_language),1)])),_:1})])):e.$store.state.pk.b_id==e.$store.state.user.id&&e.$store.state.pk.a_is_robot?((0,o.wg)(),(0,o.iD)("div",_e,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.pk.a_language),1)])),_:1})])):(0,o.kq)("",!0),(e.$store.state.pk.a_id===e.$store.state.user.id?e.$store.state.pk.b_is_robot:e.$store.state.pk.a_is_robot)?((0,o.wg)(),(0,o.iD)("div",we,ke)):(0,o.kq)("",!0),1===s.game?((0,o.wg)(),(0,o.iD)("div",{key:3,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: black;":"background-color: white;")},null,4)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",{key:4,class:"body",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: #F94848;":"background-color: #4876EC;")},be,4)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",{key:5,class:"chess",style:(0,l.j5)(e.$store.state.pk.a_id===e.$store.state.user.id?"background-color: black;":"background-color: white;")},null,4)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.a_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",xe,"黑子："+(0,l.zw)(e.$store.state.pk.bCnt),1)):(0,o.kq)("",!0),3===s.game&&e.$store.state.pk.b_id===e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",Ce,"白子："+(0,l.zw)(e.$store.state.pk.aCnt),1)):(0,o.kq)("",!0),(0,o._)("div",We,[(0,o._)("img",{src:e.$store.state.pk.opponent_photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,ze),(0,o._)("span",Se,(0,l.zw)(e.$store.state.pk.opponent_username),1)])])])):((0,o.wg)(),(0,o.iD)("div",Me,[(0,o._)("div",Ie,[(0,o._)("div",Ve,[(0,o._)("img",{src:e.$store.state.record.a_photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,qe),(0,o._)("span",Ue,(0,l.zw)(e.$store.state.record.a_username),1)]),1===s.game?((0,o.wg)(),(0,o.iD)("div",De)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",$e,Le)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",je)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",Te,"白子："+(0,l.zw)(e.$store.state.pk.aCnt),1)):(0,o.kq)("",!0),e.$store.state.record.a_is_robot?((0,o.wg)(),(0,o.iD)("div",Re,Fe)):(0,o.kq)("",!0),e.$store.state.record.a_is_robot?((0,o.wg)(),(0,o.iD)("div",He,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.record.a_language),1)])),_:1})])):(0,o.kq)("",!0)]),(0,o._)("div",Ee,[e.$store.state.record.b_is_robot?((0,o.wg)(),(0,o.iD)("div",Ae,[(0,o.Wm)(c,{type:"danger",class:"mx-1",effect:"dark",round:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$store.state.record.b_language),1)])),_:1})])):(0,o.kq)("",!0),e.$store.state.record.b_is_robot?((0,o.wg)(),(0,o.iD)("div",Ge,Ze)):(0,o.kq)("",!0),1===s.game?((0,o.wg)(),(0,o.iD)("div",Je)):(0,o.kq)("",!0),2===s.game?((0,o.wg)(),(0,o.iD)("div",Ke,Qe)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",et)):(0,o.kq)("",!0),3===s.game?((0,o.wg)(),(0,o.iD)("div",tt,"黑子："+(0,l.zw)(e.$store.state.pk.bCnt),1)):(0,o.kq)("",!0),(0,o._)("div",st,[(0,o._)("img",{src:e.$store.state.record.b_photo,alt:"",style:{"user-select":"none"},class:"photo"},null,8,at),(0,o._)("span",ot,(0,l.zw)(e.$store.state.record.b_username),1)])])]))])}const rt={class:"gamemap",ref:"parent"};function it(e,t,s,l,r,i){const n=(0,o.up)("ResultBoard");return(0,o.wg)(),(0,o.iD)("div",rt,[(0,o._)("canvas",{ref:"canvas",tabindex:"0",onContextmenu:t[0]||(t[0]=(0,a.iM)((()=>{}),["prevent"])),style:{height:"100%"}},null,544),"none"!=e.$store.state.pk.loser?((0,o.wg)(),(0,o.j4)(n,{key:0})):(0,o.kq)("",!0)],512)}var nt=s(4870);const ct=e=>((0,o.dD)("data-v-492be264"),e=e(),(0,o.Cn)(),e),ut={class:"result-board",style:{"user-select":"none"}},dt={key:0,class:"all"},mt={class:"user-profile"},pt=["src"],ht={class:"username"},gt=ct((()=>(0,o._)("span",{class:"user-state"}," 平 ",-1))),_t={class:"user-profile"},wt=["src"],ft={class:"username"},kt={key:1,class:"lose"},vt={class:"user-profile"},yt=["src"],bt={class:"username"},xt=ct((()=>(0,o._)("span",{class:"user-state"}," 输 ",-1))),Ct={key:2,class:"win"},Wt={class:"user-profile"},zt=["src"],St={class:"username"},Mt=ct((()=>(0,o._)("span",{class:"user-state"}," 赢 ",-1))),It={style:{"text-align":"center"}},Vt=(0,o.Uk)("再来一局"),qt=(0,o.Uk)("回到主页");function Ut(e,t,s,a,r,i){const n=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",ut,["all"===e.$store.state.pk.loser?((0,o.wg)(),(0,o.iD)("div",dt,[(0,o._)("div",mt,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,pt),(0,o._)("span",ht,(0,l.zw)(e.$store.state.user.username),1)]),gt,(0,o._)("div",_t,[(0,o._)("img",{src:e.$store.state.pk.opponent_photo,alt:""},null,8,wt),(0,o._)("span",ft,(0,l.zw)(e.$store.state.pk.opponent_username),1)])])):"A"===e.$store.state.pk.loser&&e.$store.state.pk.a_id===parseInt(e.$store.state.user.id)||"B"===e.$store.state.pk.loser&&e.$store.state.pk.b_id===parseInt(e.$store.state.user.id)?((0,o.wg)(),(0,o.iD)("div",kt,[(0,o._)("div",vt,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,yt),(0,o._)("span",bt,(0,l.zw)(e.$store.state.user.username),1)]),xt])):((0,o.wg)(),(0,o.iD)("div",Ct,[(0,o._)("div",Wt,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,zt),(0,o._)("span",St,(0,l.zw)(e.$store.state.user.username),1)]),Mt])),(0,o._)("div",It,[(0,o.Wm)(n,{color:"rgb(255, 193, 7)",round:"",onClick:a.restart,class:"btn"},{default:(0,o.w5)((()=>[Vt])),_:1},8,["onClick"]),(0,o.Wm)(n,{round:"",onClick:a.back,class:"btn"},{default:(0,o.w5)((()=>[qt])),_:1},8,["onClick"])])])}var Dt={name:"ResultBoard",setup(){const e=(0,V.oR)(),t=()=>{e.commit("updateStatus","matching"),e.commit("updateGameResult",{loser:"none",status:"none"}),e.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),e.commit("clearMsg"),e.commit("updateCanSendMsg",!1),e.commit("clearCodeOutMsg")},s=()=>{kr.push({name:"record_index"}),e.commit("updateStatus","matching"),e.commit("updateGameResult",{loser:"none",status:"none"}),e.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),e.commit("clearMsg"),e.commit("updateCanSendMsg",!1),e.commit("clearCodeOutMsg")};return{restart:t,back:s}}},$t=s(89);const Pt=(0,$t.Z)(Dt,[["render",Ut],["__scopeId","data-v-492be264"]]);var Bt=Pt;const Lt=[];class jt{constructor(){Lt.push(this),this.has_called_start=!1,this.timedelta=0,this.uuid=this.create_uuid()}create_uuid(){let e="";for(let t=0;t<8;t++){let t=parseInt(Math.floor(10*Math.random()));e+=t}return e}start(){}update(){}on_destroy(){}destroy(){this.on_destroy();for(let e in Lt){const t=Lt[e];if(t.uuid===this.uuid){Lt.splice(e,1);break}}}}let Tt;const Rt=e=>{for(let t of Lt)t.has_called_start?(t.timedelta=e-Tt,t.update()):(t.has_called_start=!0,t.start());Tt=e,requestAnimationFrame(Rt)};requestAnimationFrame(Rt);class Ot extends jt{constructor(e,t,s){super(),this.r=e,this.c=t,this.gamemap=s,this.color="#B37226"}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.fillRect(this.c*e,this.r*e,e,e)}}class Ft{constructor(e,t){this.r=e,this.c=t,this.x=t+.5,this.y=e+.5}}class Ht extends jt{constructor(e,t){super(),this.id=e.id,this.color=e.color,this.gamemap=t,this.cells=[new Ft(e.r,e.c)],this.next_cell=null,this.speed=5,this.direction=-1,this.status="idle",this.dr=[-1,0,1,0],this.dc=[0,1,0,-1],this.step=0,this.eps=.01,this.eye_direction=0,this.id===this.gamemap.store.state.pk.b_id&&(this.eye_direction=2),this.eye_dx=[[-1,1],[1,1],[1,-1],[-1,-1]],this.eye_dy=[[-1,-1],[-1,1],[1,1],[-1,1]]}start(){}set_direction(e){this.direction=e}check_tail_increasing(){return this.step<=10||this.step%3===1}next_step(){const e=this.direction;this.next_cell=new Ft(this.cells[0].r+this.dr[e],this.cells[0].c+this.dc[e]),this.eye_direction=e,this.direction=-1,this.status="move",this.step++;const t=this.cells.length;for(let s=t;s>0;s--)this.cells[s]=JSON.parse(JSON.stringify(this.cells[s-1]))}update_move(){const e=this.next_cell.x-this.cells[0].x,t=this.next_cell.y-this.cells[0].y,s=Math.sqrt(e*e+t*t);if(s<this.eps)this.cells[0]=this.next_cell,this.next_cell=null,this.status="idle",this.check_tail_increasing()||this.cells.pop();else{const a=this.speed*this.timedelta/1e3;if(this.cells[0].x+=a*e/s,this.cells[0].y+=a*t/s,!this.check_tail_increasing()){const e=this.cells.length,t=this.cells[e-1],o=this.cells[e-2],l=o.x-t.x,r=o.y-t.y;t.x+=a*l/s,t.y+=a*r/s}}}update(){"move"===this.status&&this.update_move(),this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,"die"===this.status&&(t.fillStyle="white");for(const s of this.cells)t.beginPath(),t.arc(s.x*e,s.y*e,e/2*.8,0,2*Math.PI),t.fill();for(let s=1;s<this.cells.length;s++){const a=this.cells[s-1],o=this.cells[s];Math.abs(a.x-o.x)<this.eps&&Math.abs(a.y-o.y)<this.eps||(Math.abs(a.x-o.x)<this.eps?t.fillRect((a.x-.5+.1)*e,Math.min(a.y,o.y)*e,.8*e,Math.abs(a.y-o.y)*e):t.fillRect(Math.min(a.x,o.x)*e,(a.y-.5+.1)*e,Math.abs(a.x-o.x)*e,.8*e))}t.fillStyle="black";for(let s=0;s<2;s++){const a=(this.cells[0].x+.15*this.eye_dx[this.eye_direction][s])*e,o=(this.cells[0].y+.15*this.eye_dy[this.eye_direction][s])*e;t.beginPath(),t.arc(a,o,.05*e,0,2*Math.PI),t.fill()}}}class Et extends jt{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.L=0,this.rows=13,this.cols=14,this.inner_walls_count=20,this.walls=[]}create_walls(){const e=this.store.state.pk.gamemap;for(let t=0;t<this.rows;t++)for(let s=0;s<this.cols;s++)e[t][s]&&this.walls.push(new Ot(t,s,this))}start(){this.create_walls();let e=0,t=0;this.store.state.pk.a_id===this.store.state.user.id?(e="#4876EC",t="#F94848"):(e="#F94848",t="#4876EC"),this.snakes=[new Ht({id:this.store.state.pk.a_id,color:e,r:this.rows-2,c:1},this),new Ht({id:this.store.state.pk.b_id,color:t,r:1,c:this.cols-2},this)],this.add_listening_events()}transDir(e){return e<=1?e+=2:e-=2,e}add_listening_events(){if(this.store.state.record.is_record){let e=0;const t=this.store.state.record.a_steps,s=this.store.state.record.b_steps,a=this.store.state.record.record_loser,[o,l]=this.snakes,r=setInterval((()=>{e>=t.length?("all"!==a&&"A"!==a||(o.status="die"),"all"!==a&&"B"!==a||(l.status="die"),clearInterval(r)):(e<t.length&&o.set_direction(parseInt(t[e])),e<s.length&&l.set_direction(parseInt(s[e]))),e++}),300)}else this.ctx.canvas.focus(),this.ctx.canvas.addEventListener("keydown",(e=>{let t=-1,s=-1;"w"===e.key?t=0:"d"===e.key?t=1:"s"===e.key?t=2:"a"===e.key&&(t=3),s=this.store.state.user.id!==this.store.state.pk.a_id?this.transDir(t):t,s>=0&&(this.store.commit("updateDir",t),this.store.state.pk.socket.send(JSON.stringify({event:"move",direction:s})))}))}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}check_ready(){for(const e of this.snakes){if("idle"!==e.status)return!1;if(-1===e.direction)return!1}return!0}next_step(){for(const e of this.snakes)e.next_step()}update(){this.update_size(),this.check_ready()&&this.next_step(),this.render()}render(){const e="#AAD751",t="#A2D149";for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)this.ctx.fillStyle=(s+a)%2===0?e:t,this.ctx.fillRect(a*this.L,s*this.L,this.L,this.L)}}class At extends jt{constructor(e,t){super(),this.gamemap=e,this.color=t.color,this.r=t.r,this.c=t.c}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.beginPath(),t.arc(this.r*e,this.c*e,.36*e,0,2*Math.PI),t.fill()}}class Gt extends jt{constructor(e,t,s){super(),this.gamemap=e,this.id=t,this.color=s,this.floatR=-1,this.floatC=-1,this.isClick=!1}start(){this.add_listening_events()}update(){this.render()}add_listening_events(){this.gamemap.store.state.record.is_record||(this.gamemap.ctx.canvas.addEventListener("click",(e=>{if(this.gamemap.store.state.pk.firstMove!==this.id)return;const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L,o=Math.round(s),l=Math.round(a);this.gamemap.pre_judge(o,l)&&!this.gamemap.map[10*o+l]&&this.gamemap.store.state.pk.socket.send(JSON.stringify({event:"next_round",x:o,y:l}))})),this.gamemap.ctx.canvas.addEventListener("mousemove",(e=>{const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L;this.floatR=Math.round(s),this.floatC=Math.round(a)})),this.gamemap.ctx.canvas.addEventListener("mousedown",(()=>{this.isClick=!0})),this.gamemap.ctx.canvas.addEventListener("mouseup",(()=>{this.isClick=!1})),this.gamemap.ctx.canvas.addEventListener("mouseout",(()=>{this.floatR=-1,this.floatC=-1})))}set_chess(e,t){let s=new At(this.gamemap,{color:this.color,r:e,c:t});this.gamemap.currentChess=s,this.gamemap.pushChess(s)}render(){if(this.gamemap.store.state.pk.firstMove===this.id&&this.id===this.gamemap.store.state.user.id&&"none"===this.gamemap.store.state.pk.loser&&this.floatR>=1&&this.floatR<this.gamemap.rows&&this.floatC>=1&&this.floatC<this.gamemap.cols&&!this.gamemap.map[10*this.floatR+this.floatC]){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.beginPath();let s=.39*e;this.isClick&&(s=.34*e),t.arc(this.floatR*e,this.floatC*e,s,0,2*Math.PI),t.fill(),this.gamemap.canvasUtils.drawAim(t,this.floatR*e,this.floatC*e,.2*e,"red")}}}class Nt{drawRoundedRectangle(e,t,s,a,o,l,r,i){e.beginPath(),e.moveTo(t+l,s),e.lineTo(t+a-l,s),e.arc(t+a-l,s+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+a,s+o-l),e.arc(t+a-l,s+o-l,l,0,.5*Math.PI),e.lineTo(t+l,s+o),e.arc(t+l,s+o-l,l,.5*Math.PI,Math.PI),e.lineTo(t,s+l),e.arc(t+l,s+l,l,Math.PI,1.5*Math.PI),e.fillStyle=r,e.strokeStyle=i,e.fill(),e.stroke(),e.closePath()}drawAngle(e,t,s,a,o,l,r,i){e.beginPath(),e.moveTo(t+a-l,s),e.arc(t+a-l,s+l,l,1.5*Math.PI,2*Math.PI),e.moveTo(t+a,s+o-l),e.arc(t+a-l,s+o-l,l,0,.5*Math.PI),e.moveTo(t+l,s+o),e.arc(t+l,s+o-l,l,.5*Math.PI,Math.PI),e.moveTo(t,s+l),e.arc(t+l,s+l,l,Math.PI,1.5*Math.PI),e.fillStyle=r,e.strokeStyle=i,e.fill(),e.stroke(),e.closePath()}drawAim(e,t,s,a,o){e.beginPath(),e.moveTo(t-a-.4*a,s),e.lineTo(t-.4*a,s),e.moveTo(t,s-a-.4*a),e.lineTo(t,s-.4*a),e.moveTo(t+.4*a,s),e.lineTo(t+a+.4*a,s),e.moveTo(t,s+.4*a),e.lineTo(t,s+a+.4*a),e.strokeStyle=o,e.fill(),e.stroke(),e.closePath()}drawDottedCircle(e,t,s,a,o,l,r){let i=a/o,n=2*Math.PI/i,c=[],u=-1;while(u<i){let e=n*u,o=n*(u+1);c.push({x:Math.cos(e)*a+t,y:Math.sin(e)*a+s,ex:Math.cos(o)*a+t,ey:Math.sin(o)*a+s}),u+=2}e.lineWidth=r,e.strokeStyle=l,e.beginPath();for(let d=0;d<c.length;d++)e.moveTo(c[d].x,c[d].y),e.lineTo(c[d].ex,c[d].ey),e.stroke();e.closePath()}drawRoundedRectangleWithText(e,t,s,a,o,l,r,i,n,c){e.beginPath(),e.moveTo(t+l,s),e.lineTo(t+a-l,s),e.arc(t+a-l,s+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+a,s+o-l),e.arc(t+a-l,s+o-l,l,0,.5*Math.PI),e.lineTo(t+l,s+o),e.arc(t+l,s+o-l,l,.5*Math.PI,Math.PI),e.lineTo(t,s+l),e.arc(t+l,s+l,l,Math.PI,1.5*Math.PI),e.fillStyle=r,e.strokeStyle=i,e.fill(),e.stroke(),e.closePath(),e.font="bold 17px Arial,sans-serif",e.fillStyle=n,e.textAlign="center",e.textBaseline="middle",e.fillText(c,t+a/2,s+o/2)}}class Zt extends jt{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.rows=17,this.cols=17,this.points=[{x:4,y:4},{x:this.rows-4,y:4},{x:4,y:this.cols-4},{x:this.rows-4,y:this.cols-4}],this.chesses=[],this.map={},this.currentChess=null,this.canvasUtils=new Nt}start(){if(this.players=[new Gt(this,this.store.state.pk.a_id,"white"),new Gt(this,this.store.state.pk.b_id,"black")],this.store.state.record.is_record){let e=0,t=0,s=0;const a=JSON.parse(this.store.state.record.a_steps),o=JSON.parse(this.store.state.record.b_steps),[l,r]=this.players,i=setInterval((()=>{e>=a.length&&t>=o.length?clearInterval(i):(e<a.length&&s%2===0?(l.set_chess(a[e].x,a[e].y),e++):t<o.length&&s%2===1&&(r.set_chess(o[t].x,o[t].y),t++),s++)}),500)}}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}update(){this.update_size(),this.render()}pre_judge(e,t){return!(e<1||e>this.rows-1||t<1||t>this.cols-1)}pushChess(e){this.chesses.push(e),this.map[10*e.r+e.c]=e.color}render(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)this.ctx.fillStyle="rgb(249,215,87)",this.ctx.fillRect(t*this.L,e*this.L,this.L,this.L),e>=1&&t>=1&&e<this.rows-1&&t<this.cols-1&&(this.ctx.strokeStyle="black",this.ctx.strokeRect(t*this.L,e*this.L,this.L,this.L));for(let e=0;e<this.points.length;e++)this.ctx.fillStyle="black",this.ctx.beginPath(),this.ctx.arc(this.points[e].x*this.L,this.points[e].y*this.L,.1*this.L,0,2*Math.PI),this.ctx.fill();null!==this.currentChess&&this.canvasUtils.drawAngle(this.ctx,this.currentChess.r*this.L-this.L/2,this.currentChess.c*this.L-this.L/2,this.L,this.L,.2*this.L,"rgba(255, 255, 255, 0)","red")}}class Jt extends jt{constructor(e,t){super(),this.gamemap=e,this.color=t.color,this.r=t.r,this.c=t.c}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.beginPath(),t.arc(this.r*e+e/2,this.c*e+e/2,.3*e,0,2*Math.PI),t.fill()}}class Kt extends jt{constructor(e,t,s){super(),this.gamemap=e,this.id=t,this.color=s,this.floatR=-1,this.floatC=-1,this.isClick=!1}start(){this.add_listening_events()}update(){this.render()}add_listening_events(){this.gamemap.ctx.canvas.addEventListener("click",(e=>{if(this.gamemap.store.state.pk.firstMove!==this.id)return;const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L,o=Math.floor(s),l=Math.floor(a);if(this.gamemap.map[10*o+l])return;let r=this.gamemap.adviseChesses.some((e=>e.r===o&&e.c===l));r&&this.gamemap.store.state.pk.socket.send(JSON.stringify({event:"next_round",x:o,y:l}))})),this.gamemap.ctx.canvas.addEventListener("mousemove",(e=>{const t=this.gamemap.ctx.canvas.getBoundingClientRect();let s=(e.clientX-t.left)/this.gamemap.L,a=(e.clientY-t.top)/this.gamemap.L;this.floatR=Math.floor(s),this.floatC=Math.floor(a)})),this.gamemap.ctx.canvas.addEventListener("mousedown",(()=>{this.isClick=!0})),this.gamemap.ctx.canvas.addEventListener("mouseup",(()=>{this.isClick=!1})),this.gamemap.ctx.canvas.addEventListener("mouseout",(()=>{this.floatR=-1,this.floatC=-1}))}set_chess(e,t){let s=new Jt(this.gamemap,{color:this.color,r:e,c:t});this.gamemap.pushChess(s),this.gamemap.process(s),this.gamemap.calcChessCnt()}render(){if(this.gamemap.store.state.pk.firstMove===this.id&&this.id===this.gamemap.store.state.user.id&&"none"===this.gamemap.store.state.pk.loser&&this.floatR>=0&&this.floatR<this.gamemap.rows&&this.floatC>=0&&this.floatC<this.gamemap.cols&&!this.gamemap.map[10*this.floatR+this.floatC]&&this.gamemap.adviseChesses.some((e=>e.r===this.floatR&&e.c===this.floatC))){const e=this.gamemap.L,t=this.gamemap.ctx;this.gamemap.canvasUtils.drawRoundedRectangle(t,this.floatR*e,this.floatC*e,e,e,.2*e,"#1F1F1F","gray"),t.fillStyle=this.color,t.beginPath();let s=.31*e;this.isClick&&(s=.28*e),t.arc(this.floatR*e+e/2,this.floatC*e+e/2,s,0,2*Math.PI),t.fill()}}}class Yt extends jt{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.rows=8,this.cols=8,this.canvasUtils=new Nt,this.chesses=[],this.map={},this.adviseChesses=[],this.currentChess=null,this.isShowTips=!1,this.tipString="",this.aCnt=2,this.bCnt=2}start(){if(this.players=[new Kt(this,this.store.state.pk.a_id,"white"),new Kt(this,this.store.state.pk.b_id,"black")],this.pushChess(new Jt(this,{color:"white",r:3,c:3})),this.pushChess(new Jt(this,{color:"white",r:4,c:4})),this.pushChess(new Jt(this,{color:"black",r:3,c:4})),this.pushChess(new Jt(this,{color:"black",r:4,c:3})),this.dx=[-1,-1,-1,0,1,1,1,0],this.dy=[-1,0,1,1,1,0,-1,-1],this.store.state.record.is_record){let e=0,t=0,s=0;const a=JSON.parse(this.store.state.record.a_steps),o=JSON.parse(this.store.state.record.b_steps),[l,r]=this.players,i=setInterval((()=>{e>=a.length&&t>=o.length?clearInterval(i):(e<a.length&&s%2===0?(l.set_chess(a[e].x,a[e].y),e++):t<o.length&&s%2===1&&(r.set_chess(o[t].x,o[t].y),t++),s++)}),500)}else this.adviseChess("white")}calcChessCnt(){let e=0,t=0;for(let s of this.chesses)"white"===s.color?e++:t++;this.store.commit("updateChessCnt",{aCnt:e,bCnt:t}),this.aCnt=e,this.bCnt=t}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}pushChess(e){this.chesses.push(e),this.map[10*e.r+e.c]=e.color}updateChess(e){this.map[10*e.r+e.c]=e.color;let t=this.chesses.find((t=>t.r===e.r&&t.c===e.c));t.color=e.color}adviseChess(e){this.adviseChesses=[];for(let t of this.chesses)if(t.color===e){let s;s="white"===e?"black":"white";for(let e=0;e<8;e++){let a=this.dx[e]+t.r,o=this.dy[e]+t.c,l=!1;while(a>=0&&a<this.rows&&o>=0&&o<this.cols&&this.map[10*a+o]===s)a=this.dx[e]+a,o=this.dy[e]+o,l=!0;if(l&&a>=0&&a<this.rows&&o>=0&&o<this.cols&&!this.map[10*a+o]){let e={r:a,c:o};if(this.adviseChesses[e])continue;this.adviseChesses.push(e)}}}0===this.adviseChesses.length&&(this.isShowTips=!0,this.store.state.pk.firstMove===this.store.state.pk.a_id&&0===this.aCnt||this.store.state.pk.firstMove===this.store.state.pk.b_id&&0===this.bCnt?this.tipString="无棋可下，游戏结束":(this.tipString="无棋可下，跳过回合",this.store.state.pk.socket.send(JSON.stringify({event:"toggle_round"}))),setTimeout((()=>{this.isShowTips=!1,this.tipString=""}),3e3))}process(e){let t;t="white"===e.color?"black":"white";for(let s=0;s<8;s++){let a=e.r+this.dx[s],o=e.c+this.dy[s],l=!1;while(a>=0&&a<this.rows&&o>=0&&o<this.cols&&this.map[10*a+o]===t)l=!0,a=this.dx[s]+a,o=this.dy[s]+o;if(l&&a>=0&&a<this.rows&&o>=0&&o<this.cols&&this.map[10*a+o]===e.color){let t=e.r+this.dx[s],l=e.c+this.dy[s];while(t!==a||l!==o)this.updateChess({r:t,c:l,color:e.color}),t=this.dx[s]+t,l=this.dy[s]+l}}}update(){this.update_size(),this.render()}render(){const e=this.L,t=this.ctx,s="#404040",a="#575757";for(let o=0;o<this.rows;o++)for(let l=0;l<this.cols;l++)this.canvasUtils.drawRoundedRectangle(t,l*e,o*e,e,e,.2*e,(o+l)%2==0?a:s,"gray");if(this.store.state.pk.firstMove===this.store.state.user.id&&"none"===this.store.state.pk.loser)for(let o of this.adviseChesses)t.fillStyle=this.store.state.pk.firstMove===this.store.state.pk.a_id?"white":"black",this.canvasUtils.drawDottedCircle(t,o.r*e+e/2,o.c*e+e/2,.31*e,.01*e,"red",.03*e),t.beginPath(),t.arc(o.r*e+e/2,o.c*e+e/2,.3*e,0,2*Math.PI),t.fill();this.isShowTips&&this.canvasUtils.drawRoundedRectangle(t,50,this.ctx.canvas.width/2,200,40,5,"rgba(50, 50, 50, 0.5)","#666666","#333333",this.tipString)}}var Xt={name:"GameMap",components:{ResultBoard:Bt},props:{game:{type:Number,required:!0}},setup(e){const t=(0,V.oR)();let s=(0,nt.iH)(null),a=(0,nt.iH)(null);return(0,o.bv)((()=>{t.commit("updateGameResult",{loser:"none",status:"none"}),2===e.game?t.commit("updateGameObject",new Et(a.value.getContext("2d"),s.value,t)):1===e.game?t.commit("updateGameObject",new Zt(a.value.getContext("2d"),s.value,t)):3===e.game&&t.commit("updateGameObject",new Yt(a.value.getContext("2d"),s.value,t))})),{parent:s,canvas:a}}};const Qt=(0,$t.Z)(Xt,[["render",it],["__scopeId","data-v-41e665e8"]]);var es=Qt,ts={name:"PlayGround",components:{GameMap:es},props:{game:{type:String,required:!0},flag:{type:String,required:!0}},setup(){const e=(0,V.oR)();(0,o.Ah)((()=>{e.commit("updateCanSendMsg",!1),e.commit("clearCodeOutMsg"),e.commit("updateDir",-1),e.commit("updateFirstMove",null),e.commit("updateChessCnt",{aCnt:2,bCnt:2})}))}};const ss=(0,$t.Z)(ts,[["render",lt],["__scopeId","data-v-0b3a5357"]]);var as=ss;const os={class:"match-time-text"},ls=(0,o.Uk)(" 匹配时间： "),rs={class:"match-time"},is={class:"user-photo"},ns=["src"],cs={class:"user-username"},us={class:"user-photo"},ds=["src"],ms={class:"user-username"};function ps(e,t,s,a,r,i){const n=(0,o.up)("el-col"),c=(0,o.up)("el-button"),u=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(u,{style:{"margin-top":"20px","user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{span:6,offset:9},{default:(0,o.w5)((()=>[(0,o._)("div",os,[ls,(0,o._)("span",rs,(0,l.zw)(e.$store.state.utils.matchTime)+"s",1)])])),_:1}),(0,o.Wm)(n,{span:9,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",is,[(0,o._)("img",{src:e.$store.state.user.photo,alt:""},null,8,ns)]),(0,o._)("div",cs,(0,l.zw)(e.$store.state.user.username),1)])),_:1}),(0,o.Wm)(n,{span:9,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",us,[(0,o._)("img",{src:e.$store.state.pk.opponent_photo,alt:""},null,8,ds)]),(0,o._)("div",ms,(0,l.zw)(e.$store.state.pk.opponent_username),1)])),_:1}),(0,o.Wm)(n,{span:2,offset:11,style:{"margin-top":"30px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{round:"",class:"match_btn",onClick:a.click_match},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(a.match_btn_info),1)])),_:1},8,["onClick"])])),_:1})])),_:1})}var hs={name:"MatchGround",props:{operate:{type:Number,required:!0},botId:{type:Number,required:!0}},setup(e){const t=(0,V.oR)();let s=(0,nt.iH)("开始匹配");const a=()=>{"开始匹配"===s.value?(s.value="取消匹配",t.state.pk.socket.send(JSON.stringify({event:"start_match",username:t.state.user.username,photo:t.state.user.photo,operate:e.operate,botId:e.botId})),t.commit("updateIsMatch",!0),t.commit("clearMatchTime",0)):(s.value="开始匹配",t.state.pk.socket.send(JSON.stringify({event:"stop_match",username:t.state.user.username,photo:t.state.user.photo,operate:e.operate,botId:e.botId})),t.commit("updateIsMatch",!1),t.commit("clearMatchTime",0))};return{match_btn_info:s,click_match:a}}};const gs=(0,$t.Z)(hs,[["render",ps],["__scopeId","data-v-24a8e127"]]);var _s=gs,ws={name:"PkIndexView",components:{PlayGround:as,MatchGround:_s},setup(){const e=(0,q.yj)(),t=(0,V.oR)(),s=parseInt(e.params.game),a=parseInt(e.query.operate),l=e.query.bot_id;let r="",i=(0,nt.iH)(""),n=(0,nt.iH)(null);t.commit("updateGameResult",{loser:"none",status:"none"}),t.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),t.commit("updateIsRecord",!1);let c=null;1===s?(0,o.bv)((()=>{r="wss://aigame.zzqahm.top/wss/multiplayer/gobang/?token="+t.state.user.access,c=new WebSocket(r),c.onopen=()=>{console.log("connected!"),t.commit("updateSocket",c),t.commit("updateCanSendMsg",!0)},c.onmessage=e=>{const s=JSON.parse(e.data);if(s.username!==t.state.user.username)if("pk_message"===s.event){if(!t.state.pk.canSendMsg)return;t.commit("pushMsg",s.msg),s.msg.username===t.state.user.username&&(t.commit("updateCanSendMsg",!1),setTimeout((()=>{t.commit("updateCanSendMsg",!0)}),1500))}else if("start_game"===s.event)t.commit("updateOpponent",{username:s.username,photo:s.photo}),t.commit("updateChessGame",s.game),t.commit("updateCanSendMsg",!0),t.commit("updateIsMatch",!1),setTimeout((()=>{t.commit("updateStatus","playing"),t.commit("clearMatchTime",0)}),2e3);else if("result"===s.event){t.commit("updateGameResult",{loser:s.loser,status:s.status});let e=parseInt(s["round"]);e===t.state.pk.a_id?(t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.b_id)):e===t.state.pk.b_id&&(t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.a_id))}else if("nextRound"===s.event){let e=parseInt(s["round"]);e===t.state.pk.a_id?(t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.b_id)):e===t.state.pk.b_id&&(t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.commit("updateFirstMove",t.state.pk.a_id))}},c.onclose=()=>{console.log("disconnected!")}})):2===s?((0,o.bv)((()=>{r="wss://aigame.zzqahm.top/wss/multiplayer/snake/?token="+t.state.user.access,t.commit("updateMatchTime",0),t.commit("clearMsg"),c=new WebSocket(r),c.onopen=()=>{console.log("connected!"),t.commit("updateSocket",c)};const e=e=>(e<=1?e+=2:e-=2,e);c.onmessage=s=>{const a=JSON.parse(s.data);if(a.username!==t.state.user.username)if("start_game"===a.event)t.commit("updateOpponent",{username:a.username,photo:a.photo}),t.commit("updateSnakeGame",a.game),t.commit("updateCanSendMsg",!0),t.commit("updateIsMatch",!1),setTimeout((()=>{t.commit("updateStatus","playing"),t.commit("clearMatchTime",0)}),2e3);else if("move"===a.event){const s=t.state.pk.gameObject,[o,l]=s.snakes;t.state.user.id===t.state.pk.a_id?(t.commit("updateDir",a.a_direction),o.set_direction(a.a_direction),l.set_direction(a.b_direction)):(t.commit("updateDir",e(a.b_direction)),o.set_direction(e(a.b_direction)),l.set_direction(e(a.a_direction)))}else if("result"===a.event){const e=t.state.pk.gameObject,[s,o]=e.snakes;"all"===a.loser?(s.status="die",o.status="die"):"A"===a.loser&&t.state.user.id===t.state.pk.a_id||"B"===a.loser&&t.state.user.id===t.state.pk.b_id?s.status="die":("A"===a.loser&&t.state.user.id===t.state.pk.b_id||"B"===a.loser&&t.state.user.id===t.state.pk.a_id)&&(o.status="die"),t.commit("updateGameResult",{loser:a.loser,status:a.status})}else if("pk_message"===a.event){if(!t.state.pk.canSendMsg)return;t.commit("pushMsg",a.msg),a.msg.username===t.state.user.username&&(t.commit("updateCanSendMsg",!1),setTimeout((()=>{t.commit("updateCanSendMsg",!0)}),1500))}},c.onclose=()=>{console.log("disconnected!")}})),(0,o.Ah)((()=>{c.close(),t.commit("updateStatus","matching")}))):3===s&&(0,o.bv)((()=>{r="wss://aigame.zzqahm.top/wss/multiplayer/reversi/?token="+t.state.user.access,c=new WebSocket(r),c.onopen=()=>{console.log("connected!"),t.commit("updateSocket",c),t.commit("updateCanSendMsg",!0)},c.onmessage=e=>{const s=JSON.parse(e.data);if(s.username!==t.state.user.username)if("pk_message"===s.event){if(!t.state.pk.canSendMsg)return;t.commit("pushMsg",s.msg),s.msg.username===t.state.user.username&&(t.commit("updateCanSendMsg",!1),setTimeout((()=>{t.commit("updateCanSendMsg",!0)}),1500))}else if("start_game"===s.event)t.commit("updateOpponent",{username:s.username,photo:s.photo}),t.commit("updateChessGame",s.game),t.commit("updateCanSendMsg",!0),t.commit("updateIsMatch",!1),setTimeout((()=>{t.commit("updateStatus","playing"),t.commit("clearMatchTime",0)}),2e3);else if("result"===s.event){t.commit("updateGameResult",{loser:s.loser,status:s.status});let e=parseInt(s["round"]);e===t.state.pk.a_id?t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])):e===t.state.pk.b_id&&t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"]))}else if("nextRound"===s.event){let e=parseInt(s["round"]);e===t.state.pk.a_id?(t.state.pk.gameObject.players[0].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.state.pk.gameObject.adviseChess("black"),t.commit("updateFirstMove",t.state.pk.b_id)):e===t.state.pk.b_id&&(t.state.pk.gameObject.players[1].set_chess(parseInt(s["x"]),parseInt(s["y"])),t.state.pk.gameObject.adviseChess("white"),t.commit("updateFirstMove",t.state.pk.a_id))}else"toggleRound"===s.event&&setTimeout((()=>{t.commit("updateFirstMove",t.state.pk.firstMove===t.state.pk.a_id?t.state.pk.b_id:t.state.pk.a_id)}),1e3)},c.onclose=()=>{console.log("disconnected!")}}));const u=()=>{t.state.pk.canSendMsg&&""!==i.value&&(t.state.pk.socket.send(JSON.stringify({event:"pk_message",username:t.state.user.username,photo:t.state.user.photo,text:i.value})),i.value="")},d=e=>{e.ctrlKey&&13===e.keyCode?i.value+="\n":(e.preventDefault(),u())};return{game:s,operate:a,botId:l,message:i,sendMsg:u,enterSendMsg:d,msgScroll:n}}};const fs=(0,$t.Z)(ws,[["render",L],["__scopeId","data-v-141f38a6"]]);var ks=fs;const vs=e=>((0,o.dD)("data-v-6c24e6a4"),e=e(),(0,o.Cn)(),e),ys={class:"card-header"},bs=vs((()=>(0,o._)("span",{class:"ranklist-title"},"天梯分排行榜",-1))),xs=(0,o.Uk)("我"),Cs={class:"userinfo"},Ws={class:"player-card-username"},zs={class:"ranklist-username",style:{"margin-left":"8px"}},Ss={key:0,style:{height:"15px"}};function Ms(e,t,s,a,r,i){const n=(0,o.up)("el-button"),c=(0,o.up)("el-table-column"),u=(0,o.up)("el-avatar"),d=(0,o.up)("el-link"),m=(0,o.up)("Back"),p=(0,o.up)("el-icon"),h=(0,o.up)("el-table"),g=(0,o.up)("el-card"),_=(0,o.up)("el-pagination"),w=(0,o.up)("el-col"),f=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(f,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{span:14,offset:5},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{"margin-top":"25px","user-select":"none"}},{header:(0,o.w5)((()=>[(0,o._)("div",ys,[bs,(0,o.Wm)(n,{style:{float:"right"},type:"primary",onClick:a.findme},{default:(0,o.w5)((()=>[xs])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(h,{data:a.players,style:{width:"100%"},"highlight-current-row":"","max-height":"720","table-layout":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{label:"rank",align:"center",prop:"rank",width:"140"}),(0,o.Wm)(c,{label:"玩家",align:"center"},{default:(0,o.w5)((t=>[(0,o._)("div",Cs,[(0,o.Wm)(u,{shape:"square",size:"small",src:t.row.photo},null,8,["src"]),(0,o._)("span",Ws,[(0,o.Wm)(d,{type:"primary"},{default:(0,o.w5)((()=>[(0,o._)("span",zs,(0,l.zw)(t.row.username),1)])),_:2},1024),a.is_find&&e.$store.state.user.username===t.row.username?((0,o.wg)(),(0,o.iD)("span",Ss,[(0,o.Wm)(p,{size:15},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})])):(0,o.kq)("",!0)])])])),_:1}),(0,o.Wm)(c,{prop:"rating",label:"游戏",align:"center"})])),_:1},8,["data"])])),_:1}),(0,o.Wm)(_,{class:"player-pagination",background:"",layout:"total, prev, pager, next, jumper",total:a.total_players,"page-size":10,"current-page":a.current_page,"onUpdate:current-page":t[0]||(t[0]=e=>a.current_page=e),"pager-count":"5",onCurrentChange:a.pull_players},null,8,["total","current-page","onCurrentChange"]),(0,o.Uk)(" "+(0,l.zw)(a.current_page),1)])),_:1})])),_:1})}var Is=s(7387),Vs=s.n(Is),qs={name:"RankListIndexView",setup(){const e=(0,V.oR)();let t=(0,nt.iH)([]),s=(0,nt.iH)(0),a=(0,nt.iH)(!1),l=(0,nt.iH)(1);const r=a=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/getranklist/",type:"get",data:{page:a},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(t.value=JSON.parse(e.players),s.value=e.players_count)}})};(0,o.bv)((()=>{r(1)}));const i=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/getplayerpage/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(l.value=e.page,r(l.value),a.value=!0)}})};return{players:t,total_players:s,pull_players:r,findme:i,is_find:a,current_page:l}}};const Us=(0,$t.Z)(qs,[["render",Ms],["__scopeId","data-v-6c24e6a4"]]);var Ds=Us;const $s=e=>((0,o.dD)("data-v-0cc57f4c"),e=e(),(0,o.Cn)(),e),Ps={class:"card-header",style:{height:"32px"}},Bs=$s((()=>(0,o._)("span",{style:{"line-height":"32px"}},"最新对局",-1))),Ls=(0,o.Uk)("创建游戏"),js=(0,o.Uk)("代码"),Ts=(0,o.Uk)("亲自出马"),Rs=$s((()=>(0,o._)("div",{class:"popover-code-title",style:{"user-select":"none"}},"查看代码",-1))),Os={class:"popover-content",style:{width:"250px"}},Fs={class:"dialog-footer"},Hs=(0,o.Uk)("进入游戏"),Es=(0,o.Uk)("取消"),As={class:"player-container"},Gs={class:"player-card"},Ns={class:"player-card-username"},Zs={class:"records-username"},Js={key:0,class:"player-result",style:{color:"#0099CC"}},Ks={key:1,class:"player-result",style:{color:"#FF0000"}},Ys={key:2,class:"player-result",style:{color:"#0099CC"}},Xs=$s((()=>(0,o._)("span",{class:"player-desb"}," VS ",-1))),Qs={class:"player-card"},ea={class:"player-card-username"},ta={class:"records-username"},sa={key:0,class:"player-result",style:{color:"#ff0000"}},aa={key:1,class:"player-result",style:{color:"#0099CC"}},oa={key:2,class:"player-result",style:{color:"#0099CC"}},la=(0,o.Uk)("查看录像"),ra=$s((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("span",null,"公共聊天区")],-1))),ia={class:"username"},na={class:"main"},ca=(0,o.Uk)("发送");function ua(e,t,s,r,i,n){const c=(0,o.up)("el-button"),u=(0,o.up)("el-radio-button"),d=(0,o.up)("el-radio-group"),m=(0,o.up)("el-form-item"),p=(0,o.up)("el-option"),h=(0,o.up)("el-select"),g=(0,o.up)("ZoomIn"),_=(0,o.up)("el-icon"),w=(0,o.up)("el-scrollbar"),f=(0,o.up)("el-popover"),k=(0,o.up)("el-form"),v=(0,o.up)("el-dialog"),y=(0,o.up)("el-card"),b=(0,o.up)("el-table-column"),x=(0,o.up)("el-avatar"),C=(0,o.up)("el-link"),W=(0,o.up)("el-table"),z=(0,o.up)("el-pagination"),S=(0,o.up)("el-col"),M=(0,o.up)("el-input"),I=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(I,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{span:14,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"box-card",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ps,[Bs,(0,o.Wm)(c,{class:"button",type:"primary",style:{float:"right"},onClick:t[0]||(t[0]=e=>r.showCreateGameDialog=!0)},{default:(0,o.w5)((()=>[Ls])),_:1}),(0,o.Wm)(v,{modelValue:r.showCreateGameDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>r.showCreateGameDialog=e),title:"新建游戏"},{footer:(0,o.w5)((()=>[(0,o._)("span",Fs,[(0,o.Wm)(c,{type:"primary",onClick:t[4]||(t[4]=e=>r.confirmGameDialog(r.createGameInfo.gameSelect))},{default:(0,o.w5)((()=>[Hs])),_:1}),(0,o.Wm)(c,{onClick:t[5]||(t[5]=e=>r.showCreateGameDialog=!1)},{default:(0,o.w5)((()=>[Es])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(k,{"label-position":"top","label-width":"100px",model:r.createGameInfo,rules:r.rules,style:{"max-width":"100%"},ref:"createGameForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{label:"操作方式"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:r.createGameInfo.operateSelect,"onUpdate:modelValue":t[1]||(t[1]=e=>r.createGameInfo.operateSelect=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"0"},{default:(0,o.w5)((()=>[js])),_:1}),(0,o.Wm)(u,{label:"1"},{default:(0,o.w5)((()=>[Ts])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(m,{label:"游戏"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:r.createGameInfo.gameSelect,"onUpdate:modelValue":t[2]||(t[2]=e=>r.createGameInfo.gameSelect=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.games,(e=>((0,o.wg)(),(0,o.j4)(u,{key:e.id,label:e.id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),0===parseInt(r.createGameInfo.operateSelect)?((0,o.wg)(),(0,o.j4)(m,{key:0,label:"选择Bot",prop:"botSelect"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:r.createGameInfo.botSelect,"onUpdate:modelValue":t[3]||(t[3]=e=>r.createGameInfo.botSelect=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.bots,(e=>((0,o.wg)(),(0,o.j4)(p,{key:e.id,label:e.title,value:e.id,onClick:t=>r.selectBotCode(e)},null,8,["label","value","onClick"])))),128))])),_:1},8,["modelValue"]),r.createGameInfo.botSelect?((0,o.wg)(),(0,o.j4)(f,{key:0,placement:"right",width:270,trigger:"click"},{reference:(0,o.w5)((()=>[(0,o.Wm)(_,{size:15,class:"zoom"},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1})])),default:(0,o.w5)((()=>[Rs,(0,o.Wm)(w,{height:"300px"},{default:(0,o.w5)((()=>[(0,o._)("pre",Os,(0,l.zw)(r.botContent),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(y,{style:{"margin-top":"25px","user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{data:r.records,style:{width:"100%"},"highlight-current-row":"","max-height":"720","table-layout":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{prop:"createtime",align:"center",label:"对局时间"}),(0,o.Wm)(b,{prop:"game",label:"游戏",align:"center",width:"190"}),(0,o.Wm)(b,{label:"玩家",align:"center",width:"250"},{default:(0,o.w5)((e=>[(0,o._)("div",As,[(0,o._)("div",Gs,[(0,o.Wm)(x,{shape:"square",size:"small",src:e.row.a_photo},null,8,["src"]),(0,o._)("span",Ns,[(0,o.Wm)(C,{type:"primary",style:{"user-select":"text"}},{default:(0,o.w5)((()=>[(0,o._)("span",Zs,(0,l.zw)(e.row.a_username),1)])),_:2},1024)]),"B"===e.row.result?((0,o.wg)(),(0,o.iD)("span",Js," +5 ")):"A"===e.row.result?((0,o.wg)(),(0,o.iD)("span",Ks," -2 ")):"all"===e.row.result?((0,o.wg)(),(0,o.iD)("span",Ys," +0 ")):(0,o.kq)("",!0)]),Xs,(0,o._)("div",Qs,[(0,o.Wm)(x,{shape:"square",size:"small",src:e.row.b_photo},null,8,["src"]),(0,o._)("span",ea,[(0,o.Wm)(C,{type:"primary",style:{"user-select":"text"}},{default:(0,o.w5)((()=>[(0,o._)("span",ta,(0,l.zw)(e.row.b_username),1)])),_:2},1024)]),"B"===e.row.result?((0,o.wg)(),(0,o.iD)("span",sa," -2 ")):"A"===e.row.result?((0,o.wg)(),(0,o.iD)("span",aa," +5 ")):"all"===e.row.result?((0,o.wg)(),(0,o.iD)("span",oa," +0 ")):(0,o.kq)("",!0)])])])),_:1}),(0,o.Wm)(b,{fixed:"right",label:"Operations",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(c,{onClick:t=>r.see_record(e.row.id),color:"#6666CC"},{default:(0,o.w5)((()=>[la])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,o.Wm)(z,{class:"record-pagination",background:"",layout:"total, prev, pager, next, jumper",total:r.total_records,"page-size":10,"pager-count":"5",onCurrentChange:r.pull_records},null,8,["total","onCurrentChange"])])),_:1}),(0,o.Wm)(S,{span:5,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"message",style:{"user-select":"none"}},{header:(0,o.w5)((()=>[ra])),default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"messages",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{"max-height":"320px",ref:"msgScroll"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.record.hall_msgs,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"message-content",key:t.id},[(0,o._)("div",ia,(0,l.zw)(t.username),1),(0,o._)("div",na,[(0,o.Wm)(x,{class:"photo",size:"small",src:t.photo},null,8,["src"]),(0,o.Wm)(c,{round:"",type:e.$store.state.user.username===t.username?"primary":""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t.text),1)])),_:2},1032,["type"])])])))),128))])),_:1},512)])),_:1}),(0,o.Wm)(y,{class:"message-send",shadow:"never"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{onSubmit:t[8]||(t[8]=(0,a.iM)((()=>{}),["prevent"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{class:"message-input",autosize:{minRows:6,maxRows:6},type:"textarea",placeholder:"Please input message...",modelValue:r.message,"onUpdate:modelValue":t[7]||(t[7]=e=>r.message=e),resize:"none",onKeydown:(0,a.D2)(r.enterSendMsg,["enter"])},null,8,["modelValue","onKeydown"]),(0,o.Wm)(c,{class:"sendBtn",type:"primary",onClick:r.sendMsg,size:"small"},{default:(0,o.w5)((()=>[ca])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var da=s(6666),ma={name:"RecordIndexView",setup(){const e=(0,V.oR)();let t=(0,nt.iH)([]),s=(0,nt.iH)([]),a=(0,nt.iH)(null),l=(0,nt.iH)(!1),r=(0,nt.qj)({operateSelect:0,gameSelect:1,botSelect:null}),i=(0,nt.iH)("");const n="wss://aigame.zzqahm.top/wss/hall/?token="+e.state.user.access;let c=(0,nt.iH)(""),u=(0,nt.iH)(!1),d=(0,nt.iH)(null),m=(0,nt.iH)([]),p=(0,nt.iH)(0),h=null;const g=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/game/getlist/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(t.value=e.games)}})},_=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/getlist_game/",type:"get",data:{game_id:r.gameSelect},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(s.value=e.bots)}})};_(),(0,o.YP)((()=>r.gameSelect),(()=>{_(),r.botSelect=null,i.value=""}));const w=e=>{i.value=e.content};(0,o.bv)((()=>{(0,da.bM)({title:"Welcome",message:(0,o.h)("i",{style:"color: teal"},"欢迎来到King Of Bots游戏对战平台！"),offset:70}),g(),y(1),h=new WebSocket(n),h.onopen=()=>{console.log("connected!"),u.value=!0,e.commit("updateHallSocket",h)},h.onmessage=t=>{const s=JSON.parse(t.data);s.username!==e.state.user.username&&"hall_message"===s.event&&e.commit("pushHallMsg",s.msg)},h.onclose=()=>{u.value=!1,console.log("disconnected!")}}));const f=async t=>{const s=(0,nt.SU)(a);await s.validate((s=>{s&&(l.value=!1,1==r.operateSelect&&(r.botSelect=-1),e.commit("updateBackPage","record_index"),kr.push({name:"pk_index",params:{game:t},query:{operate:r.operateSelect,bot_id:r.botSelect}}))}))};(0,o.Ah)((()=>{h.close()}));const k=()=>{u.value&&""!==c.value&&(e.state.record.hall_socket.send(JSON.stringify({event:"hall_message",username:e.state.user.username,photo:e.state.user.photo,text:c.value})),u.value=!1,setTimeout((()=>{u.value=!0}),1500),c.value="")},v=e=>{e.ctrlKey&&13===e.keyCode?c.value+="\n":(e.preventDefault(),k())},y=t=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/record/getlist/",type:"get",data:{page:t},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(m.value=JSON.parse(e.records),p.value=e.records_count)}})},b=e=>{let t=[];for(let s=0,a=0;s<13;s++){let s=[];for(let t=0;t<14;t++,a++)"0"===e[a]?s.push(0):s.push(1);t.push(s)}return t},x=t=>{for(const s of m.value)if(s.id===t){e.commit("updateIsRecord",!0),2===s.game_id?e.commit("updateSnakeGame",{map:b(s.map),a_id:s.a_id,b_id:s.b_id}):1!==s.game_id&&3!==s.game_id||e.commit("updateChessGame",{a_id:s.a_id,b_id:s.b_id}),e.commit("updateSteps",{a_steps:s.a_steps,b_steps:s.b_steps}),e.commit("updateRecordLoser",s.result),e.commit("updatePlayerInfo",{a_username:s.a_username,a_photo:s.a_photo,a_language:s.a_language,b_username:s.b_username,b_photo:s.b_photo,b_language:s.b_language}),e.commit("updateIsRobot",{a_is_robot:s.a_is_robot,b_is_robot:s.b_is_robot}),e.commit("updateBackPage","record_index"),kr.push({name:"record_content",params:{recordId:t},query:{game:s.game_id}});break}};return{games:t,showCreateGameDialog:l,confirmGameDialog:f,createGameInfo:r,bots:s,selectBotCode:w,botContent:i,createGameForm:a,rules:{botSelect:[{required:!0,message:"请选择Bot！",trigger:"blur"}]},message:c,sendMsg:k,enterSendMsg:v,msgScroll:d,records:m,see_record:x,total_records:p,pull_records:y}}};const pa=(0,$t.Z)(ma,[["render",ua],["__scopeId","data-v-0cc57f4c"]]);var ha=pa;function ga(e,t,s,a,l,r){const i=(0,o.up)("PlayGround"),n=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.j4)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,{span:14,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{game:a.game,flag:"record"},null,8,["game"])])),_:1}),(0,o.Wm)(n,{span:5,offset:1,style:{"margin-top":"40px"}})])),_:1})}var _a={components:{PlayGround:as},setup(){const e=(0,q.yj)(),t=parseInt(e.query.game);return{game:t}}};const wa=(0,$t.Z)(_a,[["render",ga]]);var fa=wa;const ka=(0,o.Uk)(" 讨论区 ");function va(e,t,s,a,l,r){const i=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[ka])),_:1})}const ya={class:"content-field"};function ba(e,t,s,a,l,r){const i=(0,o.up)("el-card"),n=(0,o.up)("el-col"),c=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",ya,[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,{span:18,offset:3},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{shadow:"always",class:"card"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3})])}var xa={name:"ContentField"};const Ca=(0,$t.Z)(xa,[["render",ba],["__scopeId","data-v-08e11878"]]);var Wa=Ca,za={name:"DiscussionView",components:{ContentField:Wa}};const Sa=(0,$t.Z)(za,[["render",va]]);var Ma=Sa;const Ia=e=>((0,o.dD)("data-v-06ef6ae3"),e=e(),(0,o.Cn)(),e),Va=Ia((()=>(0,o._)("div",{class:"background"},null,-1))),qa={class:"content"},Ua={class:"photo"},Da=["src"],$a={class:"username"},Pa=Ia((()=>(0,o._)("div",{class:"profession"}," Web Developer at Webestica ",-1))),Ba=Ia((()=>(0,o._)("div",{class:"description"}," I'd love to change the world, but they won’t give me the source code. ",-1))),La=Ia((()=>(0,o._)("div",{class:"friend-num-container"},[(0,o._)("div",null,[(0,o._)("h6",{class:"num"},"256"),(0,o._)("small",{class:"text"},"Post")]),(0,o._)("div",{class:"vertical-divider"}),(0,o._)("div",null,[(0,o._)("h6",{class:"num"},"2.5K"),(0,o._)("small",{class:"text"},"Followers")]),(0,o._)("div",{class:"vertical-divider"}),(0,o._)("div",null,[(0,o._)("h6",{class:"num"},"365"),(0,o._)("small",{class:"text"},"Following")])],-1))),ja=Ia((()=>(0,o._)("div",{class:"horizontal-divider"},null,-1))),Ta={class:"post-a-fresh-news"},Ra={class:"avatar-container"},Oa={class:"post-container"},Fa={class:"post-container-right"},Ha=(0,o.Uk)("发送"),Ea={class:"post-message-container"},Aa={class:"post-message"},Ga={class:"post-content"},Na={class:"post-tools"},Za=["onClick"],Ja=Ia((()=>(0,o._)("svg",{t:"1664631879270",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2557",width:"25",height:"25"},[(0,o._)("path",{d:"M622.56056 464.834794c0 27.928073 22.73684 50.64854 50.664913 50.64854 27.956725 0 50.693566-22.720468 50.693566-50.64854 0-27.928073-22.73684-50.66389-50.693566-50.66389C645.2974 414.171927 622.56056 436.907745 622.56056 464.834794","p-id":"2558"}),(0,o._)("path",{d:"M931.254178 211.459063c0-40.637536-33.05893-73.698512-73.728188-73.698512L166.471964 137.76055c-40.637536 0-73.727165 33.059953-73.727165 73.698512l0 506.796488c0 40.637536 33.088606 73.696466 73.727165 73.696466l251.16846 0 94.343715 94.28641 94.315062-94.28641 251.226788 0c40.669258 0 73.728188-33.05893 73.728188-73.696466l0-82.560344-0.089028-1.282203L931.254178 211.459063zM875.96699 695.220928c0 22.88522-18.558681 41.444924-41.443901 41.444924L579.446623 736.665853l-67.462484 67.490114-67.430762-67.490114L189.506587 736.665853c-22.88522 0-41.4746-18.559705-41.4746-41.444924L148.031986 234.493685c0-22.88522 18.58938-41.488927 41.4746-41.488927l645.01548 0c22.88522 0 41.443901 18.603707 41.443901 41.488927l0 396.579247 0 36.161594L875.965967 695.220928z","p-id":"2559"}),(0,o._)("path",{d:"M461.321272 464.834794c0 27.928073 22.735817 50.64854 50.662867 50.64854 27.929096 0 50.66389-22.720468 50.66389-50.64854 0-27.928073-22.734794-50.66389-50.66389-50.66389C484.057089 414.171927 461.321272 436.907745 461.321272 464.834794","p-id":"2560"}),(0,o._)("path",{d:"M300.083008 464.834794c0 27.928073 22.735817 50.64854 50.66389 50.64854 27.927049 0 50.662867-22.720468 50.662867-50.64854 0-27.928073-22.735817-50.66389-50.662867-50.66389C322.817802 414.171927 300.083008 436.907745 300.083008 464.834794","p-id":"2561"})],-1))),Ka=Ia((()=>(0,o._)("span",null,"评论",-1))),Ya=[Ja,Ka],Xa=Ia((()=>(0,o._)("div",null,[(0,o._)("svg",{t:"1664632066049",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6641",width:"25",height:"25"},[(0,o._)("path",{d:"M513.5 921.6c-38.3 0-87.4-26.1-121.9-48-48.2-30.6-99.4-73.2-144.3-120-67.2-70-179.9-212.1-179.9-376.3 0-66 26.3-134.2 72.2-187.2 23.3-26.9 50.1-48.2 79.7-63.3 32.1-16.4 66-24.8 100.6-24.8 73.4 0 143.3 31.8 191.6 87.1 0.2 0.2 0.6 0.7 1.5 0.7s1.3-0.5 1.5-0.7c48.4-55.4 118.2-87.1 191.6-87.1 34.7 0 68.5 8.4 100.5 24.9 29.6 15.3 56.4 36.8 79.6 64 45.6 53.5 71.7 123.1 71.7 191 0 161.7-112.2 302.7-179.1 372.3-44.7 46.6-95.8 89-143.7 119.5-34.4 21.8-83.4 47.9-121.6 47.9zM319.9 158c-50.6 0-99.6 24.4-138 68.8-18 20.8-32.9 45.4-43 71.2-10.2 26-15.6 53.5-15.6 79.3 0 56.9 16.3 117.1 48.3 178.9 27.8 53.7 67.9 108.6 116 158.6 41.8 43.6 89.4 83.2 133.9 111.5 45.6 29 77.4 39.3 91.9 39.3s46.2-10.3 91.6-39.2c44.3-28.1 91.6-67.6 133.4-111 47.8-49.8 87.7-104.2 115.4-157.3 31.9-61.1 48-120.4 48-176.2 0-54.8-21.3-111.2-58.3-154.7-38-44.6-86.8-69.2-137.5-69.2-57.3 0-111.7 24.8-149.5 68-11 12.6-26.9 19.8-43.6 19.8s-32.6-7.2-43.6-19.8c-37.6-43.2-92.1-68-149.4-68z",fill:"","p-id":"6642"})]),(0,o._)("span",null,"点赞（56）")],-1))),Qa=Ia((()=>(0,o._)("div",null,[(0,o._)("svg",{t:"1664632040191",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4832",width:"25",height:"25"},[(0,o._)("path",{d:"M71.9 909.8c-2.2 8.4-12.5 5.9-11.9-2.9 13.1-187 71.1-284.1 128.1-352.8C274.7 449.9 469.8 352.7 604 341.3c10.6-0.9 18.9-11.7 18.9-24.8V157.9c0-21.7 21.1-32.9 34.1-18.2l299.5 339.5c9 10.2 8.6 27.6-0.8 37.2L662 817.6c-13.2 13.5-33.3 2-33.3-19V604.3c0-12.9-8.1-23.7-18.6-24.7-85.7-8.5-287.5 10.3-369.1 70.2-34.8 25.4-129.8 112.4-169.1 260z","p-id":"4833"})]),(0,o._)("span",null,"转发（3）")],-1))),eo={key:0,class:"post-comment"},to=(0,o.Uk)(" 提交评论 "),so={class:"avatar"},ao={class:"right"},oo={class:"info"},lo={class:"time"},ro={key:0,class:"reply"},io=(0,o.Uk)("回复 "),no=(0,o.Uk)(" 的评论"),co=["onClick"],uo={class:"content"},mo={key:0,class:"post-reply-comment"},po=(0,o.Uk)(" 提交评论 ");function ho(e,t,s,r,i,n){const c=(0,o.up)("el-col"),u=(0,o.up)("el-row"),d=(0,o.up)("el-card"),m=(0,o.up)("el-avatar"),p=(0,o.up)("el-input"),h=(0,o.up)("el-divider"),g=(0,o.up)("el-button");return(0,o.wg)(),(0,o.j4)(u,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:5,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"profile-card",shadow:"always"},{default:(0,o.w5)((()=>[Va,(0,o._)("div",qa,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:6,offset:9},{default:(0,o.w5)((()=>[(0,o._)("div",Ua,[(0,o._)("img",{src:e.$store.state.user.photo,alt:"",class:"",style:{"user-select":"none"}},null,8,Da)])])),_:1})])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:20,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",$a,(0,l.zw)(e.$store.state.user.username),1),Pa,Ba,La,ja])),_:1})])),_:1})])])),_:1})])),_:1}),(0,o.Wm)(c,{span:14,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"post-card"},{default:(0,o.w5)((()=>[(0,o._)("div",Ta,[(0,o._)("div",Ra,[(0,o.Wm)(m,{src:e.$store.state.user.photo},null,8,["src"])]),(0,o.Wm)(p,{modelValue:r.input_fresh_news,"onUpdate:modelValue":t[0]||(t[0]=e=>r.input_fresh_news=e),rows:4,class:"input-fresh-news",resize:"none",type:"textarea",placeholder:"Share your thoughts..."},null,8,["modelValue"])]),(0,o.Wm)(h,{style:{"margin-top":"5px","margin-bottom":"0px"}}),(0,o._)("div",Oa,[(0,o._)("div",Fa,[(0,o.Wm)(g,{type:"primary",size:"small",onClick:t[1]||(t[1]=e=>r.postFreshNews(r.input_fresh_news))},{default:(0,o.w5)((()=>[Ha])),_:1})])])])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.freshNews,(e=>((0,o.wg)(),(0,o.j4)(d,{class:"box-card",style:{"margin-top":"20px"},key:e.id},{default:(0,o.w5)((()=>[(0,o._)("div",Ea,[(0,o.Wm)(m,{src:e.photo},null,8,["src"]),(0,o._)("div",Aa,[(0,o._)("h6",null,(0,l.zw)(e.username),1),(0,o._)("span",null,(0,l.zw)(e.since),1)])]),(0,o._)("div",Ga,(0,l.zw)(e.content),1),(0,o.Wm)(h,{style:{"margin-top":"5px","margin-bottom":"0px"}}),(0,o._)("div",Na,[(0,o._)("div",{onClick:t=>r.openComment(e.id)},Ya,8,Za),Xa,Qa]),(0,o.Wm)(h,{style:{"margin-top":"0px","margin-bottom":"5px"}}),r.openCommentId===e.id?((0,o.wg)(),(0,o.iD)("div",eo,[(0,o.wy)((0,o._)("textarea",{class:(0,l.C_)("post-comment-input"+e.id),placeholder:"Please input","onUpdate:modelValue":t[2]||(t[2]=e=>r.input_comment=e),cols:"40",rows:"2",maxlength:"3000",required:"",title:"回复"},null,2),[[a.nr,r.input_comment]]),(0,o.Wm)(g,{class:"btn",text:"",onClick:t=>r.postFreshNews(r.input_comment,e.id),size:"small"},{default:(0,o.w5)((()=>[to])),_:2},1032,["onClick"])])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.children,(s=>((0,o.wg)(),(0,o.iD)("div",{key:s.id,class:"post-comments"},[(0,o._)("div",so,[(0,o.Wm)(m,{size:"small",src:s.photo},null,8,["src"])]),(0,o._)("div",ao,[(0,o._)("div",oo,[(0,o._)("h6",null,(0,l.zw)(s.username),1),(0,o._)("span",lo,(0,l.zw)(s.since),1),s.reply!==e.username?((0,o.wg)(),(0,o.iD)("span",ro,[io,(0,o._)("a",null,(0,l.zw)(s.reply),1),no])):(0,o.kq)("",!0),(0,o._)("a",{class:"post-comment-right-reply",onClick:t=>r.openComment(e.id+"-"+s.id)},"回复",8,co)]),(0,o._)("div",uo,(0,l.zw)(s.content),1),r.openCommentId===e.id+"-"+s.id?((0,o.wg)(),(0,o.iD)("div",mo,[(0,o.wy)((0,o._)("textarea",{class:(0,l.C_)("post-comment-input"+e.id+"-"+s.id),placeholder:"Please input","onUpdate:modelValue":t[3]||(t[3]=e=>r.input_comment=e),cols:"90",rows:"2",maxlength:"3000",required:"",title:"回复"},null,2),[[a.nr,r.input_comment]]),(0,o.Wm)(g,{class:"btn",text:"",onClick:e=>r.postFreshNews(r.input_comment,s.id),size:"small"},{default:(0,o.w5)((()=>[po])),_:2},1032,["onClick"])])):(0,o.kq)("",!0)])])))),128))])),_:2},1024)))),128))])),_:1})])),_:1})}var go=s(7178),_o={name:"FreshNewsView",setup(){const e=(0,V.oR)();let t=(0,nt.iH)(""),s=(0,nt.iH)(""),a=(0,nt.iH)([]),o=(0,nt.iH)(-1);const l=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/getlist/",type:"get",success(e){a.value=e.freshNews}})};l();const r=(a,r)=>{""!==a.trim()?Vs().ajax({url:"https://aigame.zzqahm.top/backend/playervoice/freshnews/post/",headers:{Authorization:"Bearer "+e.state.user.access},type:"post",data:{content:a,parent_id:r},success(){(0,go.z8)({showClose:!0,message:"动态发布成功",type:"success"}),l(),r?s.value="":t.value="";let e=document.getElementsByClassName("post-comment-input"+o.value)[0];e.classList.remove("post-comment-input-animation"),o.value=-1}}):go.z8.error("please input your mood~")},i=e=>{if(s.value="",-1!==o.value){let e=document.getElementsByClassName("post-comment-input"+o.value)[0];e.classList.remove("post-comment-input-animation")}o.value===e?o.value=-1:(o.value=e,setTimeout((()=>{let t=document.getElementsByClassName("post-comment-input"+e)[0];t.classList.add("post-comment-input-animation")}),1))};return{input_fresh_news:t,input_comment:s,freshNews:a,postFreshNews:r,openCommentId:o,openComment:i}}};const wo=(0,$t.Z)(_o,[["render",ho],["__scopeId","data-v-06ef6ae3"]]);var fo=wo;const ko=(0,o.Uk)(" 留言板 ");function vo(e,t,s,a,l,r){const i=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[ko])),_:1})}var yo={name:"MessageBoardView",components:{ContentField:Wa}};const bo=(0,$t.Z)(yo,[["render",vo]]);var xo=bo;const Co=e=>((0,o.dD)("data-v-492b9de2"),e=e(),(0,o.Cn)(),e),Wo=Co((()=>(0,o._)("div",{class:"background"},null,-1))),zo={class:"content"},So={class:"photo"},Mo=["src"],Io={class:"username"},Vo=Co((()=>(0,o._)("div",{class:"profession"}," Web Developer at Webestica ",-1))),qo=Co((()=>(0,o._)("div",{class:"description"}," I'd love to change the world, but they won’t give me the source code. ",-1))),Uo=Co((()=>(0,o._)("div",{class:"friend-num-container"},[(0,o._)("div",null,[(0,o._)("h6",{class:"num"},"256"),(0,o._)("small",{class:"text"},"Post")]),(0,o._)("div",{class:"vertical-divider"}),(0,o._)("div",null,[(0,o._)("h6",{class:"num"},"2.5K"),(0,o._)("small",{class:"text"},"Followers")]),(0,o._)("div",{class:"vertical-divider"}),(0,o._)("div",null,[(0,o._)("h6",{class:"num"},"365"),(0,o._)("small",{class:"text"},"Following")])],-1))),Do=Co((()=>(0,o._)("div",{class:"horizontal-divider"},null,-1))),$o={class:"card-header"},Po=Co((()=>(0,o._)("span",{style:{"font-weight":"700","font-size":"18px"}},"我的Bot",-1))),Bo=(0,o.Uk)("创造Bot"),Lo=(0,o.Uk)("cpp"),jo=(0,o.Uk)("java"),To=(0,o.Uk)("python"),Ro=Co((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),Oo={class:"gear"},Fo=(0,o.Uk)("chrome"),Ho=(0,o.Uk)("monokai"),Eo=(0,o.Uk)("Standard"),Ao=(0,o.Uk)("Vim"),Go=(0,o.Uk)("Emacs"),No=(0,o.Uk)("2"),Zo=(0,o.Uk)("4"),Jo=(0,o.Uk)("8"),Ko={class:"dialog-footer"},Yo=(0,o.Uk)("创建"),Xo=(0,o.Uk)("取消"),Qo=(0,o.Uk)("修改"),el=(0,o.Uk)("删除"),tl=(0,o.Uk)("cpp"),sl=(0,o.Uk)("java"),al=(0,o.Uk)("python"),ol=Co((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),ll={class:"gear"},rl=(0,o.Uk)("chrome"),il=(0,o.Uk)("monokai"),nl=(0,o.Uk)("Standard"),cl=(0,o.Uk)("Vim"),ul=(0,o.Uk)("Emacs"),dl=(0,o.Uk)("2"),ml=(0,o.Uk)("4"),pl=(0,o.Uk)("8"),hl={class:"dialog-footer"},gl=(0,o.Uk)("保存修改"),_l=(0,o.Uk)("取消"),wl={class:"dialog-footer"},fl=(0,o.Uk)("确认删除"),kl=(0,o.Uk)("取消");function vl(e,t,s,a,r,i){const n=(0,o.up)("el-col"),c=(0,o.up)("el-row"),u=(0,o.up)("el-card"),d=(0,o.up)("el-button"),m=(0,o.up)("el-input"),p=(0,o.up)("el-form-item"),h=(0,o.up)("el-radio-button"),g=(0,o.up)("el-radio-group"),_=(0,o.up)("Refresh"),w=(0,o.up)("el-icon"),f=(0,o.up)("Tools"),k=(0,o.up)("el-input-number"),v=(0,o.up)("el-dropdown-menu"),y=(0,o.up)("el-dropdown"),b=(0,o.up)("VAceEditor"),x=(0,o.up)("el-form"),C=(0,o.up)("el-dialog"),W=(0,o.up)("el-table-column"),z=(0,o.up)("el-table");return(0,o.wg)(),(0,o.j4)(c,{style:{"margin-top":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{span:5,offset:2},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"profile-card",shadow:"always"},{default:(0,o.w5)((()=>[Wo,(0,o._)("div",zo,[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,{span:6,offset:9},{default:(0,o.w5)((()=>[(0,o._)("div",So,[(0,o._)("img",{src:e.$store.state.user.photo,alt:"",class:"",style:{"user-select":"none"}},null,8,Mo)])])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,{span:20,offset:2},{default:(0,o.w5)((()=>[(0,o._)("div",Io,(0,l.zw)(e.$store.state.user.username),1),Vo,qo,Uo,Do])),_:1})])),_:1})])])),_:1})])),_:1}),(0,o.Wm)(n,{span:14,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{shadow:"always",class:"bot-card",style:{"user-select":"none"}},{header:(0,o.w5)((()=>[(0,o._)("div",$o,[Po,(0,o.Wm)(d,{type:"primary",class:"button",style:{float:"right"},size:"small",plain:"",onClick:t[0]||(t[0]=e=>a.showCreateDialog=!0)},{default:(0,o.w5)((()=>[Bo])),_:1}),(0,o.Wm)(m,{style:{"margin-right":"10px",float:"right",width:"180px"},modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=e=>a.search=e),clearable:"",placeholder:"Please search...",size:"small"},null,8,["modelValue"]),(0,o.Wm)(C,{modelValue:a.showCreateDialog,"onUpdate:modelValue":t[12]||(t[12]=e=>a.showCreateDialog=e),title:"创建Bot",onOpened:t[13]||(t[13]=e=>a.openCodeDialog("-create"))},{footer:(0,o.w5)((()=>[(0,o._)("span",Ko,[(0,o.Wm)(d,{type:"primary",onClick:a.confirmCreateBot},{default:(0,o.w5)((()=>[Yo])),_:1},8,["onClick"]),(0,o.Wm)(d,{onClick:a.cancelCreateBot},{default:(0,o.w5)((()=>[Xo])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(x,{"label-position":"top","label-width":"100px",model:a.bot,style:{"max-width":"100%"},rules:a.rules,ref:"createForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"名称",prop:"title"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:a.bot.title,"onUpdate:modelValue":t[2]||(t[2]=e=>a.bot.title=e),placeholder:"请输入Bot名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"游戏",prop:"game"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.bot.game,"onUpdate:modelValue":t[3]||(t[3]=e=>a.bot.game=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.games,(e=>((0,o.wg)(),(0,o.j4)(h,{key:e.id,label:e.id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"简介",prop:"description"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:a.bot.description,"onUpdate:modelValue":t[4]||(t[4]=e=>a.bot.description=e),autosize:{minRows:3},type:"textarea",placeholder:"请输入Bot简介"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"语言",prop:"language"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.bot.language,"onUpdate:modelValue":t[5]||(t[5]=e=>a.bot.language=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"cpp"},{default:(0,o.w5)((()=>[Lo])),_:1}),(0,o.Wm)(h,{label:"java"},{default:(0,o.w5)((()=>[jo])),_:1}),(0,o.Wm)(h,{label:"python"},{default:(0,o.w5)((()=>[To])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"代码"},{default:(0,o.w5)((()=>[Ro,(0,o._)("span",{class:"refresh",onClick:t[6]||(t[6]=(...e)=>a.refreshEditor&&a.refreshEditor(...e))},[(0,o.Wm)(w,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(_)])),_:1})]),(0,o.Wm)(y,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"界面风格",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.skin,"onUpdate:modelValue":t[7]||(t[7]=e=>a.skin=e),onChange:a.changeEditSkin},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"chrome"},{default:(0,o.w5)((()=>[Fo])),_:1}),(0,o.Wm)(h,{label:"monokai"},{default:(0,o.w5)((()=>[Ho])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(p,{label:"编辑类型",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.editor_mode,"onUpdate:modelValue":t[8]||(t[8]=e=>a.editor_mode=e),onChange:a.changeEditMode},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"vscode"},{default:(0,o.w5)((()=>[Eo])),_:1}),(0,o.Wm)(h,{label:"vim"},{default:(0,o.w5)((()=>[Ao])),_:1}),(0,o.Wm)(h,{label:"emacs"},{default:(0,o.w5)((()=>[Go])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(p,{label:"缩进长度",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.editor_space,"onUpdate:modelValue":t[9]||(t[9]=e=>a.editor_space=e),onChange:a.changeEditorSpace},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"2"},{default:(0,o.w5)((()=>[No])),_:1}),(0,o.Wm)(h,{label:"4"},{default:(0,o.w5)((()=>[Zo])),_:1}),(0,o.Wm)(h,{label:"8"},{default:(0,o.w5)((()=>[Jo])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(p,{label:"字号",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:a.fontsize,"onUpdate:modelValue":t[10]||(t[10]=e=>a.fontsize=e),min:5,max:60,size:"small","controls-position":"right",onChange:a.changeEditFont},null,8,["modelValue","onChange"])])),_:1})])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",Oo,[(0,o.Wm)(w,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})])])),_:1}),(0,o.Wm)(b,{value:a.bot.content,"onUpdate:value":t[11]||(t[11]=e=>a.bot.content=e),id:"codeEditor-create",onInit:a.editorInit,class:"codeEditor",lang:"c_cpp",theme:"textmate",style:{height:"300px",width:"100%"}},null,8,["value","onInit"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(z,{data:a.filterBots,stripe:"",style:{width:"100%"},"highlight-current-row":"",border:"","max-height":"67vh","table-layout":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{label:"序号",type:"index"}),(0,o.Wm)(W,{prop:"title",label:"名称"}),(0,o.Wm)(W,{prop:"game",label:"游戏"}),(0,o.Wm)(W,{prop:"language",label:"语言"}),(0,o.Wm)(W,{prop:"createtime",label:"创建时间",sortable:""}),(0,o.Wm)(W,{fixed:"right",label:"Operations"},{default:(0,o.w5)((e=>[(0,o.Wm)(d,{onClick:t=>a.openEditBot(e.row),color:"#626aef"},{default:(0,o.w5)((()=>[Qo])),_:2},1032,["onClick"]),(0,o.Wm)(d,{type:"danger",onClick:t=>a.openDeleteBot(e.row)},{default:(0,o.w5)((()=>[el])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(C,{modelValue:a.showEditDialog,"onUpdate:modelValue":t[23]||(t[23]=e=>a.showEditDialog=e),title:"修改Bot",onOpened:t[24]||(t[24]=e=>a.openCodeDialog("-edit"))},{footer:(0,o.w5)((()=>[(0,o._)("span",hl,[(0,o.Wm)(d,{type:"primary",onClick:a.confirmEditBot},{default:(0,o.w5)((()=>[gl])),_:1},8,["onClick"]),(0,o.Wm)(d,{onClick:a.cancelEditBot},{default:(0,o.w5)((()=>[_l])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(x,{"label-position":"top","label-width":"100px",model:a.currentOpBot,style:{"max-width":"100%"},rules:a.rules,ref:"editForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"名称",prop:"title"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:a.currentOpBot.title,"onUpdate:modelValue":t[14]||(t[14]=e=>a.currentOpBot.title=e),placeholder:"请输入Bot名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"简介",prop:"description"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:a.currentOpBot.description,"onUpdate:modelValue":t[15]||(t[15]=e=>a.currentOpBot.description=e),autosize:{minRows:3},type:"textarea",placeholder:"请输入Bot简介"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"语言",prop:"language"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.currentOpBot.language,"onUpdate:modelValue":t[16]||(t[16]=e=>a.currentOpBot.language=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"cpp"},{default:(0,o.w5)((()=>[tl])),_:1}),(0,o.Wm)(h,{label:"java"},{default:(0,o.w5)((()=>[sl])),_:1}),(0,o.Wm)(h,{label:"python"},{default:(0,o.w5)((()=>[al])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"代码"},{default:(0,o.w5)((()=>[ol,(0,o._)("span",{class:"refresh",onClick:t[17]||(t[17]=(...e)=>a.refreshEditor&&a.refreshEditor(...e))},[(0,o.Wm)(w,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(_)])),_:1})]),(0,o.Wm)(y,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"界面风格",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.skin,"onUpdate:modelValue":t[18]||(t[18]=e=>a.skin=e),onChange:a.changeEditSkin},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"chrome"},{default:(0,o.w5)((()=>[rl])),_:1}),(0,o.Wm)(h,{label:"monokai"},{default:(0,o.w5)((()=>[il])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(p,{label:"编辑类型",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.editor_mode,"onUpdate:modelValue":t[19]||(t[19]=e=>a.editor_mode=e),onChange:a.changeEditMode},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"vscode"},{default:(0,o.w5)((()=>[nl])),_:1}),(0,o.Wm)(h,{label:"vim"},{default:(0,o.w5)((()=>[cl])),_:1}),(0,o.Wm)(h,{label:"emacs"},{default:(0,o.w5)((()=>[ul])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(p,{label:"缩进长度",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:a.editor_space,"onUpdate:modelValue":t[20]||(t[20]=e=>a.editor_space=e),onChange:a.changeEditorSpace},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{label:"2"},{default:(0,o.w5)((()=>[dl])),_:1}),(0,o.Wm)(h,{label:"4"},{default:(0,o.w5)((()=>[ml])),_:1}),(0,o.Wm)(h,{label:"8"},{default:(0,o.w5)((()=>[pl])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.Wm)(p,{label:"字号",style:{margin:"15px 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:a.fontsize,"onUpdate:modelValue":t[21]||(t[21]=e=>a.fontsize=e),min:5,max:60,size:"small","controls-position":"right",onChange:a.changeEditFont},null,8,["modelValue","onChange"])])),_:1})])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",ll,[(0,o.Wm)(w,{size:25},{default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})])])),_:1}),(0,o.Wm)(b,{value:a.currentOpBot.content,"onUpdate:value":t[22]||(t[22]=e=>a.currentOpBot.content=e),id:"codeEditor-edit",onInit:a.editorInit,class:"codeEditor",lang:"c_cpp",theme:"textmate",style:{height:"300px",width:"100%"}},null,8,["value","onInit"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,o.Wm)(C,{modelValue:a.showDeleteDialog,"onUpdate:modelValue":t[25]||(t[25]=e=>a.showDeleteDialog=e),title:"删除bot",width:"30%","before-close":e.handleClose},{footer:(0,o.w5)((()=>[(0,o._)("span",wl,[(0,o.Wm)(d,{type:"primary",onClick:a.confirmDeleteBot},{default:(0,o.w5)((()=>[fl])),_:1},8,["onClick"]),(0,o.Wm)(d,{onClick:a.cancelDeleteBot},{default:(0,o.w5)((()=>[kl])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o._)("span",null,"确认删除标题为 "+(0,l.zw)(a.currentOpBot.title)+" 吗?",1)])),_:1},8,["modelValue","before-close"])])),_:1})])),_:1})])),_:1})}s(6699),s(1703);var yl=s(6092),bl=s(17),xl={name:"UserBotIndexView",components:{VAceEditor:yl.m},setup(){bl.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@"+s(17).version+"/src-noconflict/");const e=(0,V.oR)();let t=(0,nt.iH)([]),a=(0,nt.iH)([]),l=(0,nt.iH)(""),r=(0,nt.iH)(!1),i=(0,nt.iH)(!1),n=(0,nt.iH)(!1),c=(0,nt.iH)(null),u=(0,nt.iH)(null),d=(0,nt.iH)(null),m=null,p=(0,nt.iH)("chrome"),h=(0,nt.iH)(11),g=(0,nt.iH)("vscode"),_=(0,nt.iH)(4);const w=e=>{e.renderer.setShowPrintMargin(!1)},f=()=>{null!==localStorage.getItem("editor_skin_for_"+e.state.user.username)&&(p.value=localStorage.getItem("editor_skin_for_"+e.state.user.username)),null!==localStorage.getItem("editor_fontsize_for_"+e.state.user.username)&&(h.value=parseInt(localStorage.getItem("editor_fontsize_for_"+e.state.user.username))),null!==localStorage.getItem("editor_mode_for_"+e.state.user.username)&&(g.value=localStorage.getItem("editor_mode_for_"+e.state.user.username)),null!==localStorage.getItem("editor_space_for_"+e.state.user.username)&&(_.value=localStorage.getItem("editor_space_for_"+e.state.user.username)),m.setOptions({fontSize:`${h.value}pt`,tabSize:parseInt(_.value)}),m.setKeyboardHandler("ace/keyboard/"+g.value),m.setTheme("ace/theme/"+p.value)},k=()=>{m.setTheme("ace/theme/"+p.value),localStorage.setItem("editor_skin_for_"+e.state.user.username,p.value)},v=t=>{m.setOptions({fontSize:`${t}pt`}),h.value=t,localStorage.setItem("editor_fontsize_for_"+e.state.user.username,t)},y=()=>{m.setKeyboardHandler("ace/keyboard/"+g.value),localStorage.setItem("editor_mode_for_"+e.state.user.username,g.value)},b=()=>{m.setOptions({tabSize:parseInt(_.value)}),localStorage.setItem("editor_space_for_"+e.state.user.username,_.value)},x=()=>{m.setValue("")},C=(0,nt.qj)({title:"",game:0,description:"",language:"",content:""}),W=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/getlist/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(t.value=e.bots)}})},z=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/game/getlist/",type:"get",headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(a.value=e.games)}})};W(),(0,o.bv)((()=>{z()}));const S=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/add/",type:"post",data:{title:C.title,game_id:C.game,description:C.description,language:C.language,content:C.content},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result?(C.title="",C.game=0,C.description="",C.content="",W(),(0,go.z8)({message:"创建成功",type:"success"})):go.z8.error(e.result)},error(e){console.log(e)}})},M=t=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/remove/",type:"post",data:{bot_id:t.id},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result&&(W(),(0,go.z8)({showClose:!0,message:"删除成功",type:"success"}))}})},I=t=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/bot/update/",type:"post",data:{bot_id:t.id,title:t.title,description:t.description,language:t.language,content:t.content},headers:{Authorization:"Bearer "+e.state.user.access},success(e){"success"===e.result?(W(),(0,go.z8)({showClose:!0,message:"更新成功",type:"success"})):go.z8.error(e.result)}})},q=(0,o.Fl)((()=>t.value.filter((e=>!l.value||e.game.toLowerCase().includes(l.value.toLowerCase())||e.title.toLowerCase().includes(l.value.toLowerCase())||e.createtime.includes(l.value))))),U=e=>{m=bl.edit("codeEditor"+e),f()},D=e=>{d.value=e,i.value=!0},$=e=>{n.value=!0,d.value=e},P=async()=>{const e=(0,nt.SU)(c);await e.validate((e=>{""!==C.content?C.content.length>1e4?(0,go.z8)({showClose:!0,message:"代码不能超过10000",type:"error"}):e&&(r.value=!1,S()):(0,go.z8)({showClose:!0,message:"代码不能为空",type:"error"})}))},B=(e,t,s)=>{0===C.game?s(new Error("请选择游戏！")):s()},L=()=>{r.value=!1,(0,go.z8)("取消创建");const e=(0,nt.SU)(c);e.resetFields()},j=async()=>{const e=(0,nt.SU)(u);await e.validate((e=>{""!==d.value.content?d.value.content.length>1e4?(0,go.z8)({showClose:!0,message:"代码不能超过10000",type:"error"}):e&&(i.value=!1,I(d.value)):(0,go.z8)({showClose:!0,message:"代码不能为空",type:"error"})}))},T=()=>{i.value=!1,(0,go.z8)("取消修改");const e=(0,nt.SU)(u);e.resetFields()},R=()=>{n.value=!1,M(d.value)},O=()=>{n.value=!1,(0,go.z8)("取消删除")};return{bots:t,games:a,bot:C,search:l,filterBots:q,showCreateDialog:r,showEditDialog:i,showDeleteDialog:n,openCodeDialog:U,openEditBot:D,openDeleteBot:$,confirmCreateBot:P,cancelCreateBot:L,confirmEditBot:j,cancelEditBot:T,confirmDeleteBot:R,cancelDeleteBot:O,createForm:c,editForm:u,currentOpBot:d,editorInit:w,initModal:f,changeEditSkin:k,changeEditFont:v,changeEditMode:y,changeEditorSpace:b,skin:p,fontsize:h,editor_mode:g,editor_space:_,refreshEditor:x,rules:{title:[{required:!0,message:"名称不得为空！",trigger:"blur"},{max:100,message:"长度在 100 个字符之内",trigger:"blur"}],game:[{validator:B,required:!0,message:"请选择游戏！",trigger:"blur"}],description:[{max:300,message:"长度在 300 个字符之内",trigger:"blur"}],language:[{required:!0,message:"请选择语言！",trigger:"blur"}]}}}};const Cl=(0,$t.Z)(xl,[["render",vl],["__scopeId","data-v-492b9de2"]]);var Wl=Cl;const zl=(0,o.Uk)(" 404 Not Found ");function Sl(e,t,s,a,l,r){const i=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[zl])),_:1})}var Ml={name:"NotFound",components:{ContentField:Wa}};const Il=(0,$t.Z)(Ml,[["render",Sl]]);var Vl=Il;const ql=e=>((0,o.dD)("data-v-24325d22"),e=e(),(0,o.Cn)(),e),Ul={class:"third-login"},Dl=ql((()=>(0,o._)("img",{style:{width:"25px"},src:"https://wiki.connect.qq.com/wp-content/uploads/2013/10/03_qq_symbol-1-250x300.png",alt:""},null,-1))),$l=[Dl],Pl=(0,o.Uk)("登录");function Bl(e,t,s,a,l,r){const i=(0,o.up)("el-input"),n=(0,o.up)("el-form-item"),c=(0,o.up)("SliderVerify"),u=(0,o.up)("el-tooltip"),d=(0,o.up)("el-button"),m=(0,o.up)("el-form"),p=(0,o.up)("el-col"),h=(0,o.up)("el-row"),g=(0,o.up)("ContentField");return e.$store.state.user.pulling_info?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{span:8,offset:8},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{model:a.log_info,rules:a.rules,ref:"ruleForm","label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"帐号",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:a.log_info.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.log_info.username=e),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"password",modelValue:a.log_info.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.log_info.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{modelValue:a.log_info.isLock,"onUpdate:modelValue":t[2]||(t[2]=e=>a.log_info.isLock=e),onChange:a.handlerLock,class:"verify"},null,8,["modelValue","onChange"]),(0,o._)("div",Ul,[(0,o.Wm)(u,{class:"box-item",effect:"dark",content:"QQ一键登录",placement:"bottom"},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t[3]||(t[3]=(...e)=>a.qq_login&&a.qq_login(...e))},$l)])),_:1})]),(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"primary",onClick:a.login,style:{width:"100%"}},{default:(0,o.w5)((()=>[Pl])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}))}const Ll=e=>((0,o.dD)("data-v-2302ecf0"),e=e(),(0,o.Cn)(),e),jl=Ll((()=>(0,o._)("div",{class:"background"},null,-1))),Tl=(0,o.Uk)(" >> ");function Rl(e,t,s,a,r,i){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",{class:"drag",style:(0,l.j5)(i.style)},[jl,(0,o._)("div",{class:"text shadow",onselectstart:"return false",style:(0,l.j5)({color:s.textColor})},[(0,o.WI)(e.$slots,"content",{},(()=>[(0,o.Uk)((0,l.zw)(s.content),1)]),!0)],4),(0,o._)("div",{class:"slider",style:(0,l.j5)({height:s.height,width:s.sliderWidth})},[s.icon?(0,o.WI)(e.$slots,"icon",{key:0},(()=>[(0,o._)("i",{class:(0,l.C_)(s.icon)},null,2)]),!0):(0,o.WI)(e.$slots,"icon",{key:1},(()=>[Tl]),!0)],4)],4)])}const Ol=function(){let e=0;return function(t,s){clearTimeout(e),e=setTimeout(t,s)}}();var Fl={name:"SliderVerify",model:{event:"change",prop:"isLock"},props:{isLock:{type:[String,Boolean,Number,Object],required:!0,default:!1},icon:{type:[String],default:"el-icon-d-arrow-right"},activeValue:{type:[String,Boolean,Number,Object],default:!0},inactiveValue:{type:[String,Boolean,Number,Object],default:!1},content:{type:[String],default:"请向右拖动滑块"},height:{type:[String],default:"40px"},sliderWidth:{type:[String],default:"40px"},background:{type:[String],default:"#e8e8e8"},textColor:{type:[String],default:"#777"}},watch:{isLock(e){!e&&this.init()}},computed:{style(){const{height:e,background:t}=this;return{height:e,"line-height":e,background:t}},resize(){return document.body.clientWidth}},mounted(){this.init(),window.onresize=()=>{Ol((()=>{this.init()}),120)}},methods:{selector(e){return document.querySelector(e)},init(){const e=this.selector(".drag");if(e){const t=this.selector(".background"),s=this.selector(".text"),a=this.selector(".slider"),o=e.offsetWidth-a.offsetWidth;let l=this.inactiveValue;a.style.transition=null,t.style.transition=null,a.style.left="0px",t.style.width="0px",s.innerHTML=this.content,a.innerHTML='<i class="el-icon-d-arrow-right"></i>',a.style.color="#3fcd26",a.onmousedown=e=>{a.style.transition=null,t.style.transition=null;const r=e||window.event,i=r.clientX;document.onmousemove=e=>{const r=e||window.event,n=r.clientX;let c=n-i;c>o?c=o:c<0&&(c=0),a.style.left=c+"px",t.style.width=c+"px",c==o&&(s.innerHTML="验证成功",s.style.color="#53C300",a.innerHTML='<i class="el-icon-success"></i>',a.style.color="#53C300",l=this.activeValue,a.onmousedown=null,document.onmousemove=null,setTimeout((()=>{this.$emit("change",this.activeValue)}),100))},document.onmouseup=()=>{if(l==this.activeValue)return!0;a.style.left=0,t.style.width=0,a.style.transition="left 1s ease",t.style.transition="width 1s ease",document.onmousemove=null,document.onmouseup=null}},a.ontouchstart=e=>{const r=e.changedTouches[0];a.style.transition=null,t.style.transition=null;const i=r.pageX;document.ontouchmove=e=>{const r=e.changedTouches[0],n=r.pageX;let c=n-i;c>o?c=o:c<0&&(c=0),a.style.left=c+"px",t.style.width=c+"px",c==o&&(s.innerHTML="验证成功",s.style.color="#53C300",a.innerHTML="&radic;",a.style.color="#53C300",l=this.activeValue,a.ontouchstart=null,document.ontouchmove=null,setTimeout((()=>{this.$emit("change",this.activeValue)}),100))},document.ontouchend=()=>{if(l==this.activeValue)return!0;a.style.left=0,t.style.width=0,a.style.transition="left 1s ease",t.style.transition="width 1s ease",document.ontouchmove=null,document.ontouchend=null}}}}}};const Hl=(0,$t.Z)(Fl,[["render",Rl],["__scopeId","data-v-2302ecf0"]]);var El=Hl,Al={name:"UserAccountLoginView",components:{ContentField:Wa,SliderVerify:El},setup(){const e=(0,V.oR)(),t=(0,nt.iH)(null);let s=(0,nt.qj)({username:"",password:"",isLock:!1});const a=localStorage.getItem("aigame.access"),o=localStorage.getItem("aigame.refresh");a&&o?(e.commit("updateToken",{access:a,refresh:o}),e.dispatch("refresh_access",o),e.dispatch("getinfo",{success(){kr.push({name:"home"}),e.commit("updatePullingInfo",!1)},error(){e.commit("updatePullingInfo",!1),localStorage.removeItem("aigame.access"),localStorage.removeItem("aigame.refresh")}})):e.commit("updatePullingInfo",!1);const l=async()=>{const a=(0,nt.SU)(t);await a.validate((t=>{!1!==s.isLock?t&&e.dispatch("login",{...s,success(){(0,go.z8)({showClose:!0,message:"登录成功！",type:"success"}),e.dispatch("getinfo",{success(){kr.push({name:"home"})}})},error(){(0,go.z8)({showClose:!0,message:"用户名或密码错误！",type:"error"})}}):(0,go.z8)({showClose:!0,message:"请拖动滑块完成验证",type:"error"})}))},r=async e=>{if(e){""!==s.username&&""!==s.password&&s.username&&s.password||(0,go.z8)({showClose:!0,message:"请先输入用户名密码！",type:"error"}),s.isLock=!0;const e=(0,nt.SU)(t);await e.validateField("isLock")}},i=(e,t,a)=>{if(!t)return a(new Error("请拖动滑块完成验证"));""!==s.username&&""!==s.password&&s.username&&s.password||setTimeout((()=>(s.isLock=!1,s.validateField("username"),s.validateField("password"),a(new Error("验证未通过")))),1),a()},n=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/acwing/web/apply_code/",type:"GET",success:e=>{"success"===e.result&&window.location.replace(e.apply_code_url)}})},c=()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/qq/apply_code/",type:"GET",success:e=>{"success"===e.result&&window.location.replace(e.apply_code_url)}})};return{ruleForm:t,log_info:s,login:l,handlerLock:r,rules:{username:[{required:!0,message:"用户名称不得为空！",trigger:"blur"}],password:[{required:!0,message:"密码不得为空！",trigger:"blur"}],isLock:[{validator:i,trigger:"blur"}]},acwing_login:n,qq_login:c}}};const Gl=(0,$t.Z)(Al,[["render",Bl],["__scopeId","data-v-24325d22"]]);var Nl=Gl;const Zl=(0,o.Uk)("注册");function Jl(e,t,s,a,l,r){const i=(0,o.up)("el-input"),n=(0,o.up)("el-form-item"),c=(0,o.up)("PasswordStrength"),u=(0,o.up)("SliderVerify"),d=(0,o.up)("el-button"),m=(0,o.up)("el-form"),p=(0,o.up)("el-col"),h=(0,o.up)("el-row"),g=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{span:8,offset:8},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{model:a.register_info,rules:a.rules,ref:"ruleForm","label-width":"50px","label-position":"top",style:{"user-select":"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"帐号",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:a.register_info.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.register_info.username=e),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"password",modelValue:a.register_info.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.register_info.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"确认密码",prop:"password_confirm"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"password",modelValue:a.register_info.password_confirm,"onUpdate:modelValue":t[2]||(t[2]=e=>a.register_info.password_confirm=e),placeholder:"请输入确认密码",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{passwordStr:a.register_info.password,"onUpdate:passwordStr":t[3]||(t[3]=e=>a.register_info.password=e),style:{"padding-top":"10px"}},null,8,["passwordStr"]),(0,o.Wm)(u,{prop:"isLock",modelValue:a.register_info.isLock,"onUpdate:modelValue":t[4]||(t[4]=e=>a.register_info.isLock=e),onChange:a.handlerLock,class:"verify"},null,8,["modelValue","onChange"]),(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"primary",onClick:a.register,style:{width:"100%"}},{default:(0,o.w5)((()=>[Zl])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}const Kl={id:"container",style:{"margin-bottom":"16px"}};function Yl(e,t,s,a,r,i){const n=(0,o.up)("el-progress"),c=(0,o.up)("el-col"),u=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",Kl,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:6,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{percentage:r.onePercentage,color:r.oneCustomColors,format:i.oneFormat,"stroke-width":3},null,8,["percentage","color","format"])])),_:1}),(0,o.Wm)(c,{span:6,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{percentage:r.twoPercentage,color:r.twoCustomColors,format:i.twoFormat,"stroke-width":3},null,8,["percentage","color","format"])])),_:1}),(0,o.Wm)(c,{span:6,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{percentage:r.ThreePercentage,color:r.ThreeCustomColors,format:i.ThreeFormat,"stroke-width":3},null,8,["percentage","color","format"])])),_:1}),(0,o.Wm)(c,{span:2,offset:1,style:{"line-height":"15px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(r.content),1)])),_:1})])),_:1})])}var Xl={name:"PasswordStrength",model:{event:"change",prop:"passwordStr"},props:{passwordStr:{type:[String,Boolean,Number,Object],required:!0,default:""}},watch:{passwordStr(e){const t=this.checkPasswordStrength(e);switch(t){case 0:this.content="",this.onePercentage=0,this.twoPercentage=0,this.ThreePercentage=0;break;case 1:this.content="弱",this.onePercentage=100,this.twoPercentage=0,this.ThreePercentage=0;break;case 2:this.content="中",this.onePercentage=100,this.twoPercentage=100,this.ThreePercentage=0;break;case 3:this.content="中",this.onePercentage=100,this.twoPercentage=100,this.ThreePercentage=0;break;default:this.content="高",this.onePercentage=100,this.twoPercentage=100,this.ThreePercentage=100;break}}},data(){return{content:"",onePercentage:0,twoPercentage:0,ThreePercentage:0,oneCustomColors:[{color:"#f56c6c",percentage:100}],twoCustomColors:[{color:"#e6a23c",percentage:100}],ThreeCustomColors:[{color:"#67c23a",percentage:100}]}},methods:{oneFormat(){return""},twoFormat(){return""},ThreeFormat(){return""},checkPasswordStrength(e){let t=0;return e.length<1||(/\d/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/\W/.test(e)&&t++),t}}};const Ql=(0,$t.Z)(Xl,[["render",Yl]]);var er=Ql,tr={name:"UserAccountRegisterView",components:{ContentField:Wa,SliderVerify:El,PasswordStrength:er},setup(){const e=(0,V.oR)(),t=(0,nt.iH)(null);let s=(0,nt.qj)({username:"",password:"",password_confirm:"",isLock:!1});const a=async()=>{const a=(0,nt.SU)(t);await a.validate((t=>{!1!==s.isLock?t&&Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/register/",type:"post",data:s,success(t){"success"===t.result?e.dispatch("login",{username:s.username,password:s.password,success(){(0,go.z8)({showClose:!0,message:"登录成功！",type:"success"}),e.dispatch("getinfo",{success(){kr.push({name:"home"})}})}}):(0,go.z8)({showClose:!0,message:t.result,type:"error"})}}):(0,go.z8)({showClose:!0,message:"请拖动滑块完成验证",type:"error"})}))},o=async e=>{if(e){""!==s.username&&""!==s.password&&""!==s.password_confirm&&s.username&&s.password&&s.password_confirm||(0,go.z8)({showClose:!0,message:"请先输入用户名密码！",type:"error"}),s.isLock=!0;const e=(0,nt.SU)(t);await e.validateField("isLock")}},l=(e,t,a)=>{if(!t)return a(new Error("请拖动滑块完成验证"));""!==s.username&&""!==s.password&&""!==s.password_confirm&&s.username&&s.password&&s.password_confirm||setTimeout((()=>(s.isLock=!1,s.validateField("username"),s.validateField("password"),s.validateField("password_confirm"),a(new Error("验证未通过")))),1),a()};return{ruleForm:t,register_info:s,register:a,handlerLock:o,rules:{username:[{required:!0,message:"用户名称不得为空！",trigger:"blur"},{min:3,max:18,message:"长度在 3 到 18 个字符",trigger:"blur"}],password:[{required:!0,message:"密码不得为空！",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],password_confirm:[{required:!0,message:"确认密码不得为空！",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],isLock:[{validator:l,trigger:"blur"}]}}}};const sr=(0,$t.Z)(tr,[["render",Jl],["__scopeId","data-v-60550ce9"]]);var ar=sr;function or(e,t,s,a,l,r){return(0,o.wg)(),(0,o.iD)("div")}var lr={name:"UserAccountAcWingWebReceiveCodeView",setup(){const e=(0,q.yj)(),t=(0,V.oR)();Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/acwing/web/receive_code/",type:"GET",data:{code:e.query.code,state:e.query.state},success:e=>{"success"===e.result?(t.commit("updateToken",{access:e.access,refresh:e.refresh}),kr.push({name:"home"}),t.commit("updatePullingInfo",!1)):kr.push({name:"user_account_login"})}})}};const rr=(0,$t.Z)(lr,[["render",or]]);var ir=rr;function nr(e,t,s,a,l,r){return(0,o.wg)(),(0,o.iD)("div")}var cr={name:"UserAccountQQReceiveCodeView",setup(){const e=(0,q.yj)(),t=(0,V.oR)();Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/qq/receive_code/",type:"GET",data:{code:e.query.code,state:e.query.state},success:e=>{"success"===e.result?(t.commit("updateToken",{access:e.access,refresh:e.refresh}),kr.push({name:"home"}),t.commit("updatePullingInfo",!1)):kr.push({name:"user_account_login"})}})}};const ur=(0,$t.Z)(cr,[["render",nr]]);var dr=ur,mr={state:{id:0,username:"",photo:"",access:"",refresh:"",is_login:!1,pulling_info:!0,interval_func:0},getters:{},mutations:{updateUser(e,t){e.id=t.id,e.username=t.username,e.photo=t.photo,e.is_login=t.is_login},updateToken(e,t){localStorage.setItem("aigame.access",t.access),localStorage.setItem("aigame.refresh",t.refresh),e.access=t.access,e.refresh=t.refresh},logout(e){e.id=0,e.username="",e.photo="",e.access="",e.refresh="",e.is_login=!1},updatePullingInfo(e,t){e.pulling_info=t},setIntervalFunc(e,t){let s=localStorage.getItem("interval_func");null!==s&&clearInterval(s),e.interval_func=t,localStorage.setItem("setIntervalFunc",t)}},actions:{login(e,t){Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/token/",type:"post",data:{username:t.username,password:t.password},success(s){e.commit("updateToken",s),e.dispatch("refresh_access",s.refresh),t.success(s)},error(e){t.error(e)}})},getinfo(e,t){Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/getinfo/",type:"get",headers:{Authorization:"Bearer "+e.state.access},success(s){"success"===s.result?(e.commit("updateUser",{...s,is_login:!0}),t.success()):t.error()},error(e){t.error(e)}})},logout(e){localStorage.removeItem("aigame.access"),localStorage.removeItem("aigame.refresh"),clearInterval(localStorage.getItem("setIntervalFunc")),e.commit("logout")},refresh_access(e,t){let s=setInterval((()=>{Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/token/refresh/",type:"post",data:{refresh:t},success(s){e.commit("updateToken",{access:s.access,refresh:t}),Vs().ajax({url:"https://aigame.zzqahm.top/backend/player/token/update/",type:"post",headers:{Authorization:"Bearer "+s.access},data:{token:s.access}})},error(e){console.log(e)}})}),27e4);e.commit("setIntervalFunc",s)}},modules:{}},pr={state:{status:"matching",socket:null,opponent_username:"",opponent_photo:"",gamemap:null,a_id:0,a_language:"",a_is_robot:!1,b_id:0,b_language:"",b_is_robot:!1,aCnt:2,bCnt:2,gameObject:null,loser:"none",type:"none",msgs:[],canSendMsg:!1,codeOutMsg:"",firstMove:null,dir:-1},getters:{},mutations:{updateSocket(e,t){e.socket=t},updateOpponent(e,t){e.opponent_username=t.username,e.opponent_photo=t.photo},updateStatus(e,t){e.status=t},updateSnakeGame(e,t){e.gamemap=t.map,e.a_id=parseInt(t.a_id),e.a_language=t.a_language,e.a_is_robot=Boolean(t.a_is_robot),e.b_id=parseInt(t.b_id),e.b_language=t.b_language,e.b_is_robot=Boolean(t.b_is_robot)},updateChessGame(e,t){e.a_id=parseInt(t.a_id),e.b_id=parseInt(t.b_id),e.firstMove=t.current_round},updateFirstMove(e,t){e.firstMove=t},updateGameObject(e,t){e.gameObject=t},updateGameResult(e,t){e.loser=t.loser,e.type=t.status},updateChessCnt(e,t){e.aCnt=t.aCnt,e.bCnt=t.bCnt},pushMsg(e,t){t.id=e.msgs.length+1,e.msgs.push(t)},clearMsg(e){e.msgs=[]},updateCanSendMsg(e,t){e.canSendMsg=t},addCodeOutMsg(e,t){e.codeOutMsg+=t},clearCodeOutMsg(e){e.codeOutMsg=""},updateDir(e,t){e.dir=t}},actions:{},modules:{}},hr={state:{hall_socket:null,hall_msgs:[],is_record:!1,a_steps:"",b_steps:"",record_loser:"",a_username:"",a_photo:"",b_username:"",b_photo:"",a_is_robot:!1,b_is_robot:!1,a_language:"",b_language:""},getters:{},mutations:{updateHallSocket(e,t){e.hall_socket=t},pushHallMsg(e,t){t.id=e.hall_msgs.length+1,e.hall_msgs.push(t)},updateIsRecord(e,t){e.is_record=t},updateSteps(e,t){e.a_steps=t.a_steps,e.b_steps=t.b_steps},updateRecordLoser(e,t){e.record_loser=t},updatePlayerInfo(e,t){e.a_username=t.a_username,e.a_photo=t.a_photo,e.a_language=t.a_language,e.b_username=t.b_username,e.b_photo=t.b_photo,e.b_language=t.b_language},updateIsRobot(e,t){e.a_is_robot=Boolean(t.a_is_robot),e.b_is_robot=Boolean(t.b_is_robot)}},actions:{},modules:{}},gr={state:{gameUtils:null,matchTime:0,isMatch:!1},getters:{},mutations:{updateGameUtils(e,t){e.gameUtils=t},updateIsMatch(e,t){e.gameUtils.initMatchTime(),e.isMatch=t},clearMatchTime(e,t){e.matchTime=t},updateMatchTime(e,t){e.matchTime=t}},actions:{},modules:{}},_r=(0,V.MT)({state:{backPage:""},getters:{},mutations:{updateBackPage(e,t){e.backPage=t}},actions:{},modules:{user:mr,pk:pr,record:hr,utils:gr}});const wr=[{path:"/",name:"home",redirect:"/record/",meta:{requestAuth:!0,description:"首页",isRoot:!0}},{path:"/pk/:game/",name:"pk_index",component:ks,meta:{requestAuth:!0,description:"对战界面",isRoot:!1}},{path:"/record/",name:"record_index",component:ha,meta:{requestAuth:!0,description:"对战列表",isRoot:!0}},{path:"/record/:recordId/",name:"record_content",component:fa,meta:{requestAuth:!0,description:"回放界面",isRoot:!1}},{path:"/ranklist/",name:"ranklist_index",component:Ds,meta:{requestAuth:!0,description:"排行榜",isRoot:!0}},{path:"/discussion/",name:"discussion_index",component:Ma,meta:{requestAuth:!0,description:"讨论区",isRoot:!0}},{path:"/fresh_news/",name:"fresh_news_index",component:fo,meta:{requestAuth:!0,description:"新鲜事",isRoot:!0}},{path:"/message_board/",name:"message_board_index",component:xo,meta:{requestAuth:!0,description:"留言板",isRoot:!0}},{path:"/user/bot/",name:"user_bot_index",component:Wl,meta:{requestAuth:!0,description:"我的Bot",isRoot:!0}},{path:"/user/account/login/",name:"user_account_login",component:Nl,meta:{requestAuth:!1,description:"登录",isRoot:!0}},{path:"/user/account/register/",name:"user_account_register",component:ar,meta:{requestAuth:!1,description:"注册",isRoot:!0}},{path:"/player/acwing/web/receive_code/",name:"player_acwing_web_receive_code",component:ir,meta:{requestAuth:!1,description:"",isRoot:!0}},{path:"/player/qq/receive_code/",name:"player_qq_receive_code",component:dr,meta:{requestAuth:!1,description:"",isRoot:!0}},{path:"/404/",name:"404",component:Vl,meta:{requestAuth:!1,description:"",isRoot:!0}},{path:"/:catchAll(.*)",redirect:"/404/"}],fr=(0,q.p7)({history:(0,q.PO)(),routes:wr});fr.beforeEach(((e,t,s)=>{e.meta.isRoot&&_r.commit("updateBackPage",""),e.meta.requestAuth&&!_r.state.user.is_login?s({name:"user_account_login"}):s()}));var kr=fr,vr=s(2748);class yr extends jt{constructor(e){super(),this.store=e,this.matchTime=0}initMatchTime(){this.matchTime=0}update(){this.store.state.utils.isMatch&&(this.matchTime+=this.timedelta,parseInt(this.matchTime/1e3)!=this.store.state.utils.matchTime&&this.store.commit("updateMatchTime",parseInt(this.matchTime/1e3)))}}var br={name:"App",components:{Expand:vr.Expand,Fold:vr.Fold},setup(){const e=(0,V.oR)(),t=(0,q.yj)(),s=(0,nt.iH)("");let a=(0,nt.iH)(!1),l=(0,nt.iH)(!1);const r=()=>{e.dispatch("logout"),kr.push({name:"user_account_login"})};(0,o.YP)((()=>t.name),(()=>{s.value=t.meta.description}));const i=()=>{a.value=!a.value},n=()=>{"回放界面"!==s.value?l.value=!0:kr.push({name:"record_index"})},c=()=>{l.value=!1,"playing"===e.state.pk.status||e.state.pk.status,kr.push({name:"record_index"})};return(0,o.bv)((()=>{null===e.state.utils.gameUtils&&e.commit("updateGameUtils",new yr(e))})),{logout:r,page:s,collapse:i,isCollapse:a,showBackDialog:l,showConfirmBack:n,clickBack:c}}};const xr=(0,$t.Z)(br,[["render",I]]);var Cr=xr,Wr=s(7239);s(4415);const zr=(0,a.ri)(Cr);zr.use(Wr.Z);for(const[Sr,Mr]of Object.entries(vr))zr.component(Sr,Mr);zr.use(_r).use(kr).mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){s.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];s.O=function(t,a,o,l){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,n=0;n<a.length;n++)(!1&l||r>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[n])}))?a.splice(n--,1):(i=!1,l<r&&(r=l));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,r=a[0],i=a[1],n=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(n)var u=n(s)}for(t&&t(a);c<r.length;c++)l=r[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(u)},a=self["webpackChunkaigame_web"]=self["webpackChunkaigame_web"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(6839)}));a=s.O(a)})();
//# sourceMappingURL=app.384eda51.js.map